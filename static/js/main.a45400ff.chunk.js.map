{"version":3,"sources":["features/notifications/notifSlice.js","js/safeParse.js","components/Popups/AdminPopup/index.js","components/Popups/NotifyPopup/index.js","js/styles.js","components/Popups/Disconnection/index.js","components/Popups/TokenExpired/index.js","resources/sounds/appointed.ogg","js/popups.js","js/thunkCatch.js","js/messages.js","features/messages/filteredMessagesSlice.js","js/avatars.js","features/auth/authSlice.js","components/PrivateRoute/index.js","components/Notifier/index.js","features/rooms/roomsSlice.js","middleware/socket.io/socket.actions.js","js/examples.js","components/Navbar/RoomContextMenu/index.js","components/Navbar/NavItem/index.js","components/Navbar/ProfileButton/index.js","hooks/useThemes.js","app/themes.js","contexts/ThemeContext.js","resources/logos/LogoBlanco.png","resources/logos/LogoNegro.png","components/Home/Login/Logo/index.js","components/Navbar/ProfileDialog/SelectColores.js","components/Navbar/ProfileDialog/index.js","hooks/useNotificationTitle.js","components/Navbar/NavLabel/index.js","components/Navbar/index.js","components/Home/Login/index.js","components/Home/HomeBox/useRandomAvatar.js","components/Home/HomeBox/index.js","components/Home/index.js","features/messages/messagesSlice.js","features/users/usersSlice.js","hooks/useRoomChange.js","components/ChatBox/Input/CharacterCounter/index.js","components/ChatBox/Input/ExtraBox/index.js","components/ChatBox/Input/Quote/index.js","components/ChatBox/Input/MessageInfo/index.js","components/ChatBox/Input/index.js","components/ChatBox/UsersList/UserItem/index.js","components/ChatBox/UsersList/Placeholders/index.js","components/ChatBox/UsersContextMenu/index.js","components/ChatBox/UsersList/index.js","hooks/useVirtuosoPrepend.js","components/ChatBox/Avatar/index.js","js/dates.js","components/ChatBox/Message/Primary/index.js","components/ChatBox/Message/Secondary/index.js","components/ChatBox/Message/index.js","components/ChatBox/FilteredMessage/Primary/index.js","components/ChatBox/FilteredMessage/Secondary/index.js","components/ChatBox/FilteredMessage/index.js","components/ChatBox/MessagesContextMenu/index.js","components/ChatBox/ScrollButton/index.js","components/ChatBox/VirtuosoContainer/index.js","components/ChatBox/FeedbackDialog/index.js","components/ChatBox/AdminPanel/index.js","components/ChatBox/NotifyPanel/index.js","components/ChatBox/index.js","App.js","middleware/socket.io/socket.eventHandlers.js","js/room.helper.js","middleware/socket.io/socket.listeners.js","middleware/socket.io/socket.middleware.js","app/store.js","app/SocketClient.js","index.js"],"names":["NOTIF_TYPE_MAP","PRIVADA","DEPARTAMENTO","COMUN","NOTIF_LABEL_MAP","CONVERSACIONES","SERVICIOS","GENERAL","notifSlice","createSlice","name","initialState","services","privates","commons","popups","reducers","addedMessageNotif","state","action","stateProp","payload","type","roomNotif","roomId","removedMessageNotif","clearedNotifications","addedPopup","prepare","popup","key","nanoid","reducer","preventDuplicate","options","message","existsPopup","findIndex","push","removedPopup","splice","actions","getNotifications","createSelector","notifications","Object","values","reduce","total","notif","getNotificationsByType","_","roomType","hasRoomGroupNotifications","some","safeParse","stringToParse","defaultValue","JSON","parse","err","useStyles","makeStyles","theme","root","alignItems","justifyContent","background","borderRadius","padding","flexWrap","color","float","maxWidth","marginRight","spacing","MentionAnswer","forwardRef","ref","id","closeSnackbar","useSnackbar","className","Typography","variant","Button","margin","onClick","NotifyPopup","colorPrimary","style","rootStyles","display","minHeight","maxHeight","backgroundColor","palette","default","navItemStyles","navItem","textTransform","badge","flexDirection","width","top","roomListDiv","gap","exitButton","minWidth","homeStyles","marginLeft","zIndex","loginContainer","marginBottom","boxSizing","homeBoxContainer","borderRight","position","overflow","avatar","height","title","textAlign","bottom","fontWeight","logo","navbarStyles","paddingTop","autofill","flex","profileButton","list","overflowY","scrollbarWidth","scrollbarColor","searcher","profileDialogStyles","divAvatarColor","marginTop","cuerpoAvatar","selectSonido","paddingBottom","btnOscuro","left","ajustesAvatar","chatBoxStyles","header","borderBottom","divider","boxShadow","fontSize","virtuosoContainerStyles","scrollButton","right","primary","main","shadows","dark","loader","inputStyles","innerContainer","inputForm","paddingRight","buttonSend","window","chrome","extraContainer","borderTopLeftRadius","shape","borderTopRightRadius","border","overflowX","transform","extraSubheader","infoBox","quote","content","characterCounter","pointerEvents","messageStyles","paddingLeft","cursor","hover","mine","order","answered","assigned","alignSelf","labelContainer","text","usersListStyles","item","searchBox","feedbackDialogStyles","flexGrow","menuSearchStyles","progress","subheader","actionTitle","pollItem","pollResults","dropdown","paper","icon","Disconnection","props","socketStatus","useSelector","auth","status","useEffect","Box","button","borderColor","TokenExpired","dispatch","useDispatch","disableElevation","endIcon","logout","howl","Howl","src","ring","playSound","play","errorUpdatingAvatar","doneUpdatingAvatar","socketConnectError","disconnection","persist","anchorOrigin","horizontal","vertical","tokenExpired","feedbackSended","connectionError","errorPopup","infoPopup","adminPopup","AdminPopup","thunkCatch","responseError","request","response","error","Error","urlRegexp","rebuildMessage","msg","match","lastIndex","compoundText","exec","value","slice","index","length","undefined","messagesAdapter","createEntityAdapter","selectId","messageId","sortComparer","a","b","getInitialState","lastMessagesCount","filter","fetchFilteredMessages","createAsyncThunk","getState","rooms","active","login","token","platformId","filteredMessages","url","process","axios","post","Array","isArray","data","map","messagesSlice","addedMessage","addOne","setFilterProp","extraReducers","pending","removeAll","fulfilled","setAll","rejected","getSelectors","selectFilteredMessageById","selectById","selectFilteredMessageIds","selectIds","quoteId","mention","labels","selectAll","propiedadesOriginales","topType","accessoriesType","hatColor","hairColor","facialHairType","facialHairColor","clotheType","clotheColor","graphicType","eyeType","eyebrowType","mouthType","skinColor","propiedadesTraducidas","camposTraducidos","camposOriginales","defaultAvatar","avatarStyle","loginParams","console","log","profile","session","toString","updatedAvatar","expireTime","avatarState","socket","authSlice","connected","disconnected","addedReward","getIsAuthenticated","Boolean","PrivateRoute","Component","component","rest","isAuthenticated","render","to","displayed","Notifier","enqueueSnackbar","forEach","dismissed","includes","onClose","event","reason","popupKey","Function","onExited","roomSort","roomA","roomB","typeComparision","localeCompare","roomName","roomsAdapter","room","roomsSlice","setRooms","ids","addedRoom","upsertOne","removedRoom","removeOne","changedActiveRoom","changedRoomSound","clearedRooms","selectAllRooms","getActiveRoom","entities","activeRoomId","GROUP_LABELS","getGroupedRooms","roomEntities","sort","firstIndexCommon","firstIndexService","firstIndexPrivate","modif","pos","label","getActiveRole","role","actionTypes","sendMessage","createAction","sendPrivateRoom","sendStateChange","exitPrivateRoom","sendAdminAction","parsedRoomId","parseInt","receiver","sendNotifyAction","createMessageState","newState","stateDate","Date","toISOString","lastState","stateLOGIN","LOWEST_ROLES","x","y","RoomContextMenu","onChangeSound","sound","useState","menu","setMenu","open","close","useImperativeHandle","contextOptions","useMemo","getRoomContextOptions","isOpened","Menu","keepMounted","anchorReference","anchorPosition","option","MenuItem","onItemSelected","ListItemIcon","NavItem","onSelected","selected","setSound","actualRoom","find","isPrivate","roomContextMenuRef","useRef","ListItem","code","onContextMenu","e","preventDefault","openContextMenu","current","onRoomContextMenu","clientX","clientY","Badge","badgeContent","Avatar","string","letter","split","element","charAt","toUpperCase","getCapitalLetters","ListItemText","toLowerCase","IconButton","aria-label","size","Tooltip","arrow","stopPropagation","React","memo","ProfileButton","useThemes","darkMode","setDarkMode","changeTheme","useCallback","localStorage","setItem","isDarkModeActive","localDarkMode","getItem","_palette","primaryColor","secondary","tonalOffset","lightTheme","createMuiTheme","overrides","MuiButton","darkTheme","ThemeContext","createContext","ThemeProvider","children","setPrimaryColor","Provider","Logo","useContext","whiteLogo","blackLogo","alt","useEstilos","formControl","colores","nombre","SelectColores","estilos","selectBullet","codigo","FormControl","required","InputLabel","htmlFor","Select","onChange","target","select","renderValue","c","optionItem","ProfileDialog","visible","setVisible","previewAvatar","setPreviewAvatar","changeAvatar","prev","Dialog","scroll","aria-labelledby","fullWidth","DialogTitle","DialogContent","dividers","campo","labelId","prop","subIndex","DialogActions","btnCerrar","btnGuardar","CALIO","useNotificationTitle","totalNotifications","document","LABEL_ICONS","NavLabel","hasNotifications","ListSubheader","invisible","Divider","AVAILABLE_PATHS","Navbar","activeRoom","pathname","useLocation","profileDialogRef","groupedRooms","search","setSearch","Card","elevation","raised","OutlinedInput","placeholder","endAdornment","InputAdornment","List","disablePadding","i","Login","logoClassName","password","form","setForm","hidePassword","setHidePassword","activeCaps","setActiveCaps","passwordRef","history","useHistory","buttonActive","setButtonActive","trim","onSubmit","isSubmitDisabled","startAdornment","inputRef","onKeyUp","caps","getModifierState","onBlur","placement","disabled","startIcon","useRandomAvatar","entries","listaValores","Math","floor","random","avatarAleatorio","setAvatar","callback","delay","cb","setInterval","clearInterval","useInterval","randomFieldIndex","ceil","randomField","randomPropIndex","HomeBox","avatarClassName","Home","fetchInitialMessages","_data","fetchNextMessages","lastMessage","messages","lastId","addedQuote","removedQuote","addedMention","removedMention","addedLabel","tag","removedLabel","updatedState","previousId","updatedLastMessagesCount","clearedForm","sendedMessage","clearedMessages","upsertMany","selectMessageById","selectMessageIds","getMessageData","usersAdapter","user","roleComparision","fetchUsersByRoom","usersSlice","userAdded","userRemoved","clearedUsers","userChanged","users","selectUserById","selectAllUsers","AGENT_ROLES","getGroupedUsers","userEntities","usersCount","firstAgentIndex","firstStaffIndex","useRoomChange","CharacterCounter","messageLength","isNearLimit","setIsNearLimit","Fade","in","CircularProgress","thickness","titles","online","ExtraBox","containerStyle","subheaderStyle","ClickAwayListener","onClickAway","Grow","filteredContent","elem","getFilteredContent","Quote","Collapse","MessageInfo","removeMention","removeLabel","Chip","onDelete","deleteIcon","initialBoxState","charPos","Input","input","setInput","onlineUsers","onlineBox","setOnlineBox","labelsBox","setLabelsBox","onSendMessage","messageData","l","join","focus","canSendRelease","TextField","onKeyPress","ctrlKey","rows","inputValue","lastPos","lastLetter","isValid","shouldOpenOnline","shouldOpenLabels","getBoxParams","multiline","canAnswerMention","origin","isOnline","labelToRemove","UserItem","onUserContextMenu","UserLabel","NoResultsPlaceholder","NoUsersConnectedPlaceholder","UsersContextMenu","getUserContextOptions","guestLogin","UserList","usersContextMenuRef","groupedUsers","useMediaQuery","breakpoints","down","CardHeader","CardContent","SearchOutlined","finalUsers","u","filterUsers","getFilteredUsers","useVirtuosoPrepend","actualMessageCount","firstItemIndex","setFirstItemIndex","prependItems","avatarPlaceholderStyle","isScrolling","finalAvatar","ListItemAvatar","getMessageTime","isoString","toLocaleString","getFullTime","date","toLocaleTimeString","getHourTime","Primary","Secondary","compoundMessage","getMentionName","Link","href","rel","estiloCursor","Message","onDoubleClick","styles","profileName","receiverUser","getStyleFromState","emitter","mentionLogin","previousUserName","previousMessage","FilteredMessage","MessagesContextMenu","messageRole","canSeeOnline","getMessageContextOptions","stateId","ScrollButton","anchored","scrollbarStyle","VirtuosoContainer","isFiltered","contextMenuRef","virtuosoRef","setIsScrolling","isBottom","setIsBottom","filteredStatus","messageIds","filteredMessageIds","filteredFirstItemIndex","filteredPrependItems","scrollToBottom","behavior","scrollOptions","align","Number","MAX_VALUE","setTimeout","scrollToIndex","onMessageContextMenu","private","onMessageDoubleClick","messageLogin","isLoading","isFilteredLoading","initialTopMostItemIndex","atBottomStateChange","startReached","followOutput","itemContent","feedbackDefault","observations","FeedbackDialog","setVsible","feedback","setFeedback","feedbackRequest","VERSION","APLICACION","TIPO","OBSERVACIONES","LOGIN","tokenID","rowsMax","ROLES","AdminPanel","setAction","setPayload","isVisible","setIsVisible","onChangePayload","maxRows","roleTag","NotifyPanel","ChatBox","openSearchMenu","setOpenSearchMenu","positionMenu","setPositionMenu","setFilter","setIsFiltered","feedbackRef","adminRef","notifyRef","onSearchClick","isAdmin","isntUser","UsersList","array","titleTypographyProps","currentTarget","getContentAnchorEl","anchorEl","App","snackbarPosition","path","exact","PRIVATE_TYPE","eventHandlers","emit","privateRoom","userLogin","guestLogind","filterOutgoingPrivate","finalRoom","guestName","creatorName","prepareOutgoingPrivateRoom","exitPrivate","_getState","_response","adminAction","notifyAction","stateChange","customListeners","messageRoom","isForActiveRoom","mentionMessage","answerMessage","messageState","change","privateRoomEvent","creatorLogin","prepareIncomingPrivateRoom","exitRoom","notifyPopup","updateRoom","popupText","removeRoom","forceDisconnect","CUSTOM_EVENTS","middleware","next","connect","socketId","handler","on","disconnect","startsWith","actionName","onSuccess","onError","onNotif","onDisconnect","this","io","autoConnect","reconnectionAttempts","fn","fun","configureStore","authReducer","messagesReducer","filteredMessagesReducer","roomsReducer","usersReducer","notifReducer","socketMiddleware","ReactDOM","store","getElementById"],"mappings":"sPASMA,EAAiB,CACrBC,QAAS,WACTC,aAAc,WACdC,MAAO,WAGHC,EAAkB,CACtBC,eAAgB,WAChBC,UAAW,WACXC,QAAS,WAGLC,EAAaC,YAAY,CAC7BC,KAAM,gBACNC,aArBmB,CACnBC,SAAU,GACVC,SAAU,GACVC,QAAS,GACTC,OAAQ,IAkBRC,SAAU,CACRC,kBAAmB,SAACC,EAAOC,GACzB,IAAMC,EAAYpB,EAAemB,EAAOE,QAAQC,MAC1CC,EAAYL,EAAME,GAAWD,EAAOE,QAAQG,QAC7CD,EAE2B,kBAAdA,IAChBL,EAAME,GAAWD,EAAOE,QAAQG,SAAW,GAF3CN,EAAME,GAAWD,EAAOE,QAAQG,QAAU,GAK9CC,oBAAqB,SAACP,EAAOC,GAE3BD,EADkBlB,EAAemB,EAAOE,QAAQC,OAC/BH,EAAOE,QAAQG,QAAU,GAE5CE,qBAAsB,SAAAR,GACpBA,EAAMN,SAAW,GACjBM,EAAML,SAAW,GACjBK,EAAMJ,QAAU,IAElBa,WAAY,CACVC,QAAS,SAAAC,GAAK,MAAK,CAAER,QAAQ,2BAAMQ,GAAP,IAAcC,IAAKC,YAAO,QACtDC,QAAS,SAACd,EAAOC,GAAY,IACnBc,EAAqBd,EAAOE,QAAQa,QAApCD,iBACAE,EAAYhB,EAAOE,QAAnBc,QACFC,EAAclB,EAAMH,OAAOsB,WAAU,SAAAR,GAAK,OAAIA,EAAMM,UAAYA,MAAY,IAC7EF,GAAqBA,IAAqBG,IAC7ClB,EAAMH,OAAOuB,KAAKnB,EAAOE,WAI/BkB,aAAc,SAACrB,EAAOC,GACpBD,EAAMH,OAAOyB,OAAOrB,EAAOE,QAAS,GAC/BF,EAAOE,SAASH,EAAMH,OAAOyB,QAAQ,EAAG,O,EAW/ChC,EAAWiC,QALbf,E,EAAAA,qBACAT,E,EAAAA,kBACAQ,E,EAAAA,oBACAE,E,EAAAA,WACAY,E,EAAAA,aAGa/B,IAAf,QAEakC,EAAmBC,aAC9B,SAAAzB,GAAU,IAAD,EACiCA,EAAM0B,cAAtC/B,EADD,EACCA,SAAUC,EADX,EACWA,QAASF,EADpB,EACoBA,SAC3B,OAAO,uCAAKC,GAAaC,GAAYF,MAEvC,SAAAgC,GAAa,OAAIC,OAAOC,OAAOF,GAAeG,QAAO,SAACC,EAAOC,GAAR,OAAkBD,EAAQC,IAAO,MAG3EC,EAAyBP,aACpC,SAAAzB,GAAK,OAAIA,EAAM0B,iBACf,SAACO,EAAD,SAA8B,CAC5BC,SADF,EAAMA,SAEJ5B,OAFF,EAAgBA,WAIhB,SAACoB,EAAD,GAA0C,IAAxBQ,EAAuB,EAAvBA,SAAU5B,EAAa,EAAbA,OAE1B,OAAOoB,EADW5C,EAAeoD,IACD5B,MAGvB6B,EAA4BV,aACvC,SAAAzB,GAAK,OAAIA,EAAM0B,iBACf,SAACO,EAAGC,GAAJ,OAAiBA,KACjB,SAACR,EAAeQ,GACd,IAAMhC,EAAYhB,EAAgBgD,GAClC,QAAKhC,GACEyB,OAAOC,OAAOF,EAAcxB,IAAYkC,MAAK,SAAAL,GAAK,OAAIA,EAAQ,Q,iBCxF1DM,MARf,SAAmBC,EAAeC,GAChC,IACE,OAAyB,OAAlBD,EAAyBC,EAAeC,KAAKC,MAAMH,GAC1D,MAAOI,GACP,OAAOH,I,kDCGLI,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,WAAY,SACZC,eAAgB,SAChBC,WAAY,qBACZC,aAAc,EACdC,QAAS,YACTC,SAAU,OACVC,MAAO,OACPC,MAAO,QACPC,SAAU,QAEZC,YAAa,CACXA,YAAaX,EAAMY,QAAQ,QAoBhBC,EAhBOC,sBAAW,WAAkBC,GAAS,IAAxB3C,EAAuB,EAAvBA,QAAS4C,EAAc,EAAdA,GAAc,EAC3BlB,IAAtBG,EADiD,EACjDA,KAAMU,EAD2C,EAC3CA,YACNM,EAAkBC,cAAlBD,cAER,OACE,eAAC,IAAD,CAAiBF,IAAKA,EAAKI,UAAWlB,EAAtC,UACE,cAACmB,EAAA,EAAD,CAAYC,QAAQ,QAAQF,UAAWR,EAAvC,SACGvC,IAEH,cAACkD,EAAA,EAAD,CAAQC,OAAO,QAAQC,QAAS,kBAAMP,EAAcD,IAApD,SACE,cAAC,IAAD,YC3BFlB,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,WAAY,SACZC,eAAgB,SAChBC,WAAY,qBACZC,aAAc,EACdC,QAAS,YACTC,SAAU,OACVC,MAAO,OACPC,MAAO,QACPC,SAAU,QAEZC,YAAa,CACXA,YAAaX,EAAMY,QAAQ,QAoBhBa,EAhBKX,sBAAW,WAAkBC,GAAS,IAAxB3C,EAAuB,EAAvBA,QAAS4C,EAAc,EAAdA,GAAc,EACzBlB,IAAtBG,EAD+C,EAC/CA,KAAMU,EADyC,EACzCA,YACNM,EAAkBC,cAAlBD,cAER,OACE,eAAC,IAAD,CAAiBF,IAAKA,EAAKI,UAAWlB,EAAtC,UACE,cAACmB,EAAA,EAAD,CAAYC,QAAQ,QAAQF,UAAWR,EAAvC,SACGvC,IAEH,cAACkD,EAAA,EAAD,CAAQC,OAAO,QAAQC,QAAS,kBAAMP,EAAcD,IAAKU,cAAY,EAArE,SACE,cAAC,IAAD,CAAWC,MAAO,CAAEnB,MAAO,kB,SChCtBoB,EAAa7B,aAAW,SAAAC,GAAK,MAAK,CAC7CC,KAAM,CACJ4B,QAAS,OACTC,UAAW,QACXC,UAAW,QACXC,gBAAiBhC,EAAMiC,QAAQ7B,WAAW8B,aAIjCC,EAAgBpC,YAAW,CACtCqC,QAAS,CACP,4BAA6B,CAC3BC,cAAe,eAGnBC,MAAO,CACLT,QAAS,OACTU,cAAe,MACfrC,WAAY,WACZC,eAAgB,gBAChBqC,MAAO,OACP,oBAAqB,CAAEC,IAAK,QAE9BC,YAAa,CACXb,QAAS,OACTU,cAAe,MACfrC,WAAY,SACZyC,IAAK,QAEPC,WAAY,CAAEC,SAAU,qBAGbC,EAAa/C,aAAW,SAAAC,GAAK,MAAK,CAC7CC,KAAM,CACJ4B,QAAS,OACTW,MAAO,OACPjB,OAAQvB,EAAMY,QAAQ,GACtBD,YAAaX,EAAMY,QAAQ,IAC3BmC,WAAY/C,EAAMY,QAAQ,IAC1BoC,OAAQ,GAEVC,eAAgB,CACdT,MAAO,MACPX,QAAS,OACT3B,WAAY,SACZC,eAAgB,SAChB,4CAA6C,CAAE+C,aAAclD,EAAMY,QAAQ,IAC3E,iBAAkB,CAChB4B,MAAO,MACPW,UAAW,aACXtB,QAAS,OACTU,cAAe,UAEjB,QAAS,CACPC,MAAO,OACPU,aAAclD,EAAMY,QAAQ,KAGhCwC,iBAAkB,CAChBZ,MAAO,MACPa,YAAa,sBACbC,SAAU,WACVC,SAAU,SACVnD,WAAY,gEAEdoD,OAAQ,CACNF,SAAU,WACVd,MAAO,OACPiB,OAAQ,OACR,UAAW,CACTjB,MAAO,OACPiB,OAAQ,SAGZC,MAAO,CACLV,OAAQ,IACRR,MAAO,OACPmB,UAAW,SACXL,SAAU,WACVM,OAAQ,EACRC,WAAY,iBACZzD,WAAY,gFAEd0D,KAAM,CAAEpD,SAAU,SAGPqD,EAAehE,aAAW,SAAAC,GAAK,MAAK,CAC/CC,KAAM,CACJsB,OAAQvB,EAAMY,QAAQ,GACtB4B,MAAO,IACPX,QAAS,OACTU,cAAe,UAEjBuB,KAAM,CACJX,UAAW,aACXX,MAAO,IACPiB,OAAQ,GACRnD,QAASN,EAAMY,QAAQ,GACvBoD,WAAY,EACZzC,OAAQ,UAEV0C,SAAU,CAAEC,KAAM,GAClBC,cAAe,CACbhE,eAAgB,wBAChB,iBAAkB,CAChBqC,MAAO,GACPiB,OAAQ,GACR9C,YAAaX,EAAMY,QAAQ,IAE7B,QAAS,CACP4B,MAAO,OACPiB,OAAQ,QAEV,6BAA8B,CAAEpB,cAAe,cAC/C,uBAAwB,CAAEsB,UAAW,SAEvCS,KAAM,CACJrC,UAAW,qBACXsC,UAAW,kBACXC,eAAgB,OAChBC,eAAgB,kBAChB,2BAA4B,CAC1BvC,gBAAwC,UAAvBhC,EAAMiC,QAAQ1E,KAAmB,UAAY,OAC9D,mBAAoB,CAClBoD,YAAaX,EAAMY,QAAQ,MAIjC4D,SAAU,CAAEjD,OAAQvB,EAAMY,QAAQ,QAKvB6D,EAAsB1E,aAAY,SAAAC,GAAK,MAAK,CACvDC,KAAM,CACJ4B,QAAS,OACT1B,eAAgB,aAChBmE,eAAgB,OAChBC,eAAgB,kBAChBvB,OAAQ,EACRzC,SAAU,QAEZmE,eAAgB,CACd7C,QAAS,OACTU,cAAe,SAEfoC,UAAW,OACXzE,WAAY,UAEd0E,aAAc,CACZ/C,QAAS,OACTU,cAAe,OAEjBsC,aAAc,CACZrC,MAAO,mBACP7B,YAAaX,EAAMY,QAAQ,GAC3B,oBAAqB,CAAEoD,WAAY,GAAIc,cAAe,KAExDC,UAAW,CACTtB,OAAQ,GACRjB,MAAO,mBACPjB,OAAO,kBAETiC,OAAQ,CACNhB,MAAO,MACPX,QAAS,OACTU,cAAe,SACfpC,eAAgB,gBAChB,UAAW,CACTmD,SAAU,WACVb,KAAM,GACNuC,MAAO,KAGXC,cAAe,CACbzC,MAAO,MACPU,aAAclD,EAAMY,QAAQ,GAC5B,UAAW,CAAE4B,MAAO,mBAAoBjB,OAAQvB,EAAMY,QAAQ,SAIrDsE,EAAgBnF,aAAW,SAAAC,GAAK,MAAK,CAChDC,KAAM,CACJsB,OAAQvB,EAAMY,QAAQ,GACtBmC,WAAY,EACZmB,KAAM,EACNrC,QAAS,OACTU,cAAe,UAEjB4C,OAAQ,CACNC,aAAa,aAAD,OAAepF,EAAMiC,QAAQoD,SACzCC,UAAW,+BACXtC,OAAQ,IACR1C,QAAS,sBACT,6BAA8B,CAAE+B,cAAe,cAC/C,0BAA2B,CAAEsC,UAAW,GACxC,yBAA0B,CAAEY,SAAU,SAI7BC,EAA0BzF,aAAW,SAAAC,GAAK,MAAK,CAC1DC,KAAM,CACJiE,KAAM,EACNZ,SAAU,YAEZmC,aAAc,CACZnC,SAAU,sBACVM,OAAQ,EACR8B,MAAO,GACPlD,MAAO,GACPiB,OAAQ,GACRnD,QAAS,EACTD,aAAc,MACdwC,SAAU,EACVG,OAAQ,EACRhB,gBAAgB,GAAD,OAAKhC,EAAMiC,QAAQ0D,QAAQC,KAA3B,eACfpF,MAAO,kBACP8E,UAAWtF,EAAM6F,QAAQ,GACzB,UAAW,CACT7D,gBAAgB,GAAD,OAAKhC,EAAMiC,QAAQ0D,QAAQG,KAA3B,iBAGnBC,OAAQ,CACNzC,SAAU,WACVN,OAAQ,GACRgC,KAAM,mBACNvC,IAAK,wBAIIuD,GAAcjG,aAAW,SAAAC,GAAK,MAAK,CAC9CC,KAAM,CACJqD,SAAU,WACVhD,QAASN,EAAMY,QAAQ,GACvB,aAAc,CACZ0D,eAAgB,OAChBC,eAAgB,oBAGpB0B,eAAgB,CACd3C,SAAU,YAEZ4C,UAAW,CACTvF,YAAY,GAAD,OAAKX,EAAMY,QAAQ,GAAnB,iBACX,uBAAwB,CAAEuF,aAAc,KAE1CC,WAAY,CACV9C,SAAU,sBACVoC,MAAO,GACP9B,OAAQyC,OAAOC,OAAS,GAAK,GAC7BtE,gBAAiB,0BAEnBuE,eAAgB,CACdjD,SAAU,sBACVvB,UAAW,IACXS,MAAO,IACPwC,KAAM,GACNwB,oBAAqBxG,EAAMyG,MAAMpG,aACjCqG,qBAAsB1G,EAAMyG,MAAMpG,aAClCsG,OAAQ,gCACRvB,aAAc,OACdf,UAAW,OACXuC,UAAW,SACXtG,QAAS,EACT0B,gBAAiBhC,EAAMiC,QAAQ7B,WAAW8B,QAC1CoC,eAAgB,OAChBC,eAAgB,kBAChBsC,UAAU,8BAAD,OAAgCR,OAAOC,OAAS,OAAS,OAAzD,iBACT,iCAAkC,CAAEjE,cAAe,eAErDyE,eAAgB,CACdvB,SAAU,kBACVH,aAAa,aAAD,OAAepF,EAAMiC,QAAQoD,SACzCrD,gBAAiBhC,EAAMiC,QAAQ7B,WAAW8B,QAC1C,UAAW,CACTX,OAAQ,EACRjB,QAAS,IAGbyG,QAAS,CACPpC,UAAW3E,EAAMY,QAAQ,GACzB,8BAA+B,CAAEmC,WAAY/C,EAAMY,QAAQ,IAC3D,uBAAwB,CAAEyB,cAAe,eAE3C2E,MAAO,CACL7D,UAAW,aACX5B,OAAQvB,EAAMY,QAAQ,GACtB+D,UAAW,EACXrE,QAASN,EAAMY,QAAQ,GACvBmC,WAAY/C,EAAMY,QAAQ,GAC1B0C,SAAU,WACVjD,aAAcL,EAAMyG,MAAMpG,aAC1B2B,gBAAiBhC,EAAMiC,QAAQ7B,WAAW8B,QAC1C,YAAa,CACX+E,QAAS,KACT3D,SAAU,WACVtB,gBAAiB,UACjBQ,MAAO,EACPiB,OAAQ,OACRpD,aAAcL,EAAMyG,MAAMpG,aAC1B2E,MAAO,GACPvC,IAAK,GAEP,QAAS,CACPZ,QAAS,cACT0B,SAAU,SACVI,UAAW,QACX,qBAAsB,WACtB,qBAAsB,KAExB,eAAgB,CACdtB,cAAe,aACfwB,WAAY,QAEd,WAAY,CACVP,SAAU,WACVoC,MAAO,EACPjD,IAAK,IAGTyE,iBAAkB,CAChB5D,SAAU,WACVM,OAAQ,EACR8B,MAAO,EACPyB,cAAe,OACf,2BAA4B,CAC1BtF,QAAS,QACTW,MAAO,OACPc,SAAU,WACVM,OAAQ,EACRD,UAAW,SACX4B,SAAU,qBAEZ,qCAAsC,CACpC/E,MAAO,2BAKA4G,GAAgBrH,aAAW,SAAAC,GAAK,MAAK,CAChDC,KAAM,CACJoH,YAAarH,EAAMY,QAAQ,GAC3BuF,aAAcnG,EAAMY,QAAQ,GAC5BkE,cAAe9E,EAAMY,QAAQ,GAC7B4B,MAAO,OACP8E,OAAQ,UACR,UAAW,CACTtF,gBAAiBhC,EAAMiC,QAAQ7E,OAAOmK,OAExC,sBAAuB,CACrBhC,SAAU,OACVlD,cAAe,eAGnBmF,KAAM,CACJrH,eAAgB,sBAChB,mDAAoD,CAClDQ,YAAa,eACboC,WAAY/C,EAAMY,QAAQ,GAC1B6G,MAAO,KAGXC,SAAU,CACR1F,gBAAwC,UAAvBhC,EAAMiC,QAAQ1E,KAAmB,UAAY,WAEhEoK,SAAU,CACR3F,gBAAwC,UAAvBhC,EAAMiC,QAAQ1E,KAAmB,UAAY,WAEhEiG,OAAQ,CACNoE,UAAW,aACXpF,MAAO,GACPiB,OAAQ,GACR9C,YAAaX,EAAMY,QAAQ,GAC3B,QAAS,CACP4B,MAAO,OACPiB,OAAQ,SAGZuD,MAAO,CACL1D,SAAU,WACVP,WAAY/C,EAAMY,QAAQ,GAC1BoB,gBAAwC,UAAvBhC,EAAMiC,QAAQ1E,KAAmB,OAASyC,EAAMiC,QAAQ7B,WAAW8B,QACpF5B,QAASN,EAAMY,QAAQ,GACvBP,aAAcL,EAAMyG,MAAMpG,aAC1B,YAAa,CACX4G,QAAS,KACT3D,SAAU,WACV0B,KAA0B,KAAnBhF,EAAMY,QAAQ,GACrB6B,IAAK,EACLgB,OAAQ,QACRjB,MAAO,EACPnC,aAAc,GACd2B,gBAAiBhC,EAAMiC,QAAQ0D,QAAQC,MAEzC,kCAAmC,CACjCvD,cAAe,aACfwB,WAAY,SAGhBgE,eAAgB,CACdlD,UAAW3E,EAAMY,QAAQ,GACzB,wCAAyC,CACvCmC,WAAY/C,EAAMY,QAAQ,KAG9BkH,KAAM,CACJvG,OAAQ,eAGR,gCAAiC,CAC/Bf,MAA8B,UAAvBR,EAAMiC,QAAQ1E,KAAmB,OAAS,aAK1CwK,GAAkBhI,aAAW,SAAAC,GAAK,MAAK,CAClDC,KAAM,CACJuC,MAAO,IACPjB,OAAQvB,EAAMY,QAAQ,GACtBmC,WAAY,EACZ,yBAA0B,CAAEzC,QAAS,IAEvC6E,OAAQ,CACNhC,UAAW,aACXiC,aAAa,aAAD,OAAepF,EAAMiC,QAAQoD,SACzCC,UAAW,+BACXtC,OAAQ,IACR,6BAA8B,CAAEX,cAAe,eAEjD4E,QAAS,CAAExD,OAAQ,qBACnBW,KAAM,CACJX,OAAQ,oBACRF,SAAU,OACVe,eAAgB,OAChBC,eAAgB,kBAChB,2BAA4B,CAC1BvC,gBAAwC,UAAvBhC,EAAMiC,QAAQ1E,KAAmB,UAAY,SAGlEyK,KAAM,CACJ,4BAA6B,CAC3B3F,cAAe,eAGnB4F,UAAW,CACT1G,OAAQvB,EAAMY,QAAQ,GACtB4B,MAAM,eAAD,OAAiBxC,EAAMY,QAAQ,GAA/B,YAiBIsH,IAbsBnI,aAAW,SAAAC,GAAK,MAAK,CACtDC,KAAM,CACJkI,SAAU,UACVtF,SAAU,IAEVzC,WAAY,YACZC,aAAc,EACdC,QAAS,WACTuB,QAAS,OACTU,cAAe,cAIiBxC,aAAW,SAAAC,GAAK,MAAK,CACvDC,KAAM,CACJ4B,QAAS,OACTU,cAAe,SACf,2BAA4B,CAC1BW,aAAclD,EAAMY,QAAQ,UA+CrBwH,IA1CerI,aAAW,SAAAC,GAAK,MAAK,CAC/CC,KAAM,CAAE4B,QAAS,QACjBwG,SAAU,CAAE9G,OAAQ,cAGUxB,aAAW,SAAAC,GAAK,MAAK,CACnDoE,KAAM,CACJrC,UAAW,IACXS,MAAO,OACP6B,UAAW,OACXC,eAAgB,OAChBC,eAAgB,mBAElB+D,UAAW,CACTtG,gBAAwC,UAAvBhC,EAAMiC,QAAQ1E,KAAmB,qBAAuB,kBACzEsE,QAAS,OACT3B,WAAY,SACZ8D,WAAY,EACZc,cAAe,EACf,0BAA2B,CACzBjD,QAAS,oBAKe9B,aAAW,SAAAC,GAAK,MAAK,CACjDoE,KAAM,CACJrC,UAAW,SACXsC,UAAW,OACXC,eAAgB,OAChBC,eAAgB,mBAElBgE,YAAa,CACX1G,QAAS,OACT3B,WAAY,SACZC,eAAgB,gBAChBgG,aAAc,GAEhBqC,SAAU,CAAEjI,SAAU,QACtBkI,YAAa,CAAEjG,MAAO,YAGQzC,aAAW,SAAAC,GAAK,MAAK,CACnD0I,SAAU,CACR7G,QAAS,OACTU,cAAe,MACfe,SAAU,QACVd,MAAO,IACPC,IAAK,OACLiD,MAAO,OACPiB,OAAQ,oBACRtG,aAAc,EACdC,QAASN,EAAMY,QAAQ,GACvBoB,gBAAiBhC,EAAMiC,QAAQ7B,WAAWuI,MAC1CnI,MAAO,gB,qBCzgBLV,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,WAAY,SACZC,eAAgB,SAChBC,WAAY,UACZC,aAAc,EACdC,QAAS,YACTC,SAAU,OACVC,MAAO,QAEToI,KAAM,CACJjI,YAAaX,EAAMY,QAAQ,QAwBhBiI,GApBO/H,sBAAW,SAACgI,EAAO/H,GAAS,IAAD,EACxBjB,KAAfG,EADuC,EACvCA,KAAM2I,EADiC,EACjCA,KACN3H,EAAkBC,cAAlBD,cACF8H,EAAeC,aAAY,SAAA7L,GAAK,OAAIA,EAAM8L,KAAKC,UAMrD,OAJAC,qBAAU,WACa,gBAAjBJ,GAAgC9H,EAAc6H,EAAM9H,MACvD,CAAC+H,EAAc9H,EAAe6H,EAAM9H,KAGrC,eAAC,IAAD,CAAiBD,IAAKA,EAAKI,UAAWlB,EAAtC,UACE,cAAC,KAAD,CAAakB,UAAWyH,EAAMrD,SAAS,UACvC,eAAC6D,EAAA,EAAD,WACE,cAAChI,EAAA,EAAD,CAAYC,QAAQ,KAApB,SAAyB,iCACzB,cAACD,EAAA,EAAD,CAAYC,QAAQ,QAApB,SAA4B,sD,qBC3B9BvB,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,WAAY,SACZC,eAAgB,SAChBC,WAAY,UACZC,aAAc,EACdC,QAAS,YACTC,SAAU,OACVC,MAAO,OACPgC,MAAO,QAET7B,YAAa,CACXA,YAAaX,EAAMY,QAAQ,IAE7ByI,OAAQ,CACN7I,MAAO,OACP8I,YAAa,YAgCFC,GA5BMzI,sBAAW,SAACgI,EAAO/H,GAAS,IAAD,EACRjB,KAA9BG,EADsC,EACtCA,KAAMU,EADgC,EAChCA,YAAa0I,EADmB,EACnBA,OACnBpI,EAAkBC,cAAlBD,cACFuI,EAAWC,cAMjB,OACE,eAAC,IAAD,CAAiB1I,IAAKA,EAAKI,UAAWlB,EAAtC,UACE,cAAC,KAAD,CAAakB,UAAWR,EAAa4E,SAAS,UAC9C,cAACnE,EAAA,EAAD,CAAYC,QAAQ,KAAKF,UAAWR,EAApC,SAAiD,6BAGjD,cAACW,EAAA,EAAD,CACEoI,kBAAgB,EAChBvI,UAAWkI,EACXhI,QAAQ,WACRsI,QAAS,cAAC,KAAD,IACTnI,QAhBS,WACbgI,EAASI,MACT3I,EAAc6H,EAAM9H,KASlB,SAMC,gBCnDQ,OAA0B,sCCQnC6I,GAAO,I,OAAIC,MAAK,CAAEC,IAAKC,KACtB,SAASC,KAEdJ,GAAKK,OAGA,IAAMC,GAAsB,CACjC/L,QAAS,+BACTD,QAAS,CAAEkD,QAAS,UAGT+I,GAAqB,CAChChM,QAAS,qBACTD,QAAS,CAAEkD,QAAS,YAGTgJ,GAAqB,CAChCjM,QAAS,4BACTD,QAAS,CAAEkD,QAAS,UA0BTiJ,GAAgB,CAC3BnM,QAAS,CACPoM,SAAS,EACTtD,QAAS,SAAAlJ,GAAG,OAAI,cAAC,GAAD,CAAyBiD,GAAIjD,GAATA,IACpCyM,aAAc,CAAEC,WAAY,SAAUC,SAAU,OAChDrJ,QAAS,YAIAsJ,GAAe,CAC1BvM,QAAS,wBACTD,QAAS,CACPD,kBAAkB,EAClBqM,SAAS,EACTtD,QAAS,SAAAlJ,GAAG,OAAI,cAAC,GAAD,CAAwBiD,GAAIjD,GAATA,IACnCyM,aAAc,CAAEC,WAAY,SAAUC,SAAU,SAIvCE,GAAiB,CAC5BxM,QAAS,qCACTD,QAAS,CACPkD,QAAS,YAIAwJ,GAAkB,CAAEzM,QAAS,uBAAqBD,QAAS,CAAEkD,QAAS,UAEtEyJ,GAAa,SAAA1M,GAAO,MAAK,CAAEA,UAASD,QAAS,CAAEkD,QAAS,WACxD0J,GAAY,SAAA3M,GAAO,MAAK,CAAEA,UAASD,QAAS,CAAEkD,QAAS,UAGvD2J,GAAa,SAAA5M,GAAO,MAAK,CACpCA,UACAD,QAAS,CACPoM,SAAS,EACTlJ,QAAS,UACT4F,QAAS,SAAAlJ,GAAG,OAAI,cAACkN,EAAD,CAAsBjK,GAAIjD,EAAKK,QAASA,GAAvBL,OCrEtBmN,I,MAAAA,GAdf,SAAoBrL,EAAK2J,GAAW,IAAD,EAC3B2B,EAAa,OAAGtL,QAAH,IAAGA,GAAH,UAAGA,EAAKuL,eAAR,aAAG,EAAcC,SACpC,GAAIF,EAAe,CACjB,IAAMG,EAAQ9L,EAAU2L,EAAe,CAAEG,MAAO,uBAMhD,KAXkB,0BAMdA,EAAMA,MACR9B,EAAS5L,EAAW+M,KAEpBnB,EAAS5L,EAAWkN,GAAWQ,EAAMA,SAEjC,IAAIC,MAAMD,EAAMA,OAExB,MAAM,IAAIC,MAAM1L,IChBZ2L,GAAY,wDAELC,GAAiB,SAAAC,GAI5B,IAHA,IACEC,EADEC,EAAY,EAEVC,EAAe,GACoB,QAAjCF,EAAQH,GAAUM,KAAKJ,KAC7BG,EAAatN,KAAK,CAAEhB,KAAM,OAAQwO,MAAOL,EAAIM,MAAMJ,EAAWD,EAAMM,SACpEJ,EAAatN,KAAK,CAAEhB,KAAM,OAAQwO,MAAOJ,EAAM,KAC/CC,EAAYD,EAAMM,MAAQN,EAAM,GAAGO,OAKrC,YAHcC,IAAVR,EAAqBE,EAAatN,KAAK,CAAEhB,KAAM,OAAQwO,MAAOL,IACzDE,IAAcF,EAAIQ,QACzBL,EAAatN,KAAK,CAAEhB,KAAM,OAAQwO,MAAOL,EAAIM,MAAMJ,KAC9CC,GCLHO,GAAkBC,YAAoB,CAC1CC,SAAU,SAAAlO,GAAO,OAAIA,EAAQmO,WAC7BC,aAAc,SAACC,EAAGC,GAAJ,OAAUD,EAAEF,UAAYG,EAAEH,aAGpC3P,GAAY,2BACbwP,GAAgBO,mBADH,IAEhBC,kBAAmB,EACnBC,OAAQ,GACR3D,OAAQ,OACRoC,MAAO,OAGIwB,GAAwBC,YACnC,iCADmD,uCAEnD,WAAO3N,EAAP,sCAAAqN,EAAA,yDAAYjD,EAAZ,EAAYA,SAAUwD,EAAtB,EAAsBA,SAAtB,UAGoB,KADAvP,EAAWuP,IAAWC,MAA9BC,QAFZ,sBAG6B,IAAI3B,MAAM,8BAHvC,gBAIyCyB,IAAW/D,KAAxCkE,EAJZ,EAIYA,MAAOC,EAJnB,EAImBA,MAAOC,EAJ1B,EAI0BA,WACdR,EAAWG,IAAWM,iBAAtBT,OACFzB,EAAU,CAAE+B,QAAOC,QAAOC,aAAY5P,SAAQoP,UAC9CU,EAPV,UAOmBC,6BAPnB,kCAQ2BC,IAAMC,KAAKH,EAAKnC,GAR3C,WAQUC,EARV,QASQsC,MAAMC,QAAQvC,EAASwC,MAT/B,0CAUaxC,EAASwC,KAAKC,KAAI,SAAA1P,GAAO,kCAC3BA,GAD2B,IAE9ByN,aAAcJ,GAAerN,EAAQA,eAZ7C,iCAeWiN,EAASwC,MAfpB,kCAiBI3C,GAAW,EAAD,GAAM1B,GAjBpB,0DAFmD,yDAwB/CuE,GAAgBrR,YAAY,CAChCC,KAAM,mBACNC,gBACAK,SAAU,CACR+Q,aAAc5B,GAAgB6B,OAC9BC,cAAe,SAAC/Q,EAAOC,GACE,MAAnBA,EAAOE,UAAiBH,EAAM0P,OAASzP,EAAOE,WAGtD6Q,eAAa,qBACVrB,GAAsBsB,SAAU,SAAAjR,GAC/BiP,GAAgBiC,UAAUlR,GAC1BA,EAAM+L,OAAS,UACf/L,EAAMmO,MAAQ,QAJL,eAMVwB,GAAsBwB,WAAY,SAACnR,EAAOC,GACzCgP,GAAgBmC,OAAOpR,EAAOC,GAC9BD,EAAMyP,kBAAoB,EAC1BzP,EAAM+L,OAAS,OACf/L,EAAMmO,MAAQ,QAVL,eAYVwB,GAAsB0B,UAAW,SAACrR,EAAOC,GACxCD,EAAM+L,OAAS,QACf/L,EAAMmO,MAAQlO,EAAOkO,MAAMlN,WAdlB,MAmBA2P,MAAf,Q,GAE+CA,GAAcrP,QAAhCwP,I,GAAdF,a,GAAcE,e,GAKzB9B,GAAgBqC,cAAa,SAAAtR,GAAK,OAAIA,EAAMmQ,oBAFlCoB,G,GAAZC,WACWC,G,GAAXC,U,IAG4BjQ,aAC5B,SAAAzB,GAAK,OAAIA,EAAMmQ,iBAAiBwB,WAChC,SAAA3R,GAAK,OAAIA,EAAMmQ,iBAAiByB,WAChC,SAAA5R,GAAK,OAAIA,EAAMmQ,iBAAiB0B,UAChC,SAACF,EAASC,EAASC,GAAnB,MAA8B,CAACF,EAASC,EAASC,MAGC5C,GAAgBqC,cAClE,SAAAtR,GAAK,OAAIA,EAAMmQ,oBADF2B,U,MC3FFC,GAAwB,CACnCC,QAAS,CACP,SACA,WACA,MACA,QACA,SACA,aACA,aACA,aACA,aACA,kBACA,cACA,cACA,gBACA,gBACA,iBACA,gBACA,cACA,kBACA,qBACA,sBACA,qBACA,mBACA,oBACA,yBACA,oBACA,oBACA,mBACA,wBACA,sBACA,qBACA,sBACA,sBACA,iBACA,qBACA,8BAEFC,gBAAiB,CACf,QACA,OACA,iBACA,iBACA,QACA,aACA,aAEFC,SAAU,CACR,QACA,SACA,SACA,SACA,SACA,SACA,UACA,aACA,cACA,eACA,YACA,eACA,OACA,MACA,SAEFC,UAAW,CACT,QACA,SACA,eACA,QACA,SACA,YACA,aACA,WACA,MACA,cAEFC,eAAgB,CAAC,QAAS,cAAe,aAAc,iBAAkB,mBACzEC,gBAAiB,CACf,QACA,SACA,eACA,QACA,SACA,YACA,WACA,OAEFC,WAAY,CACV,cACA,gBACA,gBACA,eACA,SACA,UACA,gBACA,iBACA,cAEFC,YAAa,CACX,QACA,SACA,SACA,SACA,SACA,SACA,UACA,aACA,cACA,eACA,YACA,eACA,OACA,MACA,SAEFC,YAAa,CACX,MACA,SACA,OACA,UACA,OACA,QACA,SACA,SACA,OACA,eACA,SAEFC,QAAS,CACP,QACA,MACA,UACA,QACA,UACA,QACA,SACA,OACA,SACA,YACA,OACA,aAEFC,YAAa,CACX,QACA,eACA,UACA,iBACA,cACA,gBACA,uBACA,eACA,sBACA,iBACA,SACA,iBAEFC,UAAW,CACT,YACA,UACA,YACA,SACA,UACA,MACA,aACA,UACA,QACA,SACA,UACA,SAEFC,UAAW,CAAC,SAAU,SAAU,OAAQ,QAAS,QAAS,YAAa,UAE5DC,GAAwB,CACnCb,QAAS,CACP,WACA,SACA,WACA,QACA,WACA,sBACA,sBACA,sBACA,sBACA,iBACA,YACA,gBACA,eACA,iBACA,cACA,eACA,aACA,qBACA,YACA,iBACA,mBACA,eACA,eACA,qBACA,qBACA,qBACA,gBACA,sBACA,eACA,4BACA,kBACA,aACA,YACA,QACA,kBAEFC,gBAAiB,CACf,OACA,OACA,oBACA,oBACA,WACA,iBACA,kBAEFC,SAAU,CACR,QACA,SACA,SACA,SACA,SACA,SACA,gBACA,cACA,eACA,iBACA,cACA,kBACA,OACA,OACA,UAEFC,UAAW,CACT,SACA,QACA,eACA,aACA,mBACA,oBACA,cACA,UACA,OACA,YAEFC,eAAgB,CAAC,OAAQ,gBAAiB,mBAAiB,SAAU,YACrEC,gBAAiB,CACf,SACA,QACA,eACA,aACA,mBACA,oBACA,UACA,QAEFC,WAAY,CACV,yBACA,0BACA,YACA,sBACA,WACA,OACA,0BACA,0BACA,wBAEFC,YAAa,CACX,QACA,SACA,SACA,SACA,SACA,SACA,mBACA,cACA,eACA,iBACA,cACA,kBACA,OACA,OACA,UAEFC,YAAa,CACX,aACA,SACA,SACA,WACA,OACA,QACA,UACA,SACA,MACA,uBACA,wBAEFC,QAAS,CACP,WACA,WACA,SACA,UACA,YACA,QACA,YACA,eACA,OACA,cACA,mBACA,oBAEFC,YAAa,CACX,WACA,mBACA,SACA,iBACA,QACA,aACA,qBACA,SACA,iBACA,UACA,eACA,wBAEFC,UAAW,CACT,eACA,SACA,OACA,WACA,eACA,SACA,oBACA,QACA,YACA,iBACA,WACA,aAEFC,UAAW,CAAC,YAAa,WAAY,SAAU,UAAW,aAAW,oBAAkB,WAE5EE,GAAmB,CAC9B,iBACA,QACA,cACA,aACA,QACA,cACA,OACA,aACA,aACA,OACA,QACA,OACA,QAEWC,GAAmB,CAC9B,UACA,kBACA,WACA,YACA,iBACA,kBACA,aACA,cACA,cACA,UACA,cACA,YACA,aAYWC,GAAgB,CAC3BC,YAAa,SACbjB,QAAS,GACTC,gBAAiB,GACjBC,SAAU,GACVC,UAAW,GACXC,eAAgB,GAChBC,gBAAiB,GACjBC,WAAY,GACZC,YAAa,GACbC,YAAa,GACbC,QAAS,GACTC,YAAa,GACbC,UAAW,GACXC,UAAW,ICrYA5C,GAAQJ,YAAiB,aAAD,uCAAe,WAAOsD,EAAP,4BAAA5D,EAAA,6DAAsBjD,EAAtB,EAAsBA,SAElE+D,EAF4C,UAEnCC,6BAFmC,gCAI/BC,IAAMC,KAAKH,EAAK8C,GAJe,cAIhDhF,EAJgD,OAKhDiF,QAAQC,IAAI,aAAclF,GACpB7H,EAAShE,EAAU6L,EAASwC,KAAK2C,QAAQhN,OAAQ2M,IACvD9E,EAASwC,KAAK2C,QAAQhN,OAAoB,YAAXA,EAAuB2M,GAAgB3M,EAPtB,6CA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","file":"static/js/main.a45400ff.chunk.js","sourcesContent":["import { createSlice, createSelector, nanoid } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n  services: {},\r\n  privates: {},\r\n  commons: {},\r\n  popups: [],\r\n};\r\n\r\nconst NOTIF_TYPE_MAP = {\r\n  PRIVADA: 'privates',\r\n  DEPARTAMENTO: 'services',\r\n  COMUN: 'commons',\r\n};\r\n\r\nconst NOTIF_LABEL_MAP = {\r\n  CONVERSACIONES: 'privates',\r\n  SERVICIOS: 'services',\r\n  GENERAL: 'commons',\r\n};\r\n\r\nconst notifSlice = createSlice({\r\n  name: 'notifications',\r\n  initialState,\r\n  reducers: {\r\n    addedMessageNotif: (state, action) => {\r\n      const stateProp = NOTIF_TYPE_MAP[action.payload.type];\r\n      const roomNotif = state[stateProp][action.payload.roomId];\r\n      if (!roomNotif) {\r\n        state[stateProp][action.payload.roomId] = 1;\r\n      } else if (typeof roomNotif === 'number') {\r\n        state[stateProp][action.payload.roomId] += 1;\r\n      }\r\n    },\r\n    removedMessageNotif: (state, action) => {\r\n      const stateProp = NOTIF_TYPE_MAP[action.payload.type];\r\n      state[stateProp][action.payload.roomId] = 0;\r\n    },\r\n    clearedNotifications: state => {\r\n      state.services = {};\r\n      state.privates = {};\r\n      state.commons = {};\r\n    },\r\n    addedPopup: {\r\n      prepare: popup => ({ payload: { ...popup, key: nanoid(10) } }),\r\n      reducer: (state, action) => {\r\n        const { preventDuplicate } = action.payload.options;\r\n        const { message } = action.payload;\r\n        const existsPopup = state.popups.findIndex(popup => popup.message === message) >= 0;\r\n        if (!preventDuplicate || (preventDuplicate && !existsPopup)) {\r\n          state.popups.push(action.payload);\r\n        }\r\n      },\r\n    },\r\n    removedPopup: (state, action) => {\r\n      state.popups.splice(action.payload, 1);\r\n      if (!action.payload) state.popups.splice(-1, 1);\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  clearedNotifications,\r\n  addedMessageNotif,\r\n  removedMessageNotif,\r\n  addedPopup,\r\n  removedPopup,\r\n} = notifSlice.actions;\r\n\r\nexport default notifSlice.reducer;\r\n\r\nexport const getNotifications = createSelector(\r\n  state => {\r\n    const { privates, commons, services } = state.notifications;\r\n    return { ...privates, ...commons, ...services };\r\n  },\r\n  notifications => Object.values(notifications).reduce((total, notif) => total + notif, 0)\r\n);\r\n\r\nexport const getNotificationsByType = createSelector(\r\n  state => state.notifications,\r\n  (_, { roomType, roomId }) => ({\r\n    roomType,\r\n    roomId,\r\n  }),\r\n  (notifications, { roomType, roomId }) => {\r\n    const stateProp = NOTIF_TYPE_MAP[roomType];\r\n    return notifications[stateProp][roomId];\r\n  }\r\n);\r\nexport const hasRoomGroupNotifications = createSelector(\r\n  state => state.notifications,\r\n  (_, roomType) => roomType,\r\n  (notifications, roomType) => {\r\n    const stateProp = NOTIF_LABEL_MAP[roomType];\r\n    if (!stateProp) return false;\r\n    return Object.values(notifications[stateProp]).some(notif => notif > 0);\r\n  }\r\n);\r\n","function safeParse(stringToParse, defaultValue) {\r\n  try {\r\n    return stringToParse === null ? defaultValue : JSON.parse(stringToParse);\r\n  } catch (err) {\r\n    return defaultValue;\r\n  }\r\n}\r\n\r\nexport default safeParse;\r\n","import { forwardRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SnackbarContent, useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    background: '#b50d0d !important',\r\n    borderRadius: 4,\r\n    padding: '12px 24px',\r\n    flexWrap: 'wrap',\r\n    color: '#fff',\r\n    float: 'right',\r\n    maxWidth: '90vw',\r\n  },\r\n  marginRight: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst MentionAnswer = forwardRef(({ message, id }, ref) => {\r\n  const { root, marginRight } = useStyles();\r\n  const { closeSnackbar } = useSnackbar();\r\n\r\n  return (\r\n    <SnackbarContent ref={ref} className={root}>\r\n      <Typography variant=\"body1\" className={marginRight}>\r\n        {message}\r\n      </Typography>\r\n      <Button margin=\"dense\" onClick={() => closeSnackbar(id)}>\r\n        <CloseIcon />\r\n      </Button>\r\n    </SnackbarContent>\r\n  );\r\n});\r\n\r\nexport default MentionAnswer;\r\n","import { forwardRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SnackbarContent, useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    background: '#a885D8 !important',\r\n    borderRadius: 4,\r\n    padding: '12px 24px',\r\n    flexWrap: 'wrap',\r\n    color: '#fff',\r\n    float: 'right',\r\n    maxWidth: '90vw',\r\n  },\r\n  marginRight: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst NotifyPopup = forwardRef(({ message, id }, ref) => {\r\n  const { root, marginRight } = useStyles();\r\n  const { closeSnackbar } = useSnackbar();\r\n\r\n  return (\r\n    <SnackbarContent ref={ref} className={root}>\r\n      <Typography variant=\"body1\" className={marginRight}>\r\n        {message}\r\n      </Typography>\r\n      <Button margin=\"dense\" onClick={() => closeSnackbar(id)} colorPrimary>\r\n        <CloseIcon style={{ color: '#fff' }} />\r\n      </Button>\r\n    </SnackbarContent>\r\n  );\r\n});\r\n\r\nexport default NotifyPopup;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport const rootStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    minHeight: '100vh',\r\n    maxHeight: '100vh',\r\n    backgroundColor: theme.palette.background.default,\r\n  },\r\n}));\r\n\r\nexport const navItemStyles = makeStyles({\r\n  navItem: {\r\n    '& span.MuiTypography-root': {\r\n      textTransform: 'capitalize',\r\n    },\r\n  },\r\n  badge: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'baseline',\r\n    justifyContent: 'space-between',\r\n    width: '100%',\r\n    '& .MuiBadge-badge': { top: '50%' },\r\n  },\r\n  roomListDiv: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: '10px',\r\n  },\r\n  exitButton: { minWidth: '40px !important' },\r\n});\r\n\r\nexport const homeStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    margin: theme.spacing(6),\r\n    marginRight: theme.spacing(10),\r\n    marginLeft: theme.spacing(10),\r\n    zIndex: 1,\r\n  },\r\n  loginContainer: {\r\n    width: '50%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    '& .MuiBox-root > div, & .MuiBox-root > h2': { marginBottom: theme.spacing(3) },\r\n    '& .MuiBox-root': {\r\n      width: '60%',\r\n      boxSizing: 'border-box',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n    },\r\n    '& img': {\r\n      width: '100%',\r\n      marginBottom: theme.spacing(6),\r\n    },\r\n  },\r\n  homeBoxContainer: {\r\n    width: '50%',\r\n    borderRight: '1px solid #33333342',\r\n    position: 'relative',\r\n    overflow: 'hidden',\r\n    background: 'radial-gradient(circle, #d99962 50%, rgba(255,121,0,1) 100%)',\r\n  },\r\n  avatar: {\r\n    position: 'absolute',\r\n    width: '100%',\r\n    height: '100%',\r\n    '& > svg': {\r\n      width: '100%',\r\n      height: '100%',\r\n    },\r\n  },\r\n  title: {\r\n    zIndex: 10000,\r\n    width: '100%',\r\n    textAlign: 'center',\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    fontWeight: '700 !important',\r\n    background: 'linear-gradient(0deg, rgba(51, 51, 51, 0.75) 0%, rgba(51, 51, 51, 0.2) 100%)',\r\n  },\r\n  logo: { maxWidth: 500 }\r\n}));\r\n\r\nexport const navbarStyles = makeStyles(theme => ({\r\n  root: {\r\n    margin: theme.spacing(1),\r\n    width: 300,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  logo: {\r\n    boxSizing: 'border-box',\r\n    width: 225,\r\n    height: 65,\r\n    padding: theme.spacing(1),\r\n    paddingTop: 0,\r\n    margin: '0 auto',\r\n  },\r\n  autofill: { flex: 1 },\r\n  profileButton: {\r\n    justifyContent: 'flex-start !important',\r\n    '& .MuiBox-root': {\r\n      width: 60,\r\n      height: 60,\r\n      marginRight: theme.spacing(1),\r\n    },\r\n    '& svg': {\r\n      width: '100%',\r\n      height: '100%',\r\n    },\r\n    '& .MuiTypography-subtitle2': { textTransform: 'capitalize' },\r\n    '& .MuiBox-root + div': { textAlign: 'left' },\r\n  },\r\n  list: {\r\n    maxHeight: 'calc(100% - 178px)',\r\n    overflowY: 'auto !important',\r\n    scrollbarWidth: 'thin',\r\n    scrollbarColor: '#4a4a4a #dbdbdb',\r\n    '& .MuiListSubheader-root': {\r\n      backgroundColor: theme.palette.type === 'light' ? '#cecece' : '#333',\r\n      '& .MuiBadge-root': {\r\n        marginRight: theme.spacing(2),\r\n      },\r\n    },\r\n  },\r\n  searcher: { margin: theme.spacing(1) },\r\n}));\r\n\r\n\r\n\r\nexport const profileDialogStyles = makeStyles( theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start',\r\n    scrollbarWidth: 'thin',\r\n    scrollbarColor: '#4a4a4a #dbdbdb',\r\n    zIndex: 2,\r\n    flexWrap: 'wrap',\r\n  },\r\n  divAvatarColor: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    //justifyContent: 'space-evenly',\r\n    marginTop: '30px',\r\n    alignItems: 'center',\r\n  },\r\n  cuerpoAvatar: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n  },\r\n  selectSonido: {\r\n    width: 'calc(50% - 60px)',\r\n    marginRight: theme.spacing(2),\r\n    '& .MuiSelect-root': { paddingTop: 12, paddingBottom: 12 },\r\n  },\r\n  btnOscuro: {\r\n    height: 56,\r\n    width: 'calc(50% - 16px)',\r\n    margin: `8px !important`,\r\n  },\r\n  avatar: {\r\n    width: '86%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    '& > svg': {\r\n      position: 'relative',\r\n      top: -16,\r\n      left: -24,\r\n    },\r\n  },\r\n  ajustesAvatar: {\r\n    width: '75%',\r\n    marginBottom: theme.spacing(2),\r\n    '& > div': { width: 'calc(50% - 16px)', margin: theme.spacing(1) },\r\n  },\r\n}));\r\n\r\nexport const chatBoxStyles = makeStyles(theme => ({\r\n  root: {\r\n    margin: theme.spacing(1),\r\n    marginLeft: 0,\r\n    flex: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  header: {\r\n    borderBottom: `1px solid ${theme.palette.divider}`,\r\n    boxShadow: '0px 2px 2px rgba(0,0,0,0.25)',\r\n    zIndex: 100,\r\n    padding: '8px 16px !important',\r\n    '& span.MuiCardHeader-title': { textTransform: 'capitalize' },\r\n    '& .MuiCardHeader-action': { marginTop: 0 },\r\n    '& .MuiCardHeader-title': { fontSize: 24 },\r\n  },\r\n}));\r\n\r\nexport const virtuosoContainerStyles = makeStyles(theme => ({\r\n  root: {\r\n    flex: 1,\r\n    position: 'relative',\r\n  },\r\n  scrollButton: {\r\n    position: 'absolute !important',\r\n    bottom: 8,\r\n    right: 16,\r\n    width: 36,\r\n    height: 36,\r\n    padding: 0,\r\n    borderRadius: '50%',\r\n    minWidth: 0,\r\n    zIndex: 1,\r\n    backgroundColor: `${theme.palette.primary.main} !important`,\r\n    color: '#fff !important',\r\n    boxShadow: theme.shadows[5],\r\n    '&:hover': {\r\n      backgroundColor: `${theme.palette.primary.dark} !important`,\r\n    },\r\n  },\r\n  loader: {\r\n    position: 'absolute',\r\n    zIndex: 10,\r\n    left: 'calc(50% - 75px)',\r\n    top: 'calc(50% - 75px)',\r\n  },\r\n}));\r\n\r\nexport const inputStyles = makeStyles(theme => ({\r\n  root: {\r\n    position: 'relative',\r\n    padding: theme.spacing(1),\r\n    '& textarea': {\r\n      scrollbarWidth: 'thin',\r\n      scrollbarColor: '#4a4a4a #dbdbdb',\r\n    },\r\n  },\r\n  innerContainer: {\r\n    position: 'relative',\r\n  },\r\n  inputForm: {\r\n    marginRight: `${theme.spacing(1)}px !important`,\r\n    '& .MuiInputBase-root': { paddingRight: 80 },\r\n  },\r\n  buttonSend: {\r\n    position: 'absolute !important',\r\n    right: 28,\r\n    bottom: window.chrome ? 16 : 21,\r\n    backgroundColor: 'transparent !important',\r\n  },\r\n  extraContainer: {\r\n    position: 'absolute !important',\r\n    maxHeight: 241,\r\n    width: 270,\r\n    left: 16,\r\n    borderTopLeftRadius: theme.shape.borderRadius,\r\n    borderTopRightRadius: theme.shape.borderRadius,\r\n    border: '1px solid rgba(0, 0, 0, 0.23)',\r\n    borderBottom: 'none',\r\n    overflowY: 'auto',\r\n    overflowX: 'hidden',\r\n    padding: 0,\r\n    backgroundColor: theme.palette.background.default,\r\n    scrollbarWidth: 'thin',\r\n    scrollbarColor: '#4a4a4a #dbdbdb',\r\n    transform: `translate(0%, calc(-100% - ${window.chrome ? '75px' : '83px'})) !important`,\r\n    '& span.MuiListItemText-primary': { textTransform: 'capitalize' },\r\n  },\r\n  extraSubheader: {\r\n    fontSize: '20px !important',\r\n    borderBottom: `1px solid ${theme.palette.divider}`,\r\n    backgroundColor: theme.palette.background.default,\r\n    '& > div': {\r\n      margin: 0,\r\n      padding: 4,\r\n    },\r\n  },\r\n  infoBox: {\r\n    marginTop: theme.spacing(1),\r\n    '& > div:not(:first-of-type)': { marginLeft: theme.spacing(2) },\r\n    '& span.MuiChip-label': { textTransform: 'capitalize' },\r\n  },\r\n  quote: {\r\n    boxSizing: 'border-box',\r\n    margin: theme.spacing(1),\r\n    marginTop: 0,\r\n    padding: theme.spacing(1),\r\n    marginLeft: theme.spacing(2),\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: theme.palette.background.default,\r\n    '&::before': {\r\n      content: '\"\"',\r\n      position: 'absolute',\r\n      backgroundColor: '#FF7900',\r\n      width: 5,\r\n      height: '100%',\r\n      borderRadius: theme.shape.borderRadius,\r\n      left: -13,\r\n      top: 0,\r\n    },\r\n    '& > p': {\r\n      display: '-webkit-box',\r\n      overflow: 'hidden',\r\n      textAlign: 'start',\r\n      '-webkit-box-orient': 'vertical',\r\n      '-webkit-line-clamp': '2',\r\n    },\r\n    '& > p > span': {\r\n      textTransform: 'capitalize',\r\n      fontWeight: 'bold',\r\n    },\r\n    '& button': {\r\n      position: 'absolute',\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n  },\r\n  characterCounter: {\r\n    position: 'absolute',\r\n    bottom: 4,\r\n    right: 8,\r\n    pointerEvents: 'none',\r\n    '& .MuiTypography-caption': {\r\n      display: 'block',\r\n      width: '100%',\r\n      position: 'absolute',\r\n      bottom: 5,\r\n      textAlign: 'center',\r\n      fontSize: '0.7rem !important',\r\n    },\r\n    '& .MuiCircularProgress-determinate': {\r\n      color: '#CA4A20 !important',\r\n    },\r\n  },\r\n}));\r\n\r\nexport const messageStyles = makeStyles(theme => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(1),\r\n    paddingRight: theme.spacing(1),\r\n    paddingBottom: theme.spacing(1),\r\n    width: 'auto',\r\n    cursor: 'default',\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.action.hover,\r\n    },\r\n    '& .MuiTypography-h6': {\r\n      fontSize: '1rem',\r\n      textTransform: 'capitalize',\r\n    },\r\n  },\r\n  mine: {\r\n    justifyContent: 'flex-end !important',\r\n    '& .MuiListItemAvatar-root, & .avatar-placeholder': {\r\n      marginRight: '0 !important',\r\n      marginLeft: theme.spacing(2),\r\n      order: 10,\r\n    },\r\n  },\r\n  answered: {\r\n    backgroundColor: theme.palette.type === 'light' ? '#EBFFE6' : '#68886D',\r\n  },\r\n  assigned: {\r\n    backgroundColor: theme.palette.type === 'light' ? '#FEDD9E' : '#815139',\r\n  },\r\n  avatar: {\r\n    alignSelf: 'flex-start',\r\n    width: 56,\r\n    height: 56,\r\n    marginRight: theme.spacing(2),\r\n    '& svg': {\r\n      width: '100%',\r\n      height: '100%',\r\n    },\r\n  },\r\n  quote: {\r\n    position: 'relative',\r\n    marginLeft: theme.spacing(2),\r\n    backgroundColor: theme.palette.type === 'light' ? '#eee' : theme.palette.background.default,\r\n    padding: theme.spacing(1),\r\n    borderRadius: theme.shape.borderRadius,\r\n    '&::before': {\r\n      content: '\"\"',\r\n      position: 'absolute',\r\n      left: -theme.spacing(1) * 1.5,\r\n      top: 0,\r\n      height: '97.5%',\r\n      width: 5,\r\n      borderRadius: 32,\r\n      backgroundColor: theme.palette.primary.main,\r\n    },\r\n    '& .MuiTypography-subtitle2 span': {\r\n      textTransform: 'capitalize',\r\n      fontWeight: 'bold',\r\n    },\r\n  },\r\n  labelContainer: {\r\n    marginTop: theme.spacing(1),\r\n    '& > .MuiChip-root:not(:first-of-type)': {\r\n      marginLeft: theme.spacing(1),\r\n    },\r\n  },\r\n  text: {\r\n    margin: '0 !important',\r\n    // paddingTop: 8,\r\n    // paddingBottom: 8,\r\n    '& p.MuiListItemText-secondary': {\r\n      color: theme.palette.type === 'light' ? '#000' : '#fff',\r\n    },\r\n  },\r\n}));\r\n\r\nexport const usersListStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: 325,\r\n    margin: theme.spacing(1),\r\n    marginLeft: 0,\r\n    '& .MuiCardContent-root': { padding: 0 },\r\n  },\r\n  header: {\r\n    boxSizing: 'border-box',\r\n    borderBottom: `1px solid ${theme.palette.divider}`,\r\n    boxShadow: '0px 2px 2px rgba(0,0,0,0.25)',\r\n    zIndex: 100,\r\n    '& span.MuiCardHeader-title': { textTransform: 'capitalize' },\r\n  },\r\n  content: { height: 'calc(100% - 88px)' },\r\n  list: {\r\n    height: 'calc(100% - 40px)',\r\n    overflow: 'auto',\r\n    scrollbarWidth: 'thin',\r\n    scrollbarColor: '#4a4a4a #dbdbdb',\r\n    '& .MuiListSubheader-root': {\r\n      backgroundColor: theme.palette.type === 'light' ? '#cecece' : '#333',\r\n    },\r\n  },\r\n  item: {\r\n    '& span.MuiTypography-root': {\r\n      textTransform: 'capitalize',\r\n    },\r\n  },\r\n  searchBox: {\r\n    margin: theme.spacing(1),\r\n    width: `calc(100% - ${theme.spacing(2)}px)`,\r\n  },\r\n}));\r\n\r\nexport const mentionAnswerStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 'initial',\r\n    minWidth: 288,\r\n    //minWidth: '180',\r\n    background: 'royalblue',\r\n    borderRadius: 4,\r\n    padding: '6px 16px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nexport const feedbackDialogStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    '& > .MuiFormControl-root': {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nexport const loaderStyles = makeStyles(theme => ({\r\n  root: { display: 'flex' },\r\n  progress: { margin: '0 auto' },\r\n}));\r\n\r\nexport const rewardListStyles = makeStyles(theme => ({\r\n  list: {\r\n    maxHeight: 200,\r\n    width: '100%',\r\n    overflowY: 'auto',\r\n    scrollbarWidth: 'thin',\r\n    scrollbarColor: '#4a4a4a #dbdbdb',\r\n  },\r\n  subheader: {\r\n    backgroundColor: theme.palette.type === 'light' ? '#cecece !important' : '#333 !important',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    paddingTop: 8,\r\n    paddingBottom: 8,\r\n    '& .MuiListItemText-root': {\r\n      display: 'inline-flex',\r\n    },\r\n  },\r\n}));\r\n\r\nexport const pollListStyles = makeStyles(theme => ({\r\n  list: {\r\n    maxHeight: '37.5vh',\r\n    overflowY: 'auto',\r\n    scrollbarWidth: 'thin',\r\n    scrollbarColor: '#4a4a4a #dbdbdb',\r\n  },\r\n  actionTitle: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    paddingRight: 8,\r\n  },\r\n  pollItem: { flexWrap: 'wrap' },\r\n  pollResults: { width: '100%' },\r\n}));\r\n\r\nexport const menuSearchStyles = makeStyles(theme => ({\r\n  dropdown: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    position: 'fixed',\r\n    width: 400,\r\n    top: '80px',\r\n    right: '18px',\r\n    border: '1px solid #dbdbdb',\r\n    borderRadius: 4,\r\n    padding: theme.spacing(1),\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: '#dbdbdb',\r\n  },\r\n}));\r\n","import { forwardRef, useEffect } from 'react';\r\nimport { SnackbarContent, useSnackbar } from 'notistack';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    background: '#d32f2f',\r\n    borderRadius: 4,\r\n    padding: '12px 24px',\r\n    flexWrap: 'wrap',\r\n    color: '#fff',\r\n  },\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Disconnection = forwardRef((props, ref) => {\r\n  const { root, icon } = useStyles();\r\n  const { closeSnackbar } = useSnackbar();\r\n  const socketStatus = useSelector(state => state.auth.status);\r\n\r\n  useEffect(() => {\r\n    if (socketStatus !== 'AUTENTICADO') closeSnackbar(props.id);\r\n  }, [socketStatus, closeSnackbar, props.id]);\r\n\r\n  return (\r\n    <SnackbarContent ref={ref} className={root}>\r\n      <WarningIcon className={icon} fontSize='large' />\r\n      <Box>\r\n        <Typography variant='h6'>Se ha perdido la conexión</Typography>\r\n        <Typography variant='body2'>Intentando reconectar con el servidor...</Typography>\r\n      </Box>\r\n    </SnackbarContent>\r\n  );\r\n});\r\n\r\nexport default Disconnection;\r\n","import { forwardRef } from 'react';\r\nimport { SnackbarContent, useSnackbar } from 'notistack';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { logout } from '../../../features/auth/authSlice';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    background: '#d32f2f',\r\n    borderRadius: 4,\r\n    padding: '12px 24px',\r\n    flexWrap: 'wrap',\r\n    color: '#fff',\r\n    width: '100%',\r\n  },\r\n  marginRight: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  button: {\r\n    color: '#fff',\r\n    borderColor: '#fff',\r\n  },\r\n}));\r\n\r\nconst TokenExpired = forwardRef((props, ref) => {\r\n  const { root, marginRight, button } = useStyles();\r\n  const { closeSnackbar } = useSnackbar();\r\n  const dispatch = useDispatch();\r\n  const onExit = () => {\r\n    dispatch(logout());\r\n    closeSnackbar(props.id);\r\n  };\r\n\r\n  return (\r\n    <SnackbarContent ref={ref} className={root}>\r\n      <WarningIcon className={marginRight} fontSize='large' />\r\n      <Typography variant='h6' className={marginRight}>\r\n        La sesión ha caducado\r\n      </Typography>\r\n      <Button\r\n        disableElevation\r\n        className={button}\r\n        variant='outlined'\r\n        endIcon={<PowerSettingsNewIcon />}\r\n        onClick={onExit}\r\n      >\r\n        Salir\r\n      </Button>\r\n    </SnackbarContent>\r\n  );\r\n});\r\n\r\nexport default TokenExpired;\r\n","export default __webpack_public_path__ + \"static/media/appointed.00b95928.ogg\";","import AdminPopup from '../components/Popups/AdminPopup';\r\nimport NotifyPopup from '../components/Popups/NotifyPopup';\r\nimport MentionAnswer from '../components/Popups/MentionAnswer';\r\nimport Disconnection from '../components/Popups/Disconnection';\r\nimport TokenExpired from '../components/Popups/TokenExpired';\r\nimport ring from '../resources/sounds/appointed.ogg';\r\nimport { Howl } from 'howler';\r\n\r\nconst howl = new Howl({ src: ring });\r\nexport function playSound() {\r\n  // console.log('Playing sound!!!!');\r\n  howl.play();\r\n}\r\n\r\nexport const errorUpdatingAvatar = {\r\n  message: 'Error actualizando el avatar',\r\n  options: { variant: 'error' },\r\n};\r\n\r\nexport const doneUpdatingAvatar = {\r\n  message: 'Avatar actualizado',\r\n  options: { variant: 'success' },\r\n};\r\n\r\nexport const socketConnectError = {\r\n  message: 'Error de autenticación',\r\n  options: { variant: 'error' },\r\n};\r\n\r\nexport const mentionMessage = message => ({\r\n  message: `Has sido mencionado: ${message}`,\r\n  options: { variant: 'info' },\r\n});\r\n\r\nexport const answerMessage = message => ({\r\n  message: `Han respondido a un mensaje tuyo: ${message}`,\r\n  options: { variant: 'info' },\r\n});\r\n\r\nexport const privateRequest = user => ({\r\n  message: `Has recibido una invitación a una sala privada con ${user}`,\r\n  options: { variant: 'info' },\r\n});\r\n\r\nexport const customPopup = {\r\n  message: 'Custom popup',\r\n  options: {\r\n    persist: true,\r\n    content: (key, message) => <MentionAnswer key={key} message={message} />,\r\n  },\r\n};\r\n\r\nexport const disconnection = {\r\n  options: {\r\n    persist: true,\r\n    content: key => <Disconnection key={key} id={key} />,\r\n    anchorOrigin: { horizontal: 'center', vertical: 'top' },\r\n    variant: 'warning',\r\n  },\r\n};\r\n\r\nexport const tokenExpired = {\r\n  message: 'Sesión inválida',\r\n  options: {\r\n    preventDuplicate: true,\r\n    persist: true,\r\n    content: key => <TokenExpired key={key} id={key} />,\r\n    anchorOrigin: { horizontal: 'center', vertical: 'top' },\r\n  },\r\n};\r\n\r\nexport const feedbackSended = {\r\n  message: 'Se ha enviado el feedback, gracias',\r\n  options: {\r\n    variant: 'success',\r\n  },\r\n};\r\n\r\nexport const connectionError = { message: 'Error de conexión', options: { variant: 'error' } };\r\n\r\nexport const errorPopup = message => ({ message, options: { variant: 'error' } });\r\nexport const infoPopup = message => ({ message, options: { variant: 'info' } });\r\nexport const warnPopup = message => ({ message, options: { variant: 'warning' } });\r\n\r\nexport const adminPopup = message => ({\r\n  message,\r\n  options: {\r\n    persist: true,\r\n    variant: 'warning',\r\n    content: key => <AdminPopup key={key} id={key} message={message} />,\r\n  },\r\n});\r\n\r\nexport const notifyPopup = message => ({\r\n  message,\r\n  options: {\r\n    persist: true,\r\n    variant: 'warning',\r\n    content: key => <NotifyPopup key={key} id={key} message={message} />,\r\n  },\r\n});\r\n","import safeParse from './safeParse';\r\nimport { addedPopup } from '../features/notifications/notifSlice';\r\nimport { errorPopup, tokenExpired } from './popups';\r\n\r\nconst TOKEN_EXPIRED = 'Sesión inválida';\r\n\r\nfunction thunkCatch(err, dispatch) {\r\n  const responseError = err?.request?.response;\r\n  if (responseError) {\r\n    const error = safeParse(responseError, { error: 'Error del servidor' });\r\n    if (error.error === TOKEN_EXPIRED) {\r\n      dispatch(addedPopup(tokenExpired));\r\n    } else {\r\n      dispatch(addedPopup(errorPopup(error.error)));\r\n    }\r\n    throw new Error(error.error);\r\n  }\r\n  throw new Error(err);\r\n}\r\n\r\nexport default thunkCatch;\r\n","// eslint-disable-next-line\r\nconst urlRegexp = /(https?:\\/\\/([wW]{3}\\.)?\\w+[\\._-][\\w\\/\\.:?=%&#-]+)/gim;\r\n\r\nexport const rebuildMessage = msg => {\r\n  let lastIndex = 0,\r\n    match;\r\n  const compoundText = [];\r\n  while ((match = urlRegexp.exec(msg)) !== null) {\r\n    compoundText.push({ type: 'text', value: msg.slice(lastIndex, match.index) });\r\n    compoundText.push({ type: 'link', value: match[0] });\r\n    lastIndex = match.index + match[0].length;\r\n  }\r\n  if (match === undefined) compoundText.push({ type: 'text', value: msg });\r\n  else if (lastIndex !== msg.length)\r\n    compoundText.push({ type: 'text', value: msg.slice(lastIndex) });\r\n  return compoundText;\r\n};\r\n","import axios from 'axios';\r\nimport {\r\n  createSlice,\r\n  createSelector,\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n} from '@reduxjs/toolkit';\r\nimport thunkCatch from '../../js/thunkCatch';\r\nimport { rebuildMessage } from '../../js/messages';\r\n\r\nconst messagesAdapter = createEntityAdapter({\r\n  selectId: message => message.messageId,\r\n  sortComparer: (a, b) => a.messageId - b.messageId,\r\n});\r\n\r\nconst initialState = {\r\n  ...messagesAdapter.getInitialState(),\r\n  lastMessagesCount: 0,\r\n  filter: '',\r\n  status: 'idle',\r\n  error: null,\r\n};\r\n\r\nexport const fetchFilteredMessages = createAsyncThunk(\r\n  'messages/fetchFilteredMessages',\r\n  async (_, { dispatch, getState }) => {\r\n    try {\r\n      const { active: roomId } = getState().rooms;\r\n      if (roomId === -1) throw new Error('No se ha seleccionado sala');\r\n      const { login, token, platformId } = getState().auth;\r\n      const { filter } = getState().filteredMessages;\r\n      const request = { login, token, platformId, roomId, filter };\r\n      const url = `${process.env.REACT_APP_ENDPOINT}messages/getFiltered`;\r\n      const response = await axios.post(url, request);\r\n      if (Array.isArray(response.data)) {\r\n        return response.data.map(message => ({\r\n          ...message,\r\n          compoundText: rebuildMessage(message.message),\r\n        }));\r\n      }\r\n      return response.data;\r\n    } catch (err) {\r\n      thunkCatch(err, dispatch);\r\n    }\r\n  }\r\n);\r\n\r\nconst messagesSlice = createSlice({\r\n  name: 'filteredMessages',\r\n  initialState,\r\n  reducers: {\r\n    addedMessage: messagesAdapter.addOne,\r\n    setFilterProp: (state, action) => {\r\n      if (action.payload !== ' ') state.filter = action.payload;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [fetchFilteredMessages.pending]: state => {\r\n      messagesAdapter.removeAll(state);\r\n      state.status = 'loading';\r\n      state.error = null;\r\n    },\r\n    [fetchFilteredMessages.fulfilled]: (state, action) => {\r\n      messagesAdapter.setAll(state, action);\r\n      state.lastMessagesCount = 0;\r\n      state.status = 'done';\r\n      state.error = null;\r\n    },\r\n    [fetchFilteredMessages.rejected]: (state, action) => {\r\n      state.status = 'error';\r\n      state.error = action.error.message;\r\n    },\r\n  },\r\n});\r\n\r\nexport default messagesSlice.reducer;\r\n\r\nexport const { addedMessage, setFilterProp } = messagesSlice.actions;\r\n\r\nexport const {\r\n  selectById: selectFilteredMessageById,\r\n  selectIds: selectFilteredMessageIds,\r\n} = messagesAdapter.getSelectors(state => state.filteredMessages);\r\n\r\nexport const getMessageData = createSelector(\r\n  state => state.filteredMessages.quoteId,\r\n  state => state.filteredMessages.mention,\r\n  state => state.filteredMessages.labels,\r\n  (quoteId, mention, labels) => [quoteId, mention, labels]\r\n);\r\n\r\nexport const { selectAll: selectAllMessagesList } = messagesAdapter.getSelectors(\r\n  state => state.filteredMessages\r\n);\r\n","export const propiedadesOriginales = {\r\n  topType: [\r\n    'NoHair',\r\n    'Eyepatch',\r\n    'Hat',\r\n    'Hijab',\r\n    'Turban',\r\n    'WinterHat1',\r\n    'WinterHat2',\r\n    'WinterHat3',\r\n    'WinterHat4',\r\n    'LongHairBigHair',\r\n    'LongHairBob',\r\n    'LongHairBun',\r\n    'LongHairCurly',\r\n    'LongHairCurvy',\r\n    'LongHairDreads',\r\n    'LongHairFrida',\r\n    'LongHairFro',\r\n    'LongHairFroBand',\r\n    'LongHairNotTooLong',\r\n    'LongHairShavedSides',\r\n    'LongHairMiaWallace',\r\n    'LongHairStraight',\r\n    'LongHairStraight2',\r\n    'LongHairStraightStrand',\r\n    'ShortHairDreads01',\r\n    'ShortHairDreads02',\r\n    'ShortHairFrizzle',\r\n    'ShortHairShaggyMullet',\r\n    'ShortHairShortCurly',\r\n    'ShortHairShortFlat',\r\n    'ShortHairShortRound',\r\n    'ShortHairShortWaved',\r\n    'ShortHairSides',\r\n    'ShortHairTheCaesar',\r\n    'ShortHairTheCaesarSidePart',\r\n  ],\r\n  accessoriesType: [\r\n    'Blank',\r\n    'Kurt',\r\n    'Prescription01',\r\n    'Prescription02',\r\n    'Round',\r\n    'Sunglasses',\r\n    'Wayfarers',\r\n  ],\r\n  hatColor: [\r\n    'Black',\r\n    'Blue01',\r\n    'Blue02',\r\n    'Blue03',\r\n    'Gray01',\r\n    'Gray02',\r\n    'Heather',\r\n    'PastelBlue',\r\n    'PastelGreen',\r\n    'PastelOrange',\r\n    'PastelRed',\r\n    'PastelYellow',\r\n    'Pink',\r\n    'Red',\r\n    'White',\r\n  ],\r\n  hairColor: [\r\n    'Black',\r\n    'Blonde',\r\n    'BlondeGolden',\r\n    'Brown',\r\n    'Auburn',\r\n    'BrownDark',\r\n    'PastelPink',\r\n    'Platinum',\r\n    'Red',\r\n    'SilverGray',\r\n  ],\r\n  facialHairType: ['Blank', 'BeardMedium', 'BeardLight', 'MoustacheFancy', 'MoustacheMagnum'],\r\n  facialHairColor: [\r\n    'Black',\r\n    'Blonde',\r\n    'BlondeGolden',\r\n    'Brown',\r\n    'Auburn',\r\n    'BrownDark',\r\n    'Platinum',\r\n    'Red',\r\n  ],\r\n  clotheType: [\r\n    'BlazerShirt',\r\n    'BlazerSweater',\r\n    'CollarSweater',\r\n    'GraphicShirt',\r\n    'Hoodie',\r\n    'Overall',\r\n    'ShirtCrewNeck',\r\n    'ShirtScoopNeck',\r\n    'ShirtVNeck',\r\n  ],\r\n  clotheColor: [\r\n    'Black',\r\n    'Blue01',\r\n    'Blue02',\r\n    'Blue03',\r\n    'Gray01',\r\n    'Gray02',\r\n    'Heather',\r\n    'PastelBlue',\r\n    'PastelGreen',\r\n    'PastelOrange',\r\n    'PastelRed',\r\n    'PastelYellow',\r\n    'Pink',\r\n    'Red',\r\n    'White',\r\n  ],\r\n  graphicType: [\r\n    'Bat',\r\n    'Cumbia',\r\n    'Deer',\r\n    'Diamond',\r\n    'Hola',\r\n    'Pizza',\r\n    'Resist',\r\n    'Selena',\r\n    'Bear',\r\n    'SkullOutline',\r\n    'Skull',\r\n  ],\r\n  eyeType: [\r\n    'Close',\r\n    'Cry',\r\n    'Default',\r\n    'Dizzy',\r\n    'EyeRoll',\r\n    'Happy',\r\n    'Hearts',\r\n    'Side',\r\n    'Squint',\r\n    'Surprised',\r\n    'Wink',\r\n    'WinkWacky',\r\n  ],\r\n  eyebrowType: [\r\n    'Angry',\r\n    'AngryNatural',\r\n    'Default',\r\n    'DefaultNatural',\r\n    'FlatNatural',\r\n    'RaisedExcited',\r\n    'RaisedExcitedNatural',\r\n    'SadConcerned',\r\n    'SadConcernedNatural',\r\n    'UnibrowNatural',\r\n    'UpDown',\r\n    'UpDownNatural',\r\n  ],\r\n  mouthType: [\r\n    'Concerned',\r\n    'Default',\r\n    'Disbelief',\r\n    'Eating',\r\n    'Grimace',\r\n    'Sad',\r\n    'ScreamOpen',\r\n    'Serious',\r\n    'Smile',\r\n    'Tongue',\r\n    'Twinkle',\r\n    'Vomit',\r\n  ],\r\n  skinColor: ['Tanned', 'Yellow', 'Pale', 'Light', 'Brown', 'DarkBrown', 'Black'],\r\n};\r\nexport const propiedadesTraducidas = {\r\n  topType: [\r\n    'Sin Pelo',\r\n    'Parche',\r\n    'Sombrero',\r\n    'Hijab',\r\n    'Turbante',\r\n    'Sombrero Invierno 1',\r\n    'Sombrero Invierno 2',\r\n    'Sombrero Invierno 3',\r\n    'Sombrero Invierno 4',\r\n    'Largo Abultado',\r\n    'Largo Bob',\r\n    'Largo Moño',\r\n    'Largo Rizado',\r\n    'Largo Ondulado',\r\n    'Largo Hippy',\r\n    'Largo Flores',\r\n    'Largo Afro',\r\n    'Largo Afro Diadema',\r\n    'Semilargo',\r\n    'Largo Recogido',\r\n    'Largo MiaWallace',\r\n    'Largo Liso 1',\r\n    'Largo Liso 2',\r\n    'Largo Liso Espalda',\r\n    'Corto Alborotado 1',\r\n    'Corto Alborotado 2',\r\n    'Lados Rapados',\r\n    'Corto Shaggy Mullet',\r\n    'Corto Rizado',\r\n    'Corto Flequillo Levantado',\r\n    'Corto Flequillo',\r\n    'Corto Tupe',\r\n    'Semicalvo',\r\n    'Corto',\r\n    'Corto con Raya',\r\n  ],\r\n  accessoriesType: [\r\n    'Nada',\r\n    'Kurt',\r\n    'Prescripción 1',\r\n    'Prescripción 2',\r\n    'Redondas',\r\n    'Gafas de sol 1',\r\n    'Gafas de sol 2',\r\n  ],\r\n  hatColor: [\r\n    'Negro',\r\n    'Azul 1',\r\n    'Azul 2',\r\n    'Azul 3',\r\n    'Gris 1',\r\n    'Gris 2',\r\n    'Azul Grisaceo',\r\n    'Azul Pastel',\r\n    'Verde Pastel',\r\n    'Naranje Pastel',\r\n    'Rojo Pastel',\r\n    'Amarillo Pastel',\r\n    'Rosa',\r\n    'Rojo',\r\n    'Blanco',\r\n  ],\r\n  hairColor: [\r\n    'Oscuro',\r\n    'Rubio',\r\n    'Rubio Dorado',\r\n    'Castaño',\r\n    'Castaño Claro',\r\n    'Castaño Oscuro',\r\n    'Rosa Pastel',\r\n    'Platino',\r\n    'Rojo',\r\n    'Plateado',\r\n  ],\r\n  facialHairType: ['Nada', 'Barba Mediana', 'Barba Pequeña', 'Bigote', 'Mostacho'],\r\n  facialHairColor: [\r\n    'Oscuro',\r\n    'Rubio',\r\n    'Rubio Dorado',\r\n    'Castaño',\r\n    'Castaño Claro',\r\n    'Castaño Oscuro',\r\n    'Platino',\r\n    'Rojo',\r\n  ],\r\n  clotheType: [\r\n    'Americana con camiseta',\r\n    'Americana con Suéter',\r\n    'Suéter',\r\n    'Camiseta con Dibujo',\r\n    'Sudadera',\r\n    'Peto',\r\n    'Camiseta Cuello Cerrado',\r\n    'Camiseta Cuello Abierto',\r\n    'Camiseta Cuello Pico',\r\n  ],\r\n  clotheColor: [\r\n    'Negro',\r\n    'Azul 1',\r\n    'Azul 2',\r\n    'Azul 3',\r\n    'Gris 1',\r\n    'Gris 2',\r\n    'Azul Grisáceo',\r\n    'Azul Pastel',\r\n    'Verde Pastel',\r\n    'Naranja Pastel',\r\n    'Rojo Pastel',\r\n    'Amarillo Pastel',\r\n    'Rosa',\r\n    'Rojo',\r\n    'Blanco',\r\n  ],\r\n  graphicType: [\r\n    'Murcielago',\r\n    'Cumbia',\r\n    'Ciervo',\r\n    'Diamante',\r\n    'Hola',\r\n    'Pizza',\r\n    'Resist!',\r\n    'Selena',\r\n    'Oso',\r\n    'Calavera sin Relleno',\r\n    'Calavera con Relleno',\r\n  ],\r\n  eyeType: [\r\n    'Cerrados',\r\n    'Llorando',\r\n    'Normal',\r\n    'Cansado',\r\n    'Pensativo',\r\n    'Feliz',\r\n    'Enamorado',\r\n    'Extrañado',\r\n    'Raro',\r\n    'Sorprendido',\r\n    'Ojo Guiñado 1',\r\n    'Ojo Guiñado 2',\r\n  ],\r\n  eyebrowType: [\r\n    'Enfadado',\r\n    'Enfadado Natural',\r\n    'Normal',\r\n    'Normal Natural',\r\n    'Abajo',\r\n    'Emocionado',\r\n    'Emocionado Natural',\r\n    'Triste',\r\n    'Triste Natural',\r\n    'Unicejo',\r\n    'Extrañado',\r\n    'Extrañado Natural',\r\n  ],\r\n  mouthType: [\r\n    'Boquiabierto',\r\n    'Normal',\r\n    'Raro',\r\n    'Comiendo',\r\n    'Muy Contento',\r\n    'Triste',\r\n    'Gritando Asustado',\r\n    'Serio',\r\n    'Sonriendo',\r\n    'Sacando Lengua',\r\n    'Contento',\r\n    'Vomitando',\r\n  ],\r\n  skinColor: ['Bronceado', 'Amarillo', 'Palido', 'Clarito', 'Castaño', 'Castaño Oscuro', 'Oscuro'],\r\n};\r\nexport const camposTraducidos = [\r\n  'Pelo/Accesorio',\r\n  'Gafas',\r\n  'Color Gorro',\r\n  'Color Pelo',\r\n  'Barba',\r\n  'Color Barba',\r\n  'Ropa',\r\n  'Color Ropa',\r\n  'Letra Ropa',\r\n  'Ojos',\r\n  'Cejas',\r\n  'Boca',\r\n  'Piel',\r\n];\r\nexport const camposOriginales = [\r\n  'topType',\r\n  'accessoriesType',\r\n  'hatColor',\r\n  'hairColor',\r\n  'facialHairType',\r\n  'facialHairColor',\r\n  'clotheType',\r\n  'clotheColor',\r\n  'graphicType',\r\n  'eyeType',\r\n  'eyebrowType',\r\n  'mouthType',\r\n  'skinColor',\r\n];\r\n\r\nexport const avatarAleatorio = () => {\r\n  const avatar = Object.entries(propiedadesOriginales).reduce((avatar, [prop, listaValores]) => {\r\n    const index = Math.floor(Math.random() * listaValores.length);\r\n    avatar[prop] = listaValores[index];\r\n    return avatar;\r\n  }, {});\r\n  return { ...avatar, avatarStyle: 'Circle' };\r\n};\r\n\r\nexport const defaultAvatar = {\r\n  avatarStyle: 'Circle',\r\n  topType: '',\r\n  accessoriesType: '',\r\n  hatColor: '',\r\n  hairColor: '',\r\n  facialHairType: '',\r\n  facialHairColor: '',\r\n  clotheType: '',\r\n  clotheColor: '',\r\n  graphicType: '',\r\n  eyeType: '',\r\n  eyebrowType: '',\r\n  mouthType: '',\r\n  skinColor: '',\r\n};\r\n","import { createSlice, createSelector, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { addedPopup } from '../notifications/notifSlice';\r\nimport { setFilterProp } from '../messages/filteredMessagesSlice';\r\nimport { connectionError, errorPopup } from '../../js/popups';\r\nimport axios from 'axios';\r\nimport safeParse from '../../js/safeParse';\r\nimport { defaultAvatar } from '../../js/avatars';\r\nimport thunkCatch from '../../js/thunkCatch';\r\n\r\nexport const login = createAsyncThunk('auth/login', async (loginParams, { dispatch }) => {\r\n  let response;\r\n  const url = `${process.env.REACT_APP_ENDPOINT}auth/login`;\r\n  try {\r\n    response = await axios.post(url, loginParams);\r\n    console.log(\"Response: \", response);\r\n    const avatar = safeParse(response.data.profile.avatar, defaultAvatar);\r\n    response.data.profile.avatar = avatar === 'Default' ? defaultAvatar : avatar;\r\n    return { ...response.data.session, ...response.data.profile };\r\n  } catch (err) {\r\n    if (err?.request?.response) {\r\n      const error = safeParse(err.request.response, { error: 'Error durante el logado' });\r\n      dispatch(addedPopup(errorPopup(error.error)));\r\n      throw new Error(error.error);\r\n    } else if (err.toString() === 'Error: Network Error') {\r\n      dispatch(addedPopup(connectionError));\r\n    }\r\n    throw new Error(err);\r\n  }\r\n});\r\n\r\nexport const logout = createAsyncThunk('auth/logout', async (_, { getState, dispatch }) => {\r\n  const { login, token } = getState().auth;\r\n  dispatch(setFilterProp(''));\r\n  const url = `${process.env.REACT_APP_ENDPOINT}auth/logout`;\r\n  return await axios.post(url, { login, token });\r\n});\r\n\r\nexport const updatedAvatar = createAsyncThunk(\r\n  'auth/updatedAvatar',\r\n  async (avatar, { getState, dispatch }) => {\r\n    try {\r\n      const { login, token } = getState().auth;\r\n      const url = `${process.env.REACT_APP_ENDPOINT}auth/updateAvatar`;\r\n      const response = await axios.post(url, { login, token, avatar });\r\n      return response?.data || false;\r\n    } catch (err) {\r\n      thunkCatch(err, dispatch);\r\n    }\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  state: 'idle',\r\n  error: null,\r\n  token: undefined,\r\n  expireTime: undefined,\r\n  login: undefined,\r\n  platformId: undefined,\r\n  name: undefined,\r\n  avatar: undefined,\r\n  avatarState: 'idle',\r\n  status: undefined,\r\n  socket: undefined,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    connected: (state, action) => {\r\n      state.socket = action.payload;\r\n      state.status = 'ACTIVO';\r\n    },\r\n    disconnected: state => {\r\n      state.status = 'AUTENTICADO';\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [login.pending]: state => {\r\n      state.state = 'loading';\r\n      state.error = null;\r\n    },\r\n    [login.fulfilled]: (state, action) => {\r\n      state.state = 'done';\r\n      state.token = action.payload.token;\r\n      state.expireTime = action.payload.expireTime;\r\n      state.login = action.payload.login;\r\n      state.platformId = action.payload.platformId;\r\n      state.name = action.payload.name;\r\n      state.status = action.payload.state;\r\n      state.avatar = action.payload.avatar;\r\n      state.error = null;\r\n    },\r\n    [login.rejected]: (state, action) => {\r\n      state.state = 'error';\r\n      state.error = action.error.message;\r\n    },\r\n    [logout.fulfilled]: state => {\r\n      state.token = undefined;\r\n      state.expireTime = undefined;\r\n      state.login = undefined;\r\n      state.platformId = undefined;\r\n      state.name = undefined;\r\n      state.avatar = undefined;\r\n      state.status = undefined;\r\n      state.avatar = undefined;\r\n      state.state = 'idle';\r\n      state.socket = undefined;\r\n    },\r\n    [logout.rejected]: state => {\r\n      state.token = undefined;\r\n      state.expireTime = undefined;\r\n      state.login = undefined;\r\n      state.platformId = undefined;\r\n      state.name = undefined;\r\n      state.avatar = undefined;\r\n      state.status = undefined;\r\n      state.avatar = undefined;\r\n      state.state = 'idle';\r\n      state.socket = undefined;\r\n    },\r\n    [updatedAvatar.pending]: (state, action) => {\r\n      state.avatarState = 'loading';\r\n    },\r\n    [updatedAvatar.fulfilled]: (state, action) => {\r\n      if (action.payload) {\r\n        state.avatar = action.payload;\r\n        state.avatarState = 'done';\r\n      }\r\n    },\r\n    [updatedAvatar.rejected]: (state, action) => {\r\n      state.avatarState = 'error';\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n\r\nexport const { addedReward, connected, disconnected } = authSlice.actions;\r\n\r\nexport const getIsAuthenticated = createSelector(\r\n  state => state.auth,\r\n  auth => {\r\n    const { login, token } = auth;\r\n    return Boolean(login) && Boolean(token);\r\n  }\r\n);\r\n","import { Route, Redirect } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { getIsAuthenticated } from '../../features/auth/authSlice';\r\n\r\nconst HOME = '/calio/';\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n  const isAuthenticated = useSelector(getIsAuthenticated);\r\n  \r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => (isAuthenticated ? <Component {...props} /> : <Redirect to={HOME} />)}\r\n    />\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","import { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useSnackbar } from 'notistack';\r\nimport { removedPopup } from '../../features/notifications/notifSlice';\r\n\r\nlet displayed = [];\r\n\r\nfunction Notifier() {\r\n  const dispatch = useDispatch();\r\n  const popups = useSelector(state => state.notifications.popups);\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n  const storeDisplayed = id => displayed.push(id);\r\n  const removeDisplayed = id => {\r\n    displayed = [...displayed.filter(key => key !== id)];\r\n  };\r\n\r\n  useEffect(() => {\r\n    popups.forEach(popup => {\r\n      const { key, message, options, dismissed = false } = popup;\r\n      if (dismissed) return closeSnackbar(key);\r\n      if (displayed.includes(key)) return;\r\n      enqueueSnackbar(message, {\r\n        key,\r\n        ...options,\r\n        onClose: (event, reason, popupKey) => {\r\n          if (options.onClose instanceof Function) {\r\n            options.onClose(event, reason, popupKey);\r\n          }\r\n        },\r\n        onExited: (_, popupKey) => {\r\n          dispatch(removedPopup(popupKey));\r\n          removeDisplayed(popupKey);\r\n        },\r\n      });\r\n      storeDisplayed(key);\r\n    });\r\n  }, [dispatch, enqueueSnackbar, closeSnackbar, popups]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default Notifier;\r\n","import { createSlice, createSelector, createEntityAdapter } from '@reduxjs/toolkit';\r\n\r\nconst roomSort = (roomA, roomB) => {\r\n  const typeComparision = roomA.type.localeCompare(roomB.type);\r\n  if (typeComparision !== 0) return typeComparision;\r\n  return roomA.roomName.localeCompare(roomB.roomName);\r\n};\r\n\r\nconst roomsAdapter = createEntityAdapter({\r\n  selectId: room => room.roomId,\r\n  sortComparer: roomSort,\r\n});\r\n\r\nconst initialState = {\r\n  ...roomsAdapter.getInitialState(),\r\n  state: 'idle',\r\n  error: null,\r\n  active: -1,\r\n};\r\n\r\nconst roomsSlice = createSlice({\r\n  name: 'rooms',\r\n  initialState,\r\n  reducers: {\r\n    setRooms: (state, action) => {\r\n      roomsAdapter.setAll(state, action);\r\n      state.active = state.ids[0];\r\n    },\r\n    addedRoom: (state, action) => {\r\n      roomsAdapter.upsertOne(state, action);\r\n      state.active = action.payload.roomId;\r\n    },\r\n    removedRoom: (state, action) => {\r\n      if (action.payload === state.active) state.active = state.ids[0];\r\n      roomsAdapter.removeOne(state, action);\r\n    },\r\n    changedActiveRoom: (state, action) => {\r\n      state.active = action.payload;\r\n    },\r\n    changedRoomSound: (state, action) => {\r\n      roomsAdapter.upsertOne(state, action);\r\n    },\r\n    clearedRooms: state => {\r\n      roomsAdapter.removeAll(state);\r\n      state.state = 'idle';\r\n      state.error = null;\r\n      state.active = -1;\r\n    },\r\n  },\r\n});\r\n\r\nexport default roomsSlice.reducer;\r\n\r\nexport const {\r\n  addedRoom,\r\n  removedRoom,\r\n  changedActiveRoom,\r\n  changedRoomSound,\r\n  setRooms,\r\n  clearedRooms,\r\n} = roomsSlice.actions;\r\n\r\nexport const { selectAll: selectAllRooms } = roomsAdapter.getSelectors(state => state.rooms);\r\n\r\nexport const getActiveRoom = createSelector(\r\n  [state => state.rooms.active, state => state.rooms.entities],\r\n  (activeRoomId, rooms) => rooms[activeRoomId]\r\n);\r\n\r\nconst GROUP_LABELS = ['GENERAL', 'SERVICIOS', /* 'GRUPALES', */ 'CONVERSACIONES'];\r\n\r\nexport const getGroupedRooms = createSelector(\r\n  state => state.rooms.entities,\r\n  roomEntities => {\r\n    const rooms = Object.values(roomEntities).sort(roomSort);\r\n    const firstIndexCommon = rooms.findIndex(({ type }) => type === 'COMUN');\r\n    const firstIndexService = rooms.findIndex(({ type }) => type === 'DEPARTAMENTO');\r\n    // const firstIndexGroup = rooms.findIndex(({ type }) => type === 'GRUPAL');\r\n    const firstIndexPrivate = rooms.findIndex(({ type }) => type === 'PRIVADA');\r\n    let modif = 0;\r\n    [firstIndexCommon, firstIndexService, /* firstIndexGroup, */ firstIndexPrivate].forEach(\r\n      (index, pos) => {\r\n        if (index < 0) return;\r\n        rooms.splice(index + modif, 0, { label: GROUP_LABELS[pos] });\r\n        modif++;\r\n      }\r\n    );\r\n    return rooms;\r\n  }\r\n);\r\n\r\nexport const getActiveRole = createSelector(\r\n  state => state.rooms.entities,\r\n  state => state.rooms.active,\r\n  (rooms, activeRoomId) => rooms[activeRoomId]?.role\r\n);\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const actionTypes = {\r\n  sendMessage: 'socket/sendMessage',\r\n  sendPrivateRoom: 'socket/privateRoom',\r\n  exitPrivateRoom: 'socket/exitPrivate',\r\n  sendStateChange: 'socket/stateChange',\r\n  sendAdminAction: 'socket/adminAction',\r\n  sendNotifyAction: 'socket/notifyAction',\r\n};\r\n\r\n/**\r\n * Acción para enviar un mensaje\r\n * @param {{message: string, labels: string, receiver?: string, previousId?: number}} message\r\n */\r\nexport const sendMessage = createAction(actionTypes.sendMessage);\r\n\r\n/**\r\n * Acción para abrir una sala privada\r\n * @param {{ guestLogin: string }} data\r\n */\r\nexport const sendPrivateRoom = createAction(actionTypes.sendPrivateRoom);\r\n\r\n/**\r\n * Acción para modificar el estado de un mensaje\r\n * @param {{ messageId: number, stateId: number}} data\r\n */\r\nexport const sendStateChange = createAction(actionTypes.sendStateChange);\r\n\r\n/**\r\n * Acción para abandonar una sala privada\r\n * @param {number} roomId\r\n */\r\nexport const exitPrivateRoom = createAction(actionTypes.exitPrivateRoom);\r\n\r\n/**\r\n * Acción para mandar una acción de administrador\r\n * @param {{ receiver: string, type: string, roomId: number, payload: Object}} data\r\n */\r\nexport const sendAdminAction = createAction(actionTypes.sendAdminAction, data => {\r\n  const { login, type, roomId, payload } = data;\r\n  const parsedRoomId = type === 'UPDATE_ROOM' ? parseInt(payload.roomId) : parseInt(roomId)\r\n  console.log(parsedRoomId);\r\n  return {\r\n    payload: {\r\n      type,\r\n      receiver: login,\r\n      roomId: parsedRoomId,\r\n      payload: { ...payload, roomId: parsedRoomId },\r\n    },\r\n  };\r\n});\r\n\r\n/**\r\n * Acción para mandar una notificación\r\n * @param {{ receiver: string, type: string, roomId: number, payload: Object}} data\r\n */\r\nexport const sendNotifyAction = createAction(actionTypes.sendNotifyAction, data => {\r\n  const { login, type, roomId, payload } = data;\r\n  const parsedRoomId = parseInt(roomId);\r\n  return {\r\n    payload: {\r\n      type,\r\n      receiver: login,\r\n      roomId: parsedRoomId,\r\n      payload: { ...payload, roomId: parsedRoomId },\r\n    },\r\n  };\r\n});\r\n\r\n/**\r\n * Crea un objeto con los datos relativos a un estado de mensaje\r\n * @param {string} login\r\n * @param {number} newState\r\n * @returns {{ stateDate: string, lastState: number, stateLogin: string}}\r\n */\r\nexport const createMessageState = (login, newState) => {\r\n  let stateDate = new Date();\r\n  stateDate = stateDate.toISOString();\r\n  return {\r\n    stateDate,\r\n    lastState: newState,\r\n    stateLOGIN: login,\r\n  };\r\n};\r\n","import ChatIcon from '@material-ui/icons/Chat';\r\nimport AlternateEmailIcon from '@material-ui/icons/AlternateEmail';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport QuestionAnswerIcon from '@material-ui/icons/QuestionAnswer';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\r\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\r\n\r\nconst LOWEST_ROLES = ['A1', 'A2'];\r\n//const ROLES = ['A1', 'A2', 'C1', 'C2', 'C3', 'S1', 'R1', 'Z1', 'Z2'];\r\n\r\nexport const getUserContextOptions = (role, user) => {\r\n  let options = [];\r\n  if (!user) return options;\r\n  options.push({\r\n    action: 'private',\r\n    name: 'Abrir conversación',\r\n    icon: <QuestionAnswerIcon fontSize=\"small\" />,\r\n  });\r\n  if (role.canAnswerMention) {\r\n    options.push({\r\n      action: 'mention',\r\n      name: 'Mencionar',\r\n      icon: <AlternateEmailIcon fontSize=\"small\" />,\r\n    });\r\n  }\r\n  return options;\r\n};\r\n\r\nexport const getRoomContextOptions = (role, room) => {\r\n  let options = [];\r\n  if (!LOWEST_ROLES.includes(role)) {\r\n    if (room?.sound) {\r\n      options.push({\r\n        action: 'mute',\r\n        name: 'Silenciar',\r\n        icon: <VolumeOffIcon fontSize=\"small\" />,\r\n      });\r\n    } else if (!room?.sound) {\r\n      options.push({\r\n        action: 'unmute',\r\n        name: 'Activar Sonido',\r\n        icon: <VolumeUpIcon fontSize=\"small\" />,\r\n      });\r\n    }\r\n  }\r\n  return options;\r\n};\r\n\r\nexport const getMessageContextOptions = (role, message, login) => {\r\n  let options = [];\r\n  if (!message) return options;\r\n  const { role: messageRole, lastState, stateLOGIN } = message;\r\n  if (role.canAnswerMention) {\r\n    if (lastState < 4) {\r\n      options.push({\r\n        action: 'answer',\r\n        name: 'Responder',\r\n        icon: <ReplyIcon fontSize=\"small\" />,\r\n      });\r\n    }\r\n    if (role.role !== 'A1') {\r\n      options.push({\r\n        action: 'mention',\r\n        name: 'Mencionar usuario',\r\n        icon: <AlternateEmailIcon fontSize=\"small\" />,\r\n      });\r\n    }\r\n  }\r\n  if (role.role === 'C1') {\r\n    if (lastState < 3 || lastState === 5) {\r\n      options.push({\r\n        action: 'assign',\r\n        name: 'Asignarme el mensaje',\r\n        icon: <AssignmentIcon fontSize=\"small\" />,\r\n      });\r\n    }\r\n    if (lastState === 3 && stateLOGIN === login) {\r\n      options.push({\r\n        action: 'unassign',\r\n        name: 'Desasignarme el mensaje',\r\n        icon: <AssignmentIcon fontSize=\"small\" />,\r\n      });\r\n    }\r\n  }\r\n  const { canSeeOnline } = role;\r\n  if (canSeeOnline && (canSeeOnline === 'ALL' || canSeeOnline.includes(messageRole))) {\r\n    options.push({\r\n      action: 'private',\r\n      name: 'Escribir en privado',\r\n      icon: <ChatIcon fontSize=\"small\" />,\r\n    });\r\n  }\r\n  return options;\r\n};\r\n","import { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { getRoomContextOptions } from '../../../js/examples';\r\n\r\nconst initialState = {\r\n  room: null,\r\n  x: null,\r\n  y: null,\r\n};\r\n\r\nconst RoomContextMenu = forwardRef(({ role, onChangeSound, sound }, ref) => {\r\n  const [menu, setMenu] = useState(initialState);\r\n  const open = (pos, room) => setMenu({ room, x: pos.x, y: pos.y });\r\n  const close = () => setMenu(initialState);\r\n  useImperativeHandle(ref, () => open);\r\n\r\n  const contextOptions = useMemo(() => getRoomContextOptions(role, menu?.room), [role, menu?.room]);\r\n\r\n  const onItemSelected = action => {\r\n    switch (action) {\r\n      case 'mute':\r\n        onChangeSound();\r\n        break;\r\n      case 'unmute':\r\n        onChangeSound();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    close();\r\n  };\r\n\r\n  const isOpened = menu.room?.login !== null && menu.x !== null && menu.y !== null;\r\n  const position = menu.y !== null && menu.x !== null ? { top: menu.y, left: menu.x } : undefined;\r\n\r\n  return (\r\n    <Menu\r\n      keepMounted\r\n      id=\"messages-context-menu\"\r\n      anchorReference=\"anchorPosition\"\r\n      onClose={close}\r\n      open={isOpened}\r\n      anchorPosition={position}\r\n    >\r\n      {contextOptions.map(option => (\r\n        <MenuItem key={option.action} onClick={() => onItemSelected(option.action)}>\r\n          <ListItemIcon>{option.icon}</ListItemIcon>\r\n          <Typography variant=\"inherit\">{option.name}</Typography>\r\n        </MenuItem>\r\n      ))}\r\n    </Menu>\r\n  );\r\n});\r\n\r\nexport default RoomContextMenu;\r\n","import React, { useState, useRef } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { navItemStyles } from '../../../js/styles';\r\nimport { getNotificationsByType } from '../../../features/notifications/notifSlice';\r\nimport { selectAllRooms, changedRoomSound } from '../../../features/rooms/roomsSlice';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { exitPrivateRoom } from '../../../middleware/socket.io/socket.actions';\r\nimport RoomContextMenu from './../RoomContextMenu';\r\n\r\nimport {\r\n  ListItem, ListItemText, ListItemIcon, IconButton, Badge, Tooltip, Avatar,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n  VolumeOff,\r\n} from '@material-ui/icons';\r\n\r\nfunction NavItem({ roomName, role, type: roomType, roomId, onSelected, selected }) {\r\n  const [sound, setSound] = useState(true);\r\n  const data = useSelector(selectAllRooms);\r\n  const actualRoom = data.find(room => room.roomId === roomId);\r\n  const { navItem, exitButton, roomListDiv } = navItemStyles();\r\n  const isPrivate = roomType === 'PRIVADA';\r\n  const roomContextMenuRef = useRef();\r\n  const notifications = useSelector(state => getNotificationsByType(state, { roomType, roomId }));\r\n  const dispatch = useDispatch();\r\n  const onExitRoom = e => {\r\n    e.stopPropagation();\r\n    if (!isPrivate) return;\r\n    dispatch(exitPrivateRoom(roomId));\r\n  };\r\n\r\n  const handleContextMenu = e => {\r\n    e.preventDefault();\r\n    const { clientX: x, clientY: y } = e;\r\n    onRoomContextMenu({ x, y }, actualRoom);\r\n  };\r\n\r\n  function onRoomContextMenu(position, room) {\r\n    const openContextMenu = roomContextMenuRef.current;\r\n    if (openContextMenu instanceof Function) openContextMenu(position, room);\r\n  }\r\n\r\n  const onChangeSound = () => {\r\n    const room = {\r\n      roomId: actualRoom.roomId,\r\n      role: actualRoom.role,\r\n      roomName: actualRoom.roomName,\r\n      type: actualRoom.type,\r\n      sound: !actualRoom.sound,\r\n    };\r\n    setSound(room.sound);\r\n    dispatch(changedRoomSound(room));\r\n  };\r\n\r\n  function getCapitalLetters(string) {\r\n    let letter = '';\r\n    const array = string.split(' ');\r\n    array.forEach(element => {\r\n      if (element.length > 3 && letter.length < 2) {\r\n        letter += element.charAt(0);\r\n      }\r\n    });\r\n    return letter.toUpperCase();\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <ListItem\r\n      divider\r\n      button\r\n      className={navItem}\r\n      selected={selected}\r\n      onClick={() => onSelected({ roomName, code: role.role, roomId })}\r\n      onContextMenu={handleContextMenu}\r\n    >\r\n        <div className={roomListDiv}>\r\n\r\n          {/* <Badge className={badge} color=\"primary\" badgeContent={notifications || 0}>\r\n            {<Avatar>{getCapitalLetters(roomName)}</Avatar>}\r\n          </Badge> */}\r\n          <div><Badge  badgeContent={notifications || 0} color=\"primary\">\r\n            <Avatar >{getCapitalLetters(roomName)}</Avatar>\r\n            </Badge>\r\n          </div>\r\n          <ListItemText primary={roomName.toLowerCase()} />\r\n\r\n        </div>\r\n        <div>\r\n          <IconButton aria-label=\"silenciar\" size=\"small\">\r\n            {!sound && <VolumeOff />}\r\n          </IconButton>\r\n        </div>\r\n        {isPrivate && (\r\n          <ListItemIcon className={exitButton}>\r\n            <Tooltip arrow title=\"Abandonar conversación\">\r\n              <IconButton aria-label=\"abandonar conversación\" size=\"small\" onClick={onExitRoom}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </ListItemIcon>\r\n        )}\r\n    </ListItem>\r\n      {actualRoom?.role.role !== 'A1' && actualRoom?.role.role !== 'A2' && (\r\n    <RoomContextMenu\r\n      ref={roomContextMenuRef}\r\n      role={actualRoom?.role.role}\r\n      onChangeSound={onChangeSound}\r\n      sound\r\n    />\r\n  )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default React.memo(NavItem);\r\n","import Tooltip from '@material-ui/core/Tooltip';\r\nimport Button from '@material-ui/core/Button';\r\nimport { logout } from '../../../features/auth/authSlice';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from 'avataaars';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\n\r\nfunction ProfileButton({ className, onClick }) {\r\n  const dispatch = useDispatch();\r\n  const { avatar, name, login } = useSelector(state => state.auth);\r\n  const onLogout = () => dispatch(logout());\r\n\r\n  return (\r\n    <div style={{ display: 'flex', alignItems: 'center' }}>\r\n      <Tooltip title=\"Ajustes del perfil\" arrow>\r\n        <Button onClick={onClick} className={className}>\r\n          <Box>\r\n            <Avatar {...avatar} avatarStyle={'Transparent'} />\r\n          </Box>\r\n          <div>\r\n            <Typography variant=\"subtitle2\" component=\"h6\">\r\n              {name?.toLowerCase()}\r\n            </Typography>\r\n            <Typography variant=\"body2\" component=\"span\">\r\n              {login}\r\n            </Typography>\r\n          </div>\r\n        </Button>\r\n      </Tooltip>\r\n      <Box>\r\n        <Tooltip title=\"Cerrar sesión\" arrow>\r\n          <IconButton aria-label=\"cerrar sesión\" onClick={onLogout}>\r\n            <PowerSettingsNewIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileButton;\r\n","import { useState, useEffect, useCallback } from 'react';\r\n\r\n/**\r\n * Efecto para gestionar el modo oscuro y que haya persistencia de datos.\r\n * @return {array} Array : [darkMode : Boolean, changeTheme : Function].\r\n */\r\nfunction useThemes() {\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const changeTheme = useCallback(() => {\r\n    window.localStorage.setItem('darkModeCalio', !darkMode);\r\n    setDarkMode(isDarkModeActive => !isDarkModeActive);\r\n  }, [darkMode]);\r\n\r\n  useEffect(() => {\r\n    const localDarkMode = window.localStorage.getItem('darkModeCalio');\r\n    setDarkMode(localDarkMode === 'true');\r\n  }, []);\r\n\r\n  return { darkMode, changeTheme };\r\n}\r\n\r\nexport default useThemes;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst _palette = (primaryColor) => ({\r\n  primary: {\r\n    main: primaryColor,\r\n  },\r\n  secondary: {\r\n    main: '#0088ff',\r\n  },\r\n  tonalOffset: 0.2,\r\n});\r\n\r\nexport const lightTheme = (primaryColor) => createMuiTheme({\r\n  palette: {\r\n    type: 'light',\r\n    ..._palette(primaryColor),\r\n  },\r\n  overrides: {\r\n    MuiButton: {\r\n      label: {\r\n        textTransform: 'none',\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport const darkTheme = (primaryColor) => createMuiTheme({\r\n  palette: {\r\n    type: 'dark',\r\n    ..._palette(primaryColor),\r\n  },\r\n  overrides: {\r\n    MuiButton: {\r\n      label: {\r\n        textTransform: 'none',\r\n      },\r\n    },\r\n  },\r\n});\r\n","import { createContext, useState } from 'react';\r\nimport useThemes from '../hooks/useThemes';\r\nimport { ThemeProvider as MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { lightTheme, darkTheme } from '../app/themes';\r\n\r\nexport const ThemeContext = createContext({\r\n\tdarkMode: false,\r\n\tchangeTheme: () => {},\r\n});\r\n\r\nexport const ThemeProvider = ({ children }) => {\r\n\tconst theme = useThemes();\r\n\r\n\tconst [primaryColor,setPrimaryColor] = useState(window.localStorage.getItem('Color') || '#ff7900');\r\n\r\n\treturn (\r\n\t\t<ThemeContext.Provider value={{theme, primaryColor, setPrimaryColor}}>\r\n\t\t\t<MuiThemeProvider theme={theme.darkMode ? darkTheme(primaryColor) : lightTheme(primaryColor)}>\r\n\t\t\t\t{children}\r\n\t\t\t</MuiThemeProvider>\r\n\t\t</ThemeContext.Provider>\r\n\t);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/LogoBlanco.35bc6724.png\";","export default __webpack_public_path__ + \"static/media/LogoNegro.2397cfcb.png\";","import { useContext } from 'react';\r\nimport { ThemeContext } from '../../../../contexts/ThemeContext';\r\nimport whiteLogo from '../../../../resources/logos/LogoBlanco.png';\r\nimport blackLogo from '../../../../resources/logos/LogoNegro.png';\r\n\r\nfunction Logo({ className }) {\r\n  const { theme } = useContext(ThemeContext);\r\n  const logo = theme.darkMode ? whiteLogo : blackLogo;\r\n\r\n  return <img src={logo} alt='Logotipo de Calio' className={className} />;\r\n}\r\n\r\nexport default Logo;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { InputLabel, MenuItem, FormControl, ListItemText, Select } from '@material-ui/core';\r\n\r\nconst useEstilos = makeStyles(theme => ({\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    marginLeft:'0px',\r\n    marginTop: '15',\r\n    width: '86%',\r\n  },\r\n}));\r\n\r\nconst colores = [\r\n  { nombre: 'Love Orange', color: '#ff7900', background: '#fff' },\r\n  { nombre: 'Arctic Blue', color: '#76949F', background: '#fff' },\r\n  { nombre: 'Celebi Green', color: '#50be87', background: '#fff' },\r\n  { nombre: 'Salmon Pink', color: '#F4989C', background: '#000' },\r\n  { nombre: 'Blue Bell', color: '#999AC6', background: '#fff' },\r\n  { nombre: 'Indian Red', color: '#CD5C5C', background: '#000' },\r\n];\r\n\r\nfunction SelectColores({ primaryColor, setPrimaryColor }) {\r\n  const estilos = useEstilos();\r\n  const selectBullet = codigo => (\r\n    <div\r\n      style={{\r\n        width: '26px',\r\n        height: '26px',\r\n        borderRadius: '50%',\r\n        backgroundColor: codigo,\r\n        marginRight: '16px',\r\n      }}\r\n    />\r\n  );\r\n\r\n  const onColorChange = event => {\r\n    console.log('Color: ',event.target.value);\r\n    window.localStorage.setItem('Color', event.target.value);\r\n    setPrimaryColor(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <FormControl required variant=\"outlined\" className={estilos.formControl}>\r\n      <InputLabel htmlFor=\"select-colores\">Tema personalizado</InputLabel>\r\n      <Select\r\n        name=\"COLOR\"\r\n        label=\"Color de los botones\"\r\n        id=\"select-colores\"\r\n        value={primaryColor}\r\n        onChange={onColorChange}\r\n        className={estilos.select}\r\n        renderValue={selected => {\r\n          const codigo = colores.filter(c => c.color === selected)[0];\r\n          return (\r\n            <div style={{ display: 'flex', alignItems: 'center', padding: '0 8px' }}>\r\n              {selectBullet(codigo.color)}\r\n              <span style={{ textTransform: 'capitalize' }}>{codigo.nombre}</span>\r\n            </div>\r\n          );\r\n        }}\r\n      >\r\n        {colores.map(({ nombre, color }) => (\r\n          <MenuItem key={nombre} value={color}>\r\n            {selectBullet(color)}\r\n            <ListItemText primary={nombre} className={estilos.optionItem} />\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nexport default SelectColores;","import React, { useState, useContext, useEffect, forwardRef, useImperativeHandle } from 'react';\r\nimport { Dialog, Box, DialogContent, DialogActions, DialogTitle, FormControl, InputLabel, Tooltip, Select, IconButton, MenuItem } from '@material-ui/core';\r\nimport { profileDialogStyles } from '../../../js/styles';\r\nimport { ThemeContext } from '../../../contexts/ThemeContext';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updatedAvatar } from '../../../features/auth/authSlice';\r\nimport { addedPopup } from '../../../features/notifications/notifSlice';\r\nimport {\r\n  propiedadesOriginales,\r\n  propiedadesTraducidas,\r\n  camposTraducidos,\r\n  camposOriginales,\r\n} from '../../../js/avatars';\r\nimport {\r\n  CheckOutlined as IconoGuardar,\r\n  ClearOutlined as IconoLimpiar,\r\n} from '@material-ui/icons';\r\nimport { errorUpdatingAvatar, doneUpdatingAvatar } from '../../../js/popups';\r\nimport Avatar from 'avataaars';\r\nimport SelectColores from './SelectColores';\r\n\r\nconst ProfileDialog = forwardRef((_, ref) => {\r\n  const { primaryColor, setPrimaryColor } = useContext(ThemeContext);\r\n  const estilos = profileDialogStyles();\r\n  const dispatch = useDispatch();\r\n  const [avatar, avatarState] = useSelector(state => [state.auth.avatar, state.auth.avatarState]);\r\n\r\n  const [visible, setVisible] = useState(false);\r\n  const open = () => setVisible(true);\r\n  const close = () => setVisible(false);\r\n\r\n  const [previewAvatar, setPreviewAvatar] = useState(avatar);\r\n  const changeAvatar = ({ target: { name, value } }) =>\r\n    setPreviewAvatar(prev => ({ ...prev, [name]: value }));\r\n\r\n  const applyChanges = () => dispatch(updatedAvatar(previewAvatar));\r\n\r\n  useEffect(() => {\r\n    if (avatarState === 'error') {\r\n      dispatch(addedPopup(errorUpdatingAvatar));\r\n    } else if (avatarState === 'done') {\r\n      dispatch(addedPopup(doneUpdatingAvatar));\r\n    }\r\n  }, [avatarState, dispatch]);\r\n\r\n  useImperativeHandle(ref, () => ({ open }));\r\n\r\n  return (\r\n    <Dialog\r\n      open={visible}\r\n      onClose={close}\r\n      scroll=\"paper\"\r\n      aria-labelledby=\"dialogo-perfil-titulo\"\r\n      maxWidth=\"md\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle id=\"dialogo-perfil-titulo\">Mi perfil</DialogTitle>\r\n      <DialogContent className={estilos.root} dividers>\r\n        <div className={estilos.cuerpoAvatar}>\r\n          <div className={estilos.divAvatarColor}>\r\n            <Box className={estilos.avatar}>\r\n              <Avatar {...previewAvatar} avatarStyle={'Transparent'} />\r\n            </Box>\r\n            <SelectColores primaryColor={primaryColor} setPrimaryColor={setPrimaryColor} />\r\n          </div>\r\n          <Box className={estilos.ajustesAvatar}>\r\n            {avatar &&\r\n              camposOriginales.map((campo, index) => (\r\n                <FormControl key={campo} variant=\"outlined\">\r\n                  <InputLabel id={`avatar-${index}`}>{camposTraducidos[index]}</InputLabel>\r\n                  <Select\r\n                    labelId={`avatar-${index}`}\r\n                    label={camposTraducidos[index]}\r\n                    name={campo}\r\n                    value={previewAvatar[campo] || ''}\r\n                    onChange={changeAvatar}\r\n                  >\r\n                    {propiedadesTraducidas[camposOriginales[index]].map((prop, subIndex) => (\r\n                      <MenuItem key={prop} value={propiedadesOriginales[campo][subIndex]}>\r\n                        {prop}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              ))}\r\n          </Box>\r\n        </div>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Tooltip title=\"Cerrar\">\r\n          <IconButton\r\n\r\n            className={estilos.btnCerrar}\r\n            onClick={close}\r\n          >\r\n            <IconoLimpiar />\r\n          </IconButton>\r\n        </Tooltip>\r\n\r\n        <Tooltip title=\"Guardar\">\r\n          <IconButton\r\n            style={{ backgroundColor: primaryColor }}\r\n            className={estilos.btnGuardar}\r\n            onClick={applyChanges}\r\n          >\r\n            <IconoGuardar />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n});\r\n\r\nexport default ProfileDialog;\r\n","import { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { getNotifications } from '../features/notifications/notifSlice';\r\n\r\nconst CALIO = 'Calio';\r\n\r\nfunction useNotificationTitle() {\r\n  const totalNotifications = useSelector(getNotifications);\r\n  useEffect(() => {\r\n    document.title = totalNotifications > 0 ? `📝(${totalNotifications}) ${CALIO}` : CALIO;\r\n  }, [totalNotifications]);\r\n}\r\n\r\nexport default useNotificationTitle;\r\n","import ListSubheader from '@material-ui/core/ListSubheader';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport QuestionAnswer from '@material-ui/icons/QuestionAnswer';\r\nimport ChatBubble from '@material-ui/icons/ChatBubble';\r\nimport Announcement from '@material-ui/icons/Announcement';\r\nimport { useSelector } from 'react-redux';\r\nimport { hasRoomGroupNotifications } from '../../../features/notifications/notifSlice';\r\n\r\nconst LABEL_ICONS = {\r\n  GENERAL: <Announcement />,\r\n  SERVICIOS: <ChatBubble />,\r\n  CONVERSACIONES: <QuestionAnswer />,\r\n};\r\n\r\nconst NavLabel = ({ label }) => {\r\n  const hasNotifications = useSelector(state => hasRoomGroupNotifications(state, label));\r\n  return (\r\n    <>\r\n      <ListSubheader>\r\n        <Badge color='primary' variant='dot' invisible={!hasNotifications}>\r\n          {LABEL_ICONS[label]}\r\n        </Badge>\r\n        {label}\r\n      </ListSubheader>\r\n      <Divider />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NavLabel;\r\n","import { useRef, useState } from 'react';\r\nimport { useLocation, Redirect } from 'react-router-dom';\r\nimport { navbarStyles } from '../../js/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport List from '@material-ui/core/List';\r\nimport NavItem from './NavItem';\r\nimport ProfileButton from './ProfileButton';\r\nimport Logo from '../Home/Login/Logo';\r\nimport ProfileDialog from './ProfileDialog';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { changedActiveRoom, getGroupedRooms, getActiveRoom } from '../../features/rooms/roomsSlice';\r\nimport useNotificationTitle from '../../hooks/useNotificationTitle';\r\nimport NavLabel from './NavLabel';\r\n\r\nconst AVAILABLE_PATHS = ['/calio/', '/calio/chat'];\r\n\r\nfunction Navbar() {\r\n  const activeRoom = useSelector(getActiveRoom);\r\n  const { root, autofill, logo, profileButton, list, searcher } = navbarStyles();\r\n  const { pathname } = useLocation();\r\n  const dispatch = useDispatch();\r\n  const profileDialogRef = useRef();\r\n  const groupedRooms = useSelector(getGroupedRooms);\r\n  const [search, setSearch] = useState('');\r\n  useNotificationTitle();\r\n\r\n  const onItemSelected = item => dispatch(changedActiveRoom(item.roomId));\r\n  const openProfileDialog = () => profileDialogRef.current?.open();\r\n\r\n  if (!AVAILABLE_PATHS.includes(pathname)) return <Redirect to={AVAILABLE_PATHS[0]} />;\r\n  if (pathname === AVAILABLE_PATHS[0]) return null;\r\n\r\n  return (\r\n    <>\r\n      <Card elevation={0} className={root} raised>\r\n        <Logo className={logo} />\r\n        <OutlinedInput\r\n          className={searcher}\r\n          variant=\"outlined\"\r\n          margin=\"dense\"\r\n          placeholder=\"Buscar salas...\"\r\n          value={search}\r\n          onChange={e => setSearch(e.target.value)}\r\n          endAdornment={\r\n            <InputAdornment position=\"end\">\r\n              <SearchIcon />\r\n            </InputAdornment>\r\n          }\r\n        />\r\n        <List component=\"nav\" disablePadding className={list}>\r\n          {groupedRooms\r\n            ?.filter(\r\n              room =>\r\n                !search ||\r\n                Boolean(room.label) ||\r\n                room.roomName.toLowerCase().includes(search.toLowerCase())\r\n            )\r\n            .map((room, i) =>\r\n              room.label ? (\r\n                <NavLabel key={`${i}-${room.label}`} label={room.label} />\r\n              ) : (\r\n                <NavItem\r\n                  key={room.roomId}\r\n                  {...room}\r\n                  selected={room.roomId === activeRoom.roomId}\r\n                  onSelected={onItemSelected}\r\n                />\r\n              )\r\n            )}\r\n        </List>\r\n        <div className={autofill} />\r\n        <ProfileButton className={profileButton} onClick={openProfileDialog} />\r\n      </Card>\r\n      <ProfileDialog ref={profileDialogRef} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport Person from '@material-ui/icons/Person';\r\nimport Lock from '@material-ui/icons/Lock';\r\nimport VpnKey from '@material-ui/icons/VpnKey';\r\nimport Logo from './Logo';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { login } from '../../../features/auth/authSlice';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst principalPath = '/calio/chat';\r\n\r\nfunction Login({ className, logoClassName }) {\r\n  const [form, setForm] = useState({ login: '', password: '' });\r\n  const [hidePassword, setHidePassword] = useState(true);\r\n  const [activeCaps, setActiveCaps] = useState(false);\r\n  const passwordRef = useRef();\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector(state => state.auth);\r\n  const history = useHistory();\r\n  const [buttonActive, setButtonActive] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (auth.state === 'done' && auth.status === 'ACTIVO') {\r\n      history.push(principalPath);\r\n    }\r\n  }, [auth, history]);\r\n\r\n  const onChange = ({ target: { name, value } }) =>\r\n    setForm(prev => ({ ...prev, [name]: value.trim() }));\r\n\r\n  const toggleHidePassword = () => setHidePassword(prev => !prev);\r\n\r\n  const onKeyUp = e => {\r\n    const caps = e.getModifierState('CapsLock');\r\n    setActiveCaps(caps);\r\n  };\r\n\r\n  const onSubmit = async e => {\r\n    setButtonActive(false);\r\n    e.preventDefault();\r\n    dispatch(login(form));\r\n  };\r\n\r\n  const isSubmitDisabled = !form.login || !form.password || !buttonActive;\r\n\r\n  return (\r\n    <Box component=\"form\" onSubmit={onSubmit} className={className}>\r\n      <Box>\r\n        <Logo className={logoClassName} />\r\n        <FormControl variant=\"outlined\">\r\n          <InputLabel htmlFor=\"login-login\">Prometheus ID</InputLabel>\r\n          <OutlinedInput\r\n            required\r\n            variant=\"outlined\"\r\n            label=\"Prometheus ID\"\r\n            placeholder=\"Prometheus ID\"\r\n            id=\"login-login\"\r\n            name=\"login\"\r\n            type=\"text\"\r\n            value={form.login}\r\n            onChange={onChange}\r\n            startAdornment={\r\n              <InputAdornment position=\"start\">\r\n                <Person />\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n        <FormControl variant=\"outlined\">\r\n          <InputLabel htmlFor=\"login-password\">Contraseña</InputLabel>\r\n          <OutlinedInput\r\n            required\r\n            inputRef={passwordRef}\r\n            variant=\"outlined\"\r\n            label=\"Contraseña\"\r\n            placeholder=\"Contraseña\"\r\n            id=\"login-password\"\r\n            name=\"password\"\r\n            type={hidePassword ? 'password' : 'text'}\r\n            value={form.password}\r\n            onChange={onChange}\r\n            onKeyUp={onKeyUp}\r\n            onBlur={() => setHidePassword(true)}\r\n            startAdornment={\r\n              <InputAdornment position=\"start\">\r\n                <Lock />\r\n              </InputAdornment>\r\n            }\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <Tooltip title=\"Ver Contraseña\" placement=\"top\" arrow>\r\n                  <IconButton onClick={toggleHidePassword}>\r\n                    {hidePassword ? <VisibilityOff /> : <Visibility />}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n          <Typography variant=\"body2\" color=\"error\">\r\n            {activeCaps ? '¡Hey! Las mayúsculas están activas' : ' '}\r\n          </Typography>\r\n        </FormControl>\r\n        <Button disableElevation\r\n          disabled={isSubmitDisabled}\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          startIcon={<VpnKey />}\r\n        >\r\n          {auth.state === 'loading' ? 'Accediendo...' : 'Acceder con Prometheus ID'}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { camposOriginales, propiedadesOriginales, avatarAleatorio } from '../../../js/avatars';\r\n\r\nfunction useInterval(callback, delay = 1000) {\r\n  const cb = useRef(callback);\r\n\r\n  useEffect(() => {\r\n    if (callback instanceof Function) cb.current = callback;\r\n  }, [callback]);\r\n\r\n  useEffect(() => {\r\n    function tick() {\r\n      if (cb.current instanceof Function) cb.current();\r\n    }\r\n    const id = setInterval(tick, delay);\r\n    return () => clearInterval(id);\r\n  }, [delay]);\r\n}\r\n\r\nfunction useRandomAvatar() {\r\n  const [avatar, setAvatar] = useState(avatarAleatorio());\r\n\r\n  useInterval(() => {\r\n    const randomFieldIndex = Math.ceil(Math.random() * camposOriginales.length - 1);\r\n    const randomField = camposOriginales[randomFieldIndex];\r\n    const props = propiedadesOriginales[randomField];\r\n    const randomPropIndex = Math.ceil(Math.random() * props.length - 1);\r\n    setAvatar(prev => ({ ...prev, [randomField]: props[randomPropIndex] }));\r\n  }, 150);\r\n\r\n  return avatar;\r\n}\r\nexport default useRandomAvatar;\r\n","import useRandomAvatar from './useRandomAvatar';\r\nimport Box from '@material-ui/core/Box';\r\nimport Avatar from 'avataaars';\r\n\r\nfunction HomeBox({ className, avatarClassName }) {\r\n  const avatar = useRandomAvatar();\r\n\r\n  return (\r\n    <Box className={className}>\r\n      <Box className={avatarClassName}>\r\n        <Avatar {...avatar} avatarStyle='Transparent' />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default HomeBox;\r\n","import Login from './Login';\r\nimport HomeBox from './HomeBox';\r\nimport Card from '@material-ui/core/Card';\r\nimport { homeStyles } from '../../js/styles';\r\n\r\nfunction Home() {\r\n  const { root, loginContainer, homeBoxContainer, avatar, logo } = homeStyles();\r\n\r\n  return (\r\n    <Card elevation={0} raised className={root}>\r\n      <HomeBox className={homeBoxContainer} avatarClassName={avatar} />\r\n      <Login className={loginContainer} logoClassName={logo} />\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import axios from 'axios';\r\nimport {\r\n  createSlice,\r\n  createSelector,\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n} from '@reduxjs/toolkit';\r\nimport thunkCatch from '../../js/thunkCatch';\r\nimport { rebuildMessage } from '../../js/messages';\r\n\r\nconst messagesAdapter = createEntityAdapter({\r\n  selectId: message => message.messageId,\r\n  sortComparer: (a, b) => a.messageId - b.messageId,\r\n});\r\n\r\nconst initialState = {\r\n  ...messagesAdapter.getInitialState(),\r\n  lastMessagesCount: 0,\r\n  status: 'idle',\r\n  error: null,\r\n  quoteId: null,\r\n  mention: null,\r\n  labels: [],\r\n};\r\n\r\nexport const fetchInitialMessages = createAsyncThunk(\r\n  'messages/fetchInitialMessages',\r\n  async (_data, { dispatch, getState }) => {\r\n    try {\r\n      const { active: roomId } = getState().rooms;\r\n      if (roomId === -1) throw new Error('No se ha seleccionado sala');\r\n      const { login, token, platformId } = getState().auth;\r\n      const request = { login, token, platformId, roomId };\r\n      const url = `${process.env.REACT_APP_ENDPOINT}messages/getAvailable`;\r\n      const response = await axios.post(url, request);\r\n      if (Array.isArray(response.data)) {\r\n        return response.data.map(message => ({\r\n          ...message,\r\n          compoundText: rebuildMessage(message.message),\r\n        }));\r\n      }\r\n      return response.data;\r\n    } catch (err) {\r\n      thunkCatch(err, dispatch);\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchNextMessages = createAsyncThunk(\r\n  'messages/fetchNextMessages',\r\n  async (_data, { dispatch, getState }) => {\r\n    try {\r\n      const { active: roomId } = getState().rooms;\r\n      if (roomId === -1) throw new Error('No se ha seleccionado sala');\r\n      const lastMessage = getState().messages.entities[getState().messages.ids[0]];\r\n      const lastId = lastMessage?.roomId === roomId ? lastMessage?.messageId : null;\r\n      const { login, token, platformId } = getState().auth;\r\n      const request = { login, token, platformId, roomId, lastId };\r\n      const url = `${process.env.REACT_APP_ENDPOINT}messages/getAvailable`;\r\n      const response = await axios.post(url, request);\r\n      if (Array.isArray(response.data)) {\r\n        return response.data.map(message => ({\r\n          ...message,\r\n          compoundText: rebuildMessage(message.message),\r\n        }));\r\n      }\r\n      return response.data;\r\n    } catch (err) {\r\n      thunkCatch(err, dispatch);\r\n    }\r\n  }\r\n);\r\n\r\nconst messagesSlice = createSlice({\r\n  name: 'messages',\r\n  initialState,\r\n  reducers: {\r\n    addedMessage: messagesAdapter.addOne,\r\n    addedQuote: (state, action) => {\r\n      state.quoteId = action.payload;\r\n      state.mention = null;\r\n    },\r\n    removedQuote: state => {\r\n      state.quoteId = null;\r\n    },\r\n    addedMention: (state, action) => {\r\n      state.mention = action.payload;\r\n      state.quoteId = null;\r\n    },\r\n    removedMention: state => {\r\n      state.mention = null;\r\n    },\r\n    addedLabel: (state, action) => {\r\n      const index = state.labels.findIndex(label => label.tag === action.payload.tag);\r\n      if (index < 0) state.labels.push(action.payload);\r\n    },\r\n    removedLabel: (state, action) => {\r\n      const index = state.labels.findIndex(label => label.tag === action.payload.tag);\r\n      if (index >= 0) state.labels.splice(index, 1);\r\n    },\r\n    updatedState: (state, action) => {\r\n      const message = state.entities[action.payload.previousId || action.payload.messageId];\r\n      if (message) {\r\n        const { stateDate, lastState, stateLOGIN } = action.payload;\r\n        message.stateDate = stateDate;\r\n        message.lastState = lastState;\r\n        message.stateLOGIN = stateLOGIN;\r\n        messagesAdapter.upsertOne(state, message);\r\n      }\r\n    },\r\n    updatedLastMessagesCount: (state, action) => {\r\n      state.lastMessagesCount = action.payload;\r\n    },\r\n    clearedForm: state => {\r\n      state.mention = null;\r\n      state.labels = [];\r\n      state.quoteId = null;\r\n    },\r\n    sendedMessage: state => {\r\n      state.mention = null;\r\n      state.labels = [];\r\n      state.quoteId = null;\r\n    },\r\n    clearedMessages: state => {\r\n      messagesAdapter.removeAll(state);\r\n      state.mention = null;\r\n      state.labels = [];\r\n      state.quoteId = null;\r\n      state.status = 'idle';\r\n      state.error = null;\r\n      state.lastMessagesCount = 0;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [fetchInitialMessages.pending]: state => {\r\n      messagesAdapter.removeAll(state);\r\n      state.status = 'loading';\r\n      state.error = null;\r\n    },\r\n    [fetchInitialMessages.fulfilled]: (state, action) => {\r\n      messagesAdapter.setAll(state, action);\r\n      state.lastMessagesCount = 0;\r\n      state.status = 'done';\r\n      state.error = null;\r\n    },\r\n    [fetchInitialMessages.rejected]: (state, action) => {\r\n      state.status = 'error';\r\n      state.error = action.error.message;\r\n    },\r\n    [fetchNextMessages.pending]: state => {\r\n      state.status = 'loading';\r\n      state.error = null;\r\n      state.lastMessagesCount = 0;\r\n    },\r\n    [fetchNextMessages.fulfilled]: (state, action) => {\r\n      // ! const messageCount = action.payload.length;\r\n      // ! const isFinalFetch = messageCount === 0 || messageCount < 100;\r\n      // ! state.lastMessagesCount = isFinalFetch ? -1 : messageCount;\r\n      state.lastMessagesCount = action.payload.length;\r\n      messagesAdapter.upsertMany(state, action);\r\n      state.status = 'done';\r\n      state.error = null;\r\n    },\r\n    [fetchNextMessages.rejected]: (state, action) => {\r\n      state.status = 'error';\r\n      state.error = action.error.message;\r\n    },\r\n  },\r\n});\r\n\r\nexport default messagesSlice.reducer;\r\n\r\nexport const {\r\n  addedMessage,\r\n  updatedState,\r\n  sendedMessage,\r\n  addedQuote,\r\n  removedQuote,\r\n  addedMention,\r\n  removedMention,\r\n  addedLabel,\r\n  removedLabel,\r\n  clearedForm,\r\n  updatedLastMessagesCount,\r\n  clearedMessages,\r\n} = messagesSlice.actions;\r\n\r\nexport const {\r\n  selectById: selectMessageById,\r\n  selectIds: selectMessageIds,\r\n} = messagesAdapter.getSelectors(state => state.messages);\r\n\r\nexport const getMessageData = createSelector(\r\n  state => state.messages.quoteId,\r\n  state => state.messages.mention,\r\n  state => state.messages.labels,\r\n  (quoteId, mention, labels) => [quoteId, mention, labels]\r\n);\r\n","import axios from 'axios';\r\nimport {\r\n  createSlice,\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSelector,\r\n} from '@reduxjs/toolkit';\r\nimport thunkCatch from '../../js/thunkCatch';\r\n\r\nconst usersAdapter = createEntityAdapter({\r\n  selectId: user => user.login,\r\n  sortComparer: (a, b) => {\r\n    const roleComparision = a.role.localeCompare(b.role);\r\n    if (roleComparision !== 0) return roleComparision * -1;\r\n    return a.name.localeCompare(b.name);\r\n  },\r\n});\r\n\r\nconst initialState = {\r\n  ...usersAdapter.getInitialState(),\r\n  state: 'idle',\r\n  error: null,\r\n};\r\n\r\n/**\r\n * Solicitud al backend para que nos devuelva los usuarios conectados dada una lista de salas\r\n * @param {Array<string>} rooms Lista de salas para las que pedimos los usuarios.\r\n */\r\nexport const fetchUsersByRoom = createAsyncThunk(\r\n  'users/fetchUsersByRoom',\r\n  async (_, { getState, dispatch }) => {\r\n    try {\r\n      const { token, login } = getState().auth;\r\n      const { active: roomId } = getState().rooms;\r\n      const url = `${process.env.REACT_APP_ENDPOINT}users/getConnected`;\r\n      const response = await axios.post(url, { login, token, roomId });\r\n      return response?.data;\r\n    } catch (err) {\r\n      thunkCatch(err, dispatch);\r\n    }\r\n  }\r\n);\r\n\r\nconst usersSlice = createSlice({\r\n  name: 'users',\r\n  initialState,\r\n  reducers: {\r\n    userAdded: usersAdapter.upsertOne,\r\n    userRemoved: (state, action) => {\r\n      usersAdapter.removeOne(state, action.payload.login);\r\n    },\r\n    clearedUsers: state => {\r\n      usersAdapter.removeAll(state);\r\n      state.state = 'idle';\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    // * fetchUsersByRooms\r\n    [fetchUsersByRoom.pending]: usersAdapter.removeAll,\r\n    [fetchUsersByRoom.fulfilled]: (state, action) => {\r\n      usersAdapter.setAll(state, action);\r\n      state.state = 'done';\r\n    },\r\n    [fetchUsersByRoom.rejected]: state => {\r\n      state.state = 'done';\r\n    },\r\n  },\r\n});\r\n\r\nexport default usersSlice.reducer;\r\n\r\nexport const { userAdded, userRemoved, userChanged, clearedUsers } = usersSlice.actions;\r\n\r\nexport const {\r\n  selectById: selectUserById,\r\n  selectIds: selectUsersIds,\r\n  selectAll: selectAllUsers,\r\n} = usersAdapter.getSelectors(state => state.users);\r\n\r\nconst AGENT_ROLES = ['A1', 'A2'],\r\n  AGENT_LABEL = '# AGENTES',\r\n  STAFF_LABEL = '# STAFF';\r\n\r\nexport const getGroupedUsers = createSelector(\r\n  state => state.users.entities,\r\n  userEntities => {\r\n    const users = Object.values(userEntities);\r\n    const usersCount = users.length;\r\n    const firstAgentIndex = users.findIndex(({ role }) => AGENT_ROLES.includes(role));\r\n    const firstStaffIndex = users.findIndex(({ role }) => !AGENT_ROLES.includes(role));\r\n    let modif = 0;\r\n    if (firstStaffIndex >= 0) {\r\n      users.splice(firstStaffIndex, 0, { label: STAFF_LABEL });\r\n      modif++;\r\n    }\r\n    if (firstAgentIndex >= 0) users.splice(firstAgentIndex + modif, 0, { label: AGENT_LABEL });\r\n    return [users, usersCount];\r\n  }\r\n);\r\n","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getActiveRoom } from '../features/rooms/roomsSlice';\r\nimport { fetchInitialMessages, clearedForm } from '../features/messages/messagesSlice';\r\nimport { fetchFilteredMessages } from '../features/messages/filteredMessagesSlice';\r\nimport { fetchUsersByRoom } from '../features/users/usersSlice';\r\nimport { removedMessageNotif } from '../features/notifications/notifSlice';\r\n\r\nfunction useRoomChange() {\r\n  const dispatch = useDispatch();\r\n  const activeRoom = useSelector(getActiveRoom);\r\n  const filter = useSelector(state => state.filteredMessages.filter);\r\n  useEffect(() => {\r\n    if (activeRoom) {\r\n      dispatch(clearedForm());\r\n      dispatch(fetchInitialMessages());\r\n      if (filter !== '') dispatch(fetchFilteredMessages());\r\n      dispatch(fetchUsersByRoom());\r\n      dispatch(removedMessageNotif({ roomId: activeRoom?.roomId, type: activeRoom?.type }));\r\n    }\r\n    //eslint-disable-next-line\r\n  }, [activeRoom, dispatch]);\r\n\r\n  return activeRoom;\r\n}\r\n\r\nexport default useRoomChange;\r\n","import { useState, useEffect } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst MAX_MSG_LENGTH = 300;\r\n\r\nfunction CharacterCounter({ messageLength, className }) {\r\n  const [isNearLimit, setIsNearLimit] = useState(MAX_MSG_LENGTH - messageLength <= 20);\r\n\r\n  useEffect(() => {\r\n    setIsNearLimit(MAX_MSG_LENGTH - messageLength <= 20);\r\n  }, [messageLength]);\r\n\r\n  return (\r\n    <Fade in={isNearLimit} className={className}>\r\n      <Box>\r\n        <CircularProgress thickness={4} size={22} variant='determinate' value={messageLength / 3} />\r\n        <Typography variant='caption'>{MAX_MSG_LENGTH - messageLength}</Typography>\r\n      </Box>\r\n    </Fade>\r\n  );\r\n}\r\n\r\nexport default CharacterCounter;\r\n","import React from 'react';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Box from '@material-ui/core/Box';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\n\r\nconst titles = {\r\n  online: '@Online',\r\n  labels: '#Etiquetas',\r\n};\r\n\r\nfunction ExtraBox({\r\n  type,\r\n  active,\r\n  search,\r\n  content,\r\n  onClick,\r\n  containerStyle,\r\n  subheaderStyle,\r\n  close,\r\n}) {\r\n  function getFilteredContent() {\r\n    const filteredContent = search\r\n      ? content.filter(elem => elem.name.toLowerCase().includes(search.toLowerCase()))\r\n      : content;\r\n    return filteredContent.length !== 0 ? (\r\n      filteredContent.map(elem => (\r\n        <ListItem\r\n          key={elem.login || elem.tag}\r\n          onClick={() => onClick(type, elem)}\r\n          component='li'\r\n          button\r\n        >\r\n          <ListItemText primary={elem.name} />\r\n        </ListItem>\r\n      ))\r\n    ) : (\r\n      <ListItem component='li'>\r\n        <ListItemText primary='Ningún resultado' />\r\n      </ListItem>\r\n    );\r\n  }\r\n\r\n  if (!active) return null;\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={close}>\r\n      <Grow in={active} className={containerStyle} component={Box}>\r\n        <List\r\n          disablePadding\r\n          subheader={\r\n            <ListSubheader className={subheaderStyle} color='primary'>\r\n              {titles[type]}\r\n            </ListSubheader>\r\n          }\r\n        >\r\n          {getFilteredContent()}\r\n        </List>\r\n      </Grow>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nexport default React.memo(ExtraBox);\r\n","import Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { selectMessageById, removedQuote } from '../../../../features/messages/messagesSlice';\r\n\r\nfunction Quote({ className, quoteId }) {\r\n  const dispatch = useDispatch();\r\n  const quote = useSelector(state => selectMessageById(state, quoteId));\r\n\r\n  function onRemoveQuote() {\r\n    dispatch(removedQuote());\r\n  }\r\n\r\n  return (\r\n    <Collapse in={Boolean(quote)}>\r\n      <Box className={className}>\r\n        <Typography variant='body2' color='textSecondary'>\r\n          En respuesta a {<span className='quote-name'>{quote?.name}</span>}:\r\n        </Typography>\r\n        <Typography variant='body2' color='textSecondary'>\r\n          {quote?.message}\r\n        </Typography>\r\n        <IconButton size='small' onClick={onRemoveQuote}>\r\n          <CancelIcon fontSize='small' />\r\n        </IconButton>\r\n      </Box>\r\n    </Collapse>\r\n  );\r\n}\r\n\r\nexport default Quote;\r\n","import Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Cancel from '@material-ui/icons/Cancel';\r\nimport Online from '@material-ui/icons/AlternateEmail';\r\nimport Label from '@material-ui/icons/Label';\r\n\r\nfunction MessageInfo({ mention, removeMention, labels, removeLabel, className }) {\r\n  if (!mention && labels.length === 0) return null;\r\n\r\n  return (\r\n    <Box className={className}>\r\n      {mention && (\r\n        <Chip\r\n          color='secondary'\r\n          label={mention.name}\r\n          onDelete={removeMention}\r\n          deleteIcon={<Cancel />}\r\n          icon={<Online />}\r\n        />\r\n      )}\r\n      {labels.map(label => (\r\n        <Chip\r\n          key={label.tag}\r\n          label={label.name}\r\n          onClick={() => {}}\r\n          onDelete={() => removeLabel(label)}\r\n          deleteIcon={<Cancel />}\r\n          icon={<Label />}\r\n        />\r\n      ))}\r\n    </Box>\r\n  );\r\n}\r\nexport default MessageInfo;\r\n","import { useRef, useState, useEffect } from 'react';\r\nimport { inputStyles } from '../../../js/styles';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CharacterCounter from './CharacterCounter';\r\nimport { selectAllUsers } from '../../../features/users/usersSlice';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  addedMention,\r\n  addedLabel,\r\n  removedLabel,\r\n  removedMention,\r\n  getMessageData,\r\n} from '../../../features/messages/messagesSlice';\r\nimport { sendMessage } from '../../../middleware/socket.io/socket.actions';\r\nimport ExtraBox from './ExtraBox';\r\nimport Quote from './Quote';\r\nimport MessageInfo from './MessageInfo';\r\n\r\nconst labelChar = '#',\r\n  userChar = '@';\r\nconst initialBoxState = { active: false, charPos: undefined, search: '' };\r\n\r\nfunction getBoxParams(inputValue) {\r\n  const lastPos = inputValue.length - 1;\r\n  const lastLetter = inputValue[lastPos] || '';\r\n  const isValid = !inputValue[lastPos - 1] || inputValue[lastPos - 1] === ' ';\r\n  const shouldOpenOnline = isValid && lastLetter === userChar;\r\n  const shouldOpenLabels = isValid && lastLetter === labelChar;\r\n  return { lastPos, shouldOpenOnline, shouldOpenLabels };\r\n}\r\n\r\nconst MAX_MSG_LENGTH = 300;\r\n\r\nfunction Input() {\r\n  const {\r\n    root,\r\n    extraContainer,\r\n    extraSubheader,\r\n    infoBox,\r\n    quote,\r\n    inputForm,\r\n    buttonSend,\r\n    characterCounter,\r\n    innerContainer,\r\n  } = inputStyles();\r\n  const [input, setInput] = useState('');\r\n  const inputRef = useRef();\r\n  const onlineUsers = useSelector(selectAllUsers);\r\n  const dispatch = useDispatch();\r\n  const [quoteId, mention, labels] = useSelector(getMessageData);\r\n  const [activeRoomId, activeRoom] = useSelector(state => [\r\n    state.rooms.active,\r\n    state.rooms.entities[state.rooms.active]?.role,\r\n  ]);\r\n  // Estado para los cajones de usuarios conectados y etiquetas\r\n  const [onlineBox, setOnlineBox] = useState(initialBoxState);\r\n  const [labelsBox, setLabelsBox] = useState(initialBoxState);\r\n  const removeMention = () => dispatch(removedMention());\r\n  const removeLabel = labelToRemove => dispatch(removedLabel(labelToRemove));\r\n\r\n  const onChange = ({ target: { value } }) => {\r\n    if (value.length > MAX_MSG_LENGTH) return;\r\n    const { lastPos, shouldOpenOnline, shouldOpenLabels } = getBoxParams(value);\r\n    if (!onlineBox.active && !labelsBox.online && shouldOpenOnline) {\r\n      setOnlineBox({ active: true, search: '', charPos: lastPos });\r\n    }\r\n    if (!labelsBox.active && !onlineBox.active && shouldOpenLabels) {\r\n      setLabelsBox({ active: true, search: '', charPos: lastPos });\r\n    }\r\n    setInput(value);\r\n    if (onlineBox.active) {\r\n      setOnlineBox(prev =>\r\n        value[onlineBox.charPos] !== userChar\r\n          ? { ...prev, active: false }\r\n          : { ...prev, search: value.slice(prev.charPos + 1) }\r\n      );\r\n    }\r\n    if (labelsBox.active) {\r\n      setLabelsBox(prev =>\r\n        value[labelsBox.charPos] !== labelChar\r\n          ? { ...prev, active: false }\r\n          : { ...prev, search: value.slice(prev.charPos + 1) }\r\n      );\r\n    }\r\n  };\r\n\r\n  const onExtraBoxItemSelected = (origin, item) => {\r\n    const isOnline = origin === 'online';\r\n    isOnline\r\n      ? setOnlineBox(prev => ({ ...prev, active: false }))\r\n      : setLabelsBox(prev => ({ ...prev, active: false }));\r\n    setInput(prev => prev.slice(0, isOnline ? onlineBox.charPos : labelsBox.charPos));\r\n    isOnline ? dispatch(addedMention(item)) : dispatch(addedLabel(item));\r\n  };\r\n\r\n  const onKeyPress = e => {\r\n    if (e.ctrlKey && e.code === 'NumpadEnter' && e.target.value) {\r\n      setInput(input + '\\n');\r\n    }\r\n    if (!e.ctrlKey) {\r\n      if ((e.code === 'Enter' && e.target.value) || (e.code === 'NumpadEnter' && e.target.value)) {\r\n        e.preventDefault();\r\n        onSendMessage();\r\n      }\r\n    }\r\n  };\r\n\r\n  function onSendMessage() {\r\n    if (!input) return;\r\n    const messageData = {\r\n      message: input,\r\n      receiver: mention?.login,\r\n      labels: labels.map(l => l.tag).join(),\r\n    };\r\n    if (quoteId) messageData.previousId = quoteId;\r\n    dispatch(sendMessage(messageData));\r\n    setInput('');\r\n  }\r\n\r\n  useEffect(() => {\r\n    if ([mention, labels, quoteId].some(Boolean)) inputRef.current?.focus();\r\n  }, [mention, labels, quoteId]);\r\n\r\n  if ((activeRoomId === 10617 || activeRoomId === 12325) && !activeRoom?.canSendRelease)\r\n    return null;\r\n\r\n  return (\r\n    <Box className={root} component=\"form\">\r\n      <Quote className={quote} quoteId={quoteId} />\r\n      <Box className={innerContainer}>\r\n        <FormControl fullWidth className={inputForm}>\r\n          <TextField\r\n            inputRef={inputRef}\r\n            id=\"outlined-multiline-static\"\r\n            placeholder=\"Escribe un mensaje aquí\"\r\n            variant=\"outlined\"\r\n            onKeyPress={onKeyPress}\r\n            rows={2}\r\n            value={input}\r\n            onChange={onChange}\r\n            multiline\r\n          />\r\n        </FormControl>\r\n        <CharacterCounter messageLength={input.length} className={characterCounter} />\r\n        <IconButton size=\"small\" className={buttonSend} disabled={!input} onClick={onSendMessage}>\r\n          <SendIcon fontSize=\"large\" />\r\n        </IconButton>\r\n      </Box>\r\n      {activeRoom?.canAnswerMention && (\r\n        <ExtraBox\r\n          type=\"online\"\r\n          active={!mention && onlineBox.active}\r\n          search={onlineBox.search}\r\n          content={onlineUsers}\r\n          onClick={onExtraBoxItemSelected}\r\n          containerStyle={extraContainer}\r\n          subheaderStyle={extraSubheader}\r\n          close={() => setOnlineBox(prev => ({ ...prev, active: false }))}\r\n        />\r\n      )}\r\n      <MessageInfo\r\n        labels={labels}\r\n        mention={mention}\r\n        removeMention={removeMention}\r\n        removeLabel={removeLabel}\r\n        className={infoBox}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Input;\r\n","import { useDispatch } from 'react-redux';\r\nimport { addedMention } from '../../../../features/messages/messagesSlice';\r\n\r\nimport {\r\n  ListItem, ListItemText, Avatar,\r\n} from '@material-ui/core';\r\n\r\n\r\n\r\nfunction UserItem({ role, user, className, onUserContextMenu }) {\r\n\r\n  console.log(\"User: \", user)\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onClick = () => {\r\n    role.canAnswerMention && dispatch(addedMention(user));\r\n  };\r\n\r\n  const handleContextMenu = e => {\r\n    e.preventDefault();\r\n    const { clientX: x, clientY: y } = e;\r\n    onUserContextMenu({ x, y }, user);\r\n  };\r\n\r\n  function getCapitalLetters(string) {\r\n    if(!string){return null}\r\n    let letter = '';\r\n    const array = string.split(' ');\r\n    array.forEach(element => {\r\n      if (element.length > 3 && letter.length < 2) {\r\n        letter += element.charAt(0);\r\n      }\r\n    });\r\n    return letter.toUpperCase();\r\n  }\r\n\r\n  return (\r\n    <ListItem\r\n      button\r\n      divider\r\n      className={className}\r\n      onClick={onClick}\r\n      onContextMenu={handleContextMenu}\r\n    >\r\n      <Avatar style={{marginRight: '5px'}}>{getCapitalLetters(user.name)}</Avatar>&nbsp;\r\n      \r\n      <ListItemText primary={user.name} />\r\n\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default UserItem;\r\n","import ListItem from '@material-ui/core/ListItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nconst UserLabel = ({ label }) => (\r\n  <>\r\n    <ListSubheader>{label}</ListSubheader>\r\n    <Divider />\r\n  </>\r\n);\r\n\r\nconst NoResultsPlaceholder = () => (\r\n  <>\r\n    <Divider />\r\n    <ListItem>\r\n      <ListItemText primary='No hay resultados' />\r\n    </ListItem>\r\n    <Divider />\r\n  </>\r\n);\r\n\r\nconst NoUsersConnectedPlaceholder = () => (\r\n  <ListItem>\r\n    <ListItemText primary='Ningún usuario conectado' />\r\n  </ListItem>\r\n);\r\n\r\nexport { UserLabel, NoResultsPlaceholder, NoUsersConnectedPlaceholder };\r\n","import { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { getUserContextOptions } from '../../../js/examples';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { sendPrivateRoom } from '../../../middleware/socket.io/socket.actions';\r\nimport { addedMention } from '../../../features/messages/messagesSlice';\r\nimport { getActiveRole } from '../../../features/rooms/roomsSlice';\r\n\r\nconst initialState = {\r\n  user: null,\r\n  x: null,\r\n  y: null,\r\n};\r\n\r\nconst UsersContextMenu = forwardRef((_,ref) => {\r\n  const dispatch = useDispatch();\r\n  const [menu, setMenu] = useState(initialState);\r\n  const role = useSelector(getActiveRole);\r\n  const open = (pos, user) => setMenu({ user, x: pos.x, y: pos.y });\r\n  const close = () => setMenu(initialState);\r\n  useImperativeHandle(ref, () => open);\r\n\r\n  const contextOptions = useMemo(() => getUserContextOptions(role, menu?.user), [role, menu?.user]);\r\n\r\n  const onItemSelected = action => {\r\n    console.log('Menu contextual en lista de usuarios');\r\n    switch (action) {\r\n      case 'mention':\r\n        const { login, name } = menu.user;\r\n        dispatch(addedMention({ login, name }));\r\n        break;\r\n      case 'private':\r\n        dispatch(sendPrivateRoom({ guestLogin: menu?.user?.login }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    close();\r\n  };\r\n\r\n  const isOpened = menu.user?.login !== null && menu.x !== null && menu.y !== null;\r\n  const position = menu.y !== null && menu.x !== null ? { top: menu.y, left: menu.x } : undefined;\r\n\r\n  return (\r\n    <Menu\r\n      keepMounted\r\n      id='messages-context-menu'\r\n      anchorReference='anchorPosition'\r\n      onClose={close}\r\n      open={isOpened}\r\n      anchorPosition={position}\r\n    >\r\n      {contextOptions.map(option => (\r\n        <MenuItem key={option.action} onClick={() => onItemSelected(option.action)}>\r\n          <ListItemIcon>{option.icon}</ListItemIcon>\r\n          <Typography variant='inherit'>{option.name}</Typography>\r\n        </MenuItem>\r\n      ))}\r\n    </Menu>\r\n  );\r\n});\r\n\r\nexport default UsersContextMenu;\r\n","import { useState, useRef } from 'react';\r\nimport UserItem from './UserItem';\r\nimport { usersListStyles } from '../../../js/styles';\r\nimport { useSelector } from 'react-redux';\r\nimport { getGroupedUsers } from '../../../features/users/usersSlice';\r\nimport { getActiveRole } from '../../../features/rooms/roomsSlice';\r\nimport { UserLabel, NoResultsPlaceholder, NoUsersConnectedPlaceholder } from './Placeholders';\r\nimport UsersContextMenu from '../UsersContextMenu';\r\n\r\nimport { Card, CardContent, CardHeader, List, OutlinedInput, InputAdornment, useMediaQuery } from '@material-ui/core';\r\n\r\n\r\nimport {\r\n  SearchOutlined,\r\n} from '@material-ui/icons';\r\n\r\n\r\n\r\n\r\nconst filterUsers = ({ label, name }, search) => !!label || name.includes(search.toLowerCase());\r\n\r\nfunction UserList() {\r\n  const { root, header, content, list, item, searchBox } = usersListStyles();\r\n  const usersContextMenuRef = useRef();\r\n  const [groupedUsers, usersCount] = useSelector(getGroupedUsers);\r\n  const role = useSelector(getActiveRole);\r\n  const [search, setSearch] = useState('');\r\n  const onSearchChange = ({ target: { value } }) => setSearch(value);\r\n  const isSmallScreen = useMediaQuery(theme => theme.breakpoints.down('md'));\r\n\r\n  function onUserContextMenu(position, user) {\r\n    const openContextMenu = usersContextMenuRef.current;\r\n    if (openContextMenu instanceof Function) openContextMenu(position, user);\r\n  }\r\n\r\n  const getFilteredUsers = () => {\r\n    const finalUsers = search ? groupedUsers.filter(u => filterUsers(u, search)) : groupedUsers;\r\n    if (usersCount === 0) return <NoResultsPlaceholder />;\r\n    return finalUsers.map(user =>\r\n      user.label ? (\r\n        <UserLabel key={user.label} label={user.label} />\r\n      ) : (\r\n        <UserItem\r\n          key={user.login}\r\n          user={user}\r\n          role={role}\r\n          className={item}\r\n          onUserContextMenu={onUserContextMenu}\r\n        />\r\n      )\r\n    );\r\n  };\r\n\r\n  if (isSmallScreen) return null;\r\n\r\n  return (\r\n    <>\r\n      <Card elevation={0} raised className={root}>\r\n        <CardHeader className={header} title={`Online: ${usersCount}`} />\r\n        <CardContent className={content}>\r\n          <OutlinedInput\r\n            className={searchBox}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            value={search}\r\n            onChange={onSearchChange}\r\n            placeholder=\"Buscar usuarios...\"\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <SearchOutlined />\r\n              </InputAdornment>\r\n            }\r\n          />\r\n          <List disablePadding className={list}>\r\n            {usersCount === 0 ? <NoUsersConnectedPlaceholder /> : getFilteredUsers()}\r\n          </List>\r\n        </CardContent>\r\n      </Card>\r\n      <UsersContextMenu ref={usersContextMenuRef} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserList;\r\n","import { useEffect, useState, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updatedLastMessagesCount, fetchNextMessages } from '../features/messages/messagesSlice';\r\n\r\nconst FIRST_ITEM_INDEX = 5000;\r\nconst MESSAGE_FETCH_COUNT = 100;\r\n\r\nfunction useVirtuosoPrepend(actualMessageCount) {\r\n  const dispatch = useDispatch();\r\n  const [firstItemIndex, setFirstItemIndex] = useState(FIRST_ITEM_INDEX);\r\n  const lastMessagesCount = useSelector(state => state.messages.lastMessagesCount);\r\n\r\n  const prependItems = useCallback(() => {\r\n    if (actualMessageCount < MESSAGE_FETCH_COUNT || lastMessagesCount === -1) return;\r\n    dispatch(fetchNextMessages());\r\n  }, [dispatch, actualMessageCount, lastMessagesCount]);\r\n\r\n  useEffect(() => {\r\n    if (lastMessagesCount === 0) return setFirstItemIndex(FIRST_ITEM_INDEX);\r\n    setFirstItemIndex(prev => prev - lastMessagesCount);\r\n    if (lastMessagesCount > 0 && lastMessagesCount < 100) dispatch(updatedLastMessagesCount(-1));\r\n  }, [lastMessagesCount, dispatch]);\r\n\r\n  return [firstItemIndex, prependItems];\r\n}\r\n\r\nexport default useVirtuosoPrepend;\r\n","import ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport { defaultAvatar } from '../../../js/avatars';\r\nimport Avataaar from 'avataaars';\r\n\r\nconst avatarPlaceholderStyle = {\r\n  minWidth: 56,\r\n  height: 56,\r\n  marginRight: 16,\r\n  borderRadius: '50%',\r\n  backgroundColor: '#cecece75',\r\n};\r\n\r\nfunction Avatar({ className, avatar, isScrolling = false }) {\r\n  const finalAvatar = avatar === 'Default' ? defaultAvatar : avatar;\r\n\r\n  return isScrolling ? (\r\n    <div className='avatar-placeholder' style={avatarPlaceholderStyle} />\r\n  ) : (\r\n    <ListItemAvatar className={className}>\r\n      <Avataaar {...finalAvatar} avatarStyle={'Transparent'} />\r\n    </ListItemAvatar>\r\n  );\r\n}\r\n\r\nexport default Avatar;\r\n","// En los mensajes de Calio se trabaja con el formato ISOString: \"2021-06-28T09:15:20.000Z\"\r\n\r\n/**\r\n * Devuelve el tiempo: `horas:minutos:segundos`\r\n * @param {string} isoString\r\n * @returns {string}\r\n */\r\nexport const getHourTime = isoString => {\r\n  const date = new Date(isoString);\r\n  return date?.toLocaleTimeString();\r\n};\r\n\r\n/**\r\n * Devuelve el tiempo: `día/mes/año horas:minutos:segundos`\r\n * @param {string} isoString\r\n * @returns {string}\r\n */\r\nexport const getFullTime = isoString => {\r\n  const date = new Date(isoString);\r\n  return date.toLocaleString();\r\n};\r\n\r\n/**\r\n * Devuelve el tiempo para un mensaje en función del tipo de sala\r\n * @param {string} isoString\r\n * @param {string} roomType\r\n * @returns {string}\r\n */\r\nexport const getMessageTime = (isoString, roomType) => {\r\n  const isCommonRoom = roomType === 'COMUN';\r\n  return isCommonRoom ? getFullTime(isoString) : getHourTime(isoString);\r\n};\r\n","import Typography from '@material-ui/core/Typography';\r\nimport { getMessageTime } from '../../../../js/dates';\r\n\r\nfunction Primary({ name, date, roomType }) {\r\n  return (\r\n    <>\r\n      <Typography component='span' variant='h6' color='textPrimary'>\r\n        {name}\r\n      </Typography>\r\n      <Typography component='span' variant='body2' color='textPrimary'>\r\n        &nbsp;&nbsp;•&nbsp;&nbsp;\r\n        {getMessageTime(date, roomType)}h\r\n      </Typography>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Primary;\r\n","import Link from '@material-ui/core/Link';\r\n\r\nfunction Secondary({ id, receiver, compoundMessage, getMentionName }) {\r\n  return (\r\n    <>\r\n      {receiver ? `@${getMentionName(receiver)}: ` : ''}\r\n      {compoundMessage.map(({ type, value }, index) =>\r\n        type === 'text' ? (\r\n          value\r\n        ) : (\r\n          <Link\r\n            key={`${id}-${index}`}\r\n            href={value}\r\n            color='primary'\r\n            rel='noreferrer'\r\n            target='_blank'\r\n          >\r\n            {value}\r\n          </Link>\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Secondary;\r\n","import React from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { messageStyles } from '../../../js/styles';\r\nimport safeParse from '../../../js/safeParse';\r\nimport { selectMessageById } from '../../../features/messages/messagesSlice';\r\nimport { selectUserById } from '../../../features/users/usersSlice';\r\nimport Avatar from '../Avatar';\r\nimport Primary from './Primary';\r\nimport Secondary from './Secondary';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst estiloCursor = { cursor: 'pointer' };\r\n\r\nconst Message = ({ id, isScrolling, onContextMenu, onDoubleClick }) => {\r\n  const styles = messageStyles();\r\n  const message = useSelector(state => selectMessageById(state, id));\r\n  const [login, profileName, roomType] = useSelector(state => [\r\n    state.auth.login,\r\n    state.auth.name.toLowerCase(),\r\n    state.rooms.entities[message?.roomId]?.type,\r\n  ]);\r\n  const receiverUser = useSelector(state => selectUserById(state, message?.receiver)) || '';\r\n\r\n  if (!message) return null;\r\n\r\n  const handleContextMenu = e => {\r\n    e.preventDefault();\r\n    const { clientX: x, clientY: y } = e;\r\n    const { messageId, emitter, name, role, lastState, stateLOGIN } = message;\r\n    onContextMenu({ x, y }, { messageId, login: emitter, name, role, lastState, stateLOGIN });\r\n  };\r\n\r\n  const getStyleFromState = () => {\r\n    const { lastState } = message;\r\n    if (lastState === 3) return styles.assigned;\r\n    if (lastState === 4) return styles.answered;\r\n    return '';\r\n  };\r\n\r\n  const getMentionName = mentionLogin =>\r\n  mentionLogin === login ? profileName : receiverUser?.name || mentionLogin;\r\n  const getStyleFromEmitter = () => (message.emitter === login ? styles.mine : '');\r\n  const avatar = safeParse(message.avatar, message.avatar);\r\n\r\n  return (\r\n    <ListItem\r\n      divider\r\n      alignItems=\"center\"\r\n      id={message.messageId}\r\n      className={`${styles.root} ${getStyleFromState()} ${getStyleFromEmitter()}`}\r\n      onContextMenu={handleContextMenu}\r\n    >\r\n      <Box style={estiloCursor}>\r\n        <Avatar className={styles.avatar} avatar={avatar} isScrolling={isScrolling} />\r\n      </Box>\r\n      <Box\r\n        onDoubleClick={() => onDoubleClick(message.emitter, message.messageId, message.lastState)}\r\n        style={estiloCursor}\r\n      >\r\n        <ListItemText\r\n          className={styles.text}\r\n          primary={<Primary name={message.name} date={message.date} roomType={roomType} />}\r\n          secondary={\r\n            <Secondary\r\n              id={message.messageId}\r\n              receiver={message.receiver}\r\n              compoundMessage={message.compoundText}\r\n              getMentionName={getMentionName}\r\n            />\r\n          }\r\n        />\r\n        {message.previousId && (\r\n          <Box className={styles.quote}>\r\n            <Typography component=\"h6\" variant=\"subtitle2\" color=\"textPrimary\">\r\n              en respuesta a {<span className=\"quote-user\">{message.previousUserName}</span>}:\r\n            </Typography>\r\n            <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\r\n              {message.previousMessage}\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n        {message.labels && (\r\n          <Box className={styles.labelContainer}>\r\n            {message.labels.split(',').map(label => (\r\n              <Chip key={label} label={label.trim().toUpperCase()} size=\"small\" />\r\n            ))}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default React.memo(Message);\r\n","import Typography from '@material-ui/core/Typography';\r\nimport { getMessageTime } from '../../../../js/dates';\r\n\r\nfunction Primary({ name, date, roomType }) {\r\n  return (\r\n    <>\r\n      <Typography component='span' variant='h6' color='textPrimary'>\r\n        {name}\r\n      </Typography>\r\n      <Typography component='span' variant='body2' color='textPrimary'>\r\n        &nbsp;&nbsp;•&nbsp;&nbsp;\r\n        {getMessageTime(date, roomType)}h\r\n      </Typography>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Primary;\r\n","import Link from '@material-ui/core/Link';\r\n\r\nfunction Secondary({ id, receiver, compoundMessage, getMentionName }) {\r\n  return (\r\n    <>\r\n      {receiver ? `@${getMentionName(receiver)}: ` : ''}\r\n      {compoundMessage.map(({ type, value }, index) =>\r\n        type === 'text' ? (\r\n          value\r\n        ) : (\r\n          <Link\r\n            key={`${id}-${index}`}\r\n            href={value}\r\n            color='primary'\r\n            rel='noreferrer'\r\n            target='_blank'\r\n          >\r\n            {value}\r\n          </Link>\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Secondary;\r\n","import React from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { messageStyles } from '../../../js/styles';\r\nimport safeParse from '../../../js/safeParse';\r\nimport { selectFilteredMessageById } from '../../../features/messages/filteredMessagesSlice';\r\nimport { selectUserById } from '../../../features/users/usersSlice';\r\nimport Avatar from '../Avatar';\r\nimport Primary from './Primary';\r\nimport Secondary from './Secondary';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst estiloCursor = { cursor: 'pointer' };\r\n\r\nconst FilteredMessage = ({\r\n  id,\r\n  isScrolling,\r\n  onContextMenu,\r\n  onDoubleClick,\r\n}) => {\r\n  const styles = messageStyles();\r\n  const message = useSelector(state => selectFilteredMessageById(state, id));\r\n  const [login, profileName, roomType] = useSelector(state => [\r\n    state.auth.login,\r\n    state.auth.name.toLowerCase(),\r\n    state.rooms.entities[message?.roomId]?.type,\r\n  ]);\r\n  const receiverUser = useSelector(state => selectUserById(state, message?.receiver)) || '';\r\n\r\n  if (!message) return null;\r\n\r\n  const handleContextMenu = e => {\r\n    e.preventDefault();\r\n    const { clientX: x, clientY: y } = e;\r\n    const { messageId, emitter, name, role, lastState, stateLOGIN } = message;\r\n    onContextMenu({ x, y }, { messageId, login: emitter, name, role, lastState, stateLOGIN });\r\n  };\r\n\r\n  const getStyleFromState = () => {\r\n    const { lastState } = message;\r\n    if (lastState === 3) return styles.assigned;\r\n    if (lastState === 4) return styles.answered;\r\n    return '';\r\n  };\r\n\r\n  const getMentionName = mentionLogin =>\r\n  mentionLogin === login ? profileName : receiverUser?.name || mentionLogin;\r\n  const getStyleFromEmitter = () => (message.emitter === login ? styles.mine : '');\r\n  const avatar = safeParse(message.avatar, message.avatar);\r\n\r\n  return (\r\n    <ListItem\r\n      divider\r\n      alignItems=\"center\"\r\n      id={message.messageId}\r\n      className={`${styles.root} ${getStyleFromState()} ${getStyleFromEmitter()}`}\r\n      onContextMenu={handleContextMenu}\r\n    >\r\n      <Box style={estiloCursor}>\r\n        <Avatar className={styles.avatar} avatar={avatar} isScrolling={isScrolling} />\r\n      </Box>\r\n      <Box\r\n        onDoubleClick={() => onDoubleClick(message.emitter, message.messageId, message.lastState)}\r\n        style={estiloCursor}\r\n      >\r\n        <ListItemText\r\n          className={styles.text}\r\n          primary={<Primary name={message.name} date={message.date} roomType={roomType} />}\r\n          secondary={\r\n            <Secondary\r\n              id={message.messageId}\r\n              receiver={message.receiver}\r\n              compoundMessage={message.compoundText}\r\n              getMentionName={getMentionName}\r\n            />\r\n          }\r\n        />\r\n        {message.previousId && (\r\n          <Box className={styles.quote}>\r\n            <Typography component=\"h6\" variant=\"subtitle2\" color=\"textPrimary\">\r\n              en respuesta a {<span className=\"quote-user\">{message.previousUserName}</span>}:\r\n            </Typography>\r\n            <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\r\n              {message.previousMessage}\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n        {message.labels && (\r\n          <Box className={styles.labelContainer}>\r\n            {message.labels.split(',').map(label => (\r\n              <Chip key={label} label={label.trim().toUpperCase()} size=\"small\" />\r\n            ))}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default React.memo(FilteredMessage);\r\n","import { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { getMessageContextOptions } from '../../../js/examples';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { sendStateChange, sendPrivateRoom } from '../../../middleware/socket.io/socket.actions';\r\nimport { addedQuote, addedMention } from '../../../features/messages/messagesSlice';\r\nimport { getActiveRole } from '../../../features/rooms/roomsSlice';\r\n\r\nconst initialState = {\r\n  message: null,\r\n  x: null,\r\n  y: null,\r\n};\r\n\r\nconst MessagesContextMenu = forwardRef((_, ref) => {\r\n  const dispatch = useDispatch();\r\n  const [menu, setMenu] = useState(initialState);\r\n  const user = useSelector(state => state.auth);\r\n  const role = useSelector(getActiveRole);\r\n  const open = (pos, message) => {\r\n    ((message.role !== 'A1' && message.role !== 'A2') || role !== 'A1') &&\r\n      setMenu({ message, x: pos.x, y: pos.y });\r\n  };\r\n\r\n  const close = () => setMenu(initialState);\r\n  useImperativeHandle(ref, () => open);\r\n\r\n  const contextOptions = useMemo(() => getMessageContextOptions(role, menu?.message, user.login), \r\n  //eslint-disable-next-line\r\n  [role,menu?.message,]);\r\n\r\n  const onItemSelected = action => {\r\n    switch (action) {\r\n      case 'answer':\r\n        dispatch(addedQuote(menu?.message?.messageId));\r\n        break;\r\n      case 'mention':\r\n        const { login, name } = menu.message;\r\n        dispatch(addedMention({ login, name }));\r\n        break;\r\n      case 'assign':\r\n        dispatch(sendStateChange({ messageId: menu?.message?.messageId, stateId: 3 }));\r\n        break;\r\n      case 'unassign':\r\n        dispatch(sendStateChange({ messageId: menu?.message?.messageId, stateId: 5 }));\r\n        break;\r\n      case 'private':\r\n        dispatch(sendPrivateRoom({ guestLogin: menu?.message?.login }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    close();\r\n  };\r\n\r\n  const isOpened = menu.message?.messageId !== null && menu.x !== null && menu.y !== null;\r\n  const position = menu.y !== null && menu.x !== null ? { top: menu.y, left: menu.x } : undefined;\r\n\r\n  return (\r\n    <Menu\r\n      keepMounted\r\n      id=\"messages-context-menu\"\r\n      anchorReference=\"anchorPosition\"\r\n      onClose={close}\r\n      open={isOpened}\r\n      anchorPosition={position}\r\n    >\r\n      {contextOptions.map(option => (\r\n        <MenuItem key={option.action} onClick={() => onItemSelected(option.action)}>\r\n          <ListItemIcon>{option.icon}</ListItemIcon>\r\n          <Typography variant=\"inherit\">{option.name}</Typography>\r\n        </MenuItem>\r\n      ))}\r\n    </Menu>\r\n  );\r\n});\r\n\r\nexport default MessagesContextMenu;\r\n","import IconButton from '@material-ui/core/IconButton';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport ArrowDropDown from '@material-ui/icons/ArrowDropDown';\r\n\r\nfunction ScrollButton(props) {\r\n  const { anchored, onClick, className } = props;\r\n\r\n  return (\r\n    <Grow in={!anchored}>\r\n      <Tooltip title=\"Ir abajo\" placement=\"top\" arrow>\r\n        <IconButton color=\"primary\" className={className} onClick={onClick}>\r\n          <ArrowDropDown />\r\n        </IconButton>\r\n      </Tooltip>\r\n    </Grow>\r\n  );\r\n}\r\n\r\nexport default ScrollButton;\r\n","import { useState, useRef, useCallback } from 'react';\r\nimport { Virtuoso } from 'react-virtuoso';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { selectMessageIds, addedQuote } from '../../../features/messages/messagesSlice';\r\nimport { selectFilteredMessageIds } from '../../../features/messages/filteredMessagesSlice';\r\nimport useVirtuosoPrepend from '../../../hooks/useVirtuosoPrepend';\r\nimport { getActiveRoom } from '../../../features/rooms/roomsSlice';\r\nimport Message from '../Message';\r\nimport FilteredMessage from '../FilteredMessage';\r\nimport MessageContextMenu from '../MessagesContextMenu';\r\nimport ScrollButton from '../ScrollButton';\r\nimport Box from '@material-ui/core/Box';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { virtuosoContainerStyles } from '../../../js/styles';\r\n\r\nconst scrollbarStyle = {\r\n  scrollbarWidth: 'thin',\r\n  scrollbarColor: '#ff7900 #dbdbdb',\r\n};\r\n\r\nconst VirtuosoContainer = ({ isFiltered }) => {\r\n  const contextMenuRef = useRef();\r\n  const virtuosoRef = useRef();\r\n  const [isScrolling, setIsScrolling] = useState(false);\r\n  const [isBottom, setIsBottom] = useState(false);\r\n  const activeRoom = useSelector(getActiveRoom);\r\n  const status = useSelector(state => state.messages.status);\r\n  const filteredStatus = useSelector(state => state.filteredMessages.status);\r\n  const messageIds = useSelector(selectMessageIds);\r\n  const filteredMessageIds = useSelector(selectFilteredMessageIds);\r\n  const login = useSelector(state => state.auth.login);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { root, scrollButton, loader } = virtuosoContainerStyles();\r\n  const [firstItemIndex, prependItems] = useVirtuosoPrepend(messageIds.length);\r\n  const [filteredFirstItemIndex, filteredPrependItems] = useVirtuosoPrepend(\r\n    filteredMessageIds.length\r\n  );\r\n\r\n  const scrollToBottom = useCallback(behavior => {\r\n    const scrollOptions = { behavior, align: 'start', index: Number.MAX_VALUE };\r\n    setTimeout(() => virtuosoRef?.current.scrollToIndex(scrollOptions));\r\n  }, []);\r\n\r\n  function onMessageContextMenu(position, message) {\r\n    if (activeRoom?.private || message.login === login) return;\r\n    const openContextMenu = contextMenuRef.current;\r\n    if (openContextMenu instanceof Function) {\r\n      openContextMenu(position, message);\r\n    }\r\n  }\r\n\r\n  function onMessageDoubleClick(messageLogin, messageId, state) {\r\n    if (!activeRoom?.role.canAnswerMention || messageLogin === login || state === 4) return;\r\n    dispatch(addedQuote(messageId));\r\n  }\r\n\r\n  const isLoading = status === 'loading';\r\n  const isFilteredLoading = filteredStatus === 'loading';\r\n\r\n  //Si la carga se realiza desde MessagesSlice\r\n  if (!isFiltered) {\r\n    if (messageIds.length === 0)\r\n      return (\r\n        <Box className={root}>\r\n          {isLoading && (\r\n            <CircularProgress\r\n              size={75}\r\n              variant=\"indeterminate\"\r\n              color=\"primary\"\r\n              className={loader}\r\n            />\r\n          )}\r\n        </Box>\r\n      );\r\n\r\n    return (\r\n      <Box className={root}>\r\n        {isLoading && (\r\n          <CircularProgress size={75} variant=\"indeterminate\" color=\"primary\" className={loader} />\r\n        )}\r\n        <Virtuoso\r\n          ref={virtuosoRef}\r\n          firstItemIndex={firstItemIndex}\r\n          initialTopMostItemIndex={messageIds.length - 1}\r\n          atBottomStateChange={setIsBottom}\r\n          startReached={prependItems}\r\n          isScrolling={setIsScrolling}\r\n          data={messageIds}\r\n          style={scrollbarStyle}\r\n          followOutput={isBottom ? 'smooth' : false}\r\n          itemContent={(_, messageId) => (\r\n            <Message\r\n              id={messageId}\r\n              onContextMenu={onMessageContextMenu}\r\n              onDoubleClick={onMessageDoubleClick}\r\n              isScrolling={isScrolling}\r\n            />\r\n          )}\r\n        />\r\n        <ScrollButton\r\n          anchored={isBottom}\r\n          onClick={() => scrollToBottom('smooth')}\r\n          className={scrollButton}\r\n        />\r\n        <MessageContextMenu ref={contextMenuRef} />\r\n      </Box>\r\n    );\r\n    //Si la carga se realiza desde FilteredMessagesSlice\r\n  } else if (isFiltered) {\r\n    if (filteredMessageIds.length === 0)\r\n      return (\r\n        <Box className={root}>\r\n          {isFilteredLoading && (\r\n            <CircularProgress\r\n              size={75}\r\n              variant=\"indeterminate\"\r\n              color=\"primary\"\r\n              className={loader}\r\n            />\r\n          )}\r\n        </Box>\r\n      );\r\n\r\n    return (\r\n      <Box className={root}>\r\n        {isFilteredLoading && (\r\n          <CircularProgress size={75} variant=\"indeterminate\" color=\"primary\" className={loader} />\r\n        )}\r\n        <Virtuoso\r\n          ref={virtuosoRef}\r\n          firstItemIndex={filteredFirstItemIndex}\r\n          initialTopMostItemIndex={filteredMessageIds.length - 1}\r\n          atBottomStateChange={setIsBottom}\r\n          startReached={filteredPrependItems}\r\n          isScrolling={setIsScrolling}\r\n          data={filteredMessageIds}\r\n          style={scrollbarStyle}\r\n          followOutput={isBottom ? 'smooth' : false}\r\n          itemContent={(_, messageId) => (\r\n            <FilteredMessage\r\n              id={messageId}\r\n              onContextMenu={onMessageContextMenu}\r\n              onDoubleClick={onMessageDoubleClick}\r\n              isScrolling={isScrolling}\r\n            />\r\n          )}\r\n        />\r\n        <ScrollButton\r\n          anchored={isBottom}\r\n          onClick={() => scrollToBottom('smooth')}\r\n          className={scrollButton}\r\n        />\r\n        <MessageContextMenu ref={contextMenuRef} />\r\n      </Box>\r\n    );\r\n  }\r\n};\r\n\r\nexport default VirtuosoContainer;\r\n","import { useState, forwardRef, useContext, useImperativeHandle } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { feedbackSended, errorPopup } from '../../../js/popups';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { addedPopup } from '../../../features/notifications/notifSlice';\r\nimport { ThemeContext } from '../../../contexts/ThemeContext';\r\nimport { feedbackDialogStyles } from '../../../js/styles';\r\nimport axios from 'axios';\r\n\r\nimport {\r\n  Dialog, DialogContent, DialogActions,DialogTitle, OutlinedInput, FormControl, \r\n  InputLabel, Select, MenuItem, Box, Typography, Tooltip, IconButton, \r\n} from '@material-ui/core';  \r\n\r\nimport {\r\n  CheckOutlined as IconoGuardar,\r\n  ClearOutlined as IconoLimpiar,\r\n} from '@material-ui/icons';\r\n\r\n\r\nconst feedbackDefault = {\r\n  type: 'Función incompleta',\r\n  observations: '',\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n  btnGuardar: {\r\n    marginRight: 20,\r\n    width: 30,\r\n    height: 30,\r\n    borderRadius: '50%',\r\n    color: theme.palette.background.main,\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n\r\n  btnCerrar: {\r\n    marginRight: 20,\r\n    width: 30,\r\n    height: 30,\r\n    borderRadius: '50%',\r\n    color: theme.palette.background.main,\r\n  },\r\n\r\n}));\r\n\r\n\r\n\r\nconst FeedbackDialog = forwardRef((props, ref) => {\r\n  const { primaryColor } = useContext(ThemeContext);\r\n  const [visible, setVsible] = useState(false);\r\n  const [feedback, setFeedback] = useState(feedbackDefault);\r\n  const open = () => setVsible(true);\r\n  const close = () => setVsible(false);\r\n  const estilos = useStyles();\r\n  function onChange({ target: { name, value } }) {\r\n    setFeedback(prev => ({ ...prev, [name]: value }));\r\n  }\r\n  useImperativeHandle(ref, () => ({ open }));\r\n  const dispatch = useDispatch();\r\n  const { login, token } = useSelector(state => state.auth);\r\n\r\n  async function onSendFeedback(e) {\r\n    e.preventDefault();\r\n    if (!feedback.type || !feedback.observations) {\r\n      return dispatch(addedPopup(errorPopup('No se han rellenado todos los campos')));\r\n    }\r\n    const feedbackRequest = {\r\n      VERSION: 'M4.0.0',\r\n      DEPARTAMENTO: 'CALIO',\r\n      APLICACION: 'Calio',\r\n      TIPO: feedback.type,\r\n      OBSERVACIONES: feedback.observations,\r\n      LOGIN: login,\r\n      tokenID: token,\r\n    };\r\n    const url = 'https://localhost:5010/api/nuevoReporte';\r\n    try {\r\n      const response = await axios.post(url, feedbackRequest);\r\n      if (response.data === 'insertOK') {\r\n        dispatch(addedPopup(feedbackSended));\r\n        setFeedback(feedbackDefault);\r\n        return close();\r\n      }\r\n      throw new Error('No se ha podido enviar el Feedback');\r\n    } catch (err) {\r\n      dispatch(addedPopup(errorPopup('No se ha podido enviar el Feedback')));\r\n    }\r\n  }\r\n\r\n  const { root } = feedbackDialogStyles();\r\n\r\n  return (\r\n    <Dialog\r\n      open={visible}\r\n      onClose={close}\r\n      scroll=\"paper\"\r\n      aria-labelledby=\"dialogo-feedback-titulo\"\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle id=\"dialogo-feedback-titulo\">Feedback</DialogTitle>\r\n      <DialogContent dividers>\r\n        <Typography variant=\"subtitle2\" color=\"textPrimary\">\r\n          Para colaborar con el progreso de la herramienta, ponemos a vuestra disposición este\r\n          pequeño formulario desde el que podéis darnos feedback sobre su funcionamiento.\r\n          Agradecemos vuestra paciencia mientras revisamos las solicitudes.\r\n        </Typography>\r\n        <br />\r\n        <br />\r\n        <Box component=\"form\" className={root}>\r\n          <FormControl required variant=\"outlined\">\r\n            <InputLabel id=\"select-tipo-reporte\">Motivo</InputLabel>\r\n            <Select label=\"Motivo\" name=\"type\" value={feedback.type} onChange={onChange}>\r\n              <MenuItem value=\"Función incompleta\">Función incompleta</MenuItem>\r\n              <MenuItem value=\"Propuesta de mejora\">Propuesta de mejora</MenuItem>\r\n              <MenuItem value=\"Lentitud\">Lentitud en la web</MenuItem>\r\n              <MenuItem value=\"Otros\">Otros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl required variant=\"outlined\">\r\n            <InputLabel id=\"input-observaciones-reporte\">Observaciones</InputLabel>\r\n            <OutlinedInput\r\n              multiline\r\n              rowsMax={3}\r\n              label=\"Observaciones\"\r\n              name=\"observations\"\r\n              value={feedback.observations}\r\n              onChange={onChange}\r\n            />\r\n          </FormControl>\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n\r\n        <Tooltip title=\"Cerrar\">\r\n          <IconButton\r\n            \r\n            className={estilos.btnCerrar}\r\n            onClick={close}\r\n          >\r\n            <IconoLimpiar />\r\n          </IconButton>\r\n        </Tooltip>\r\n\r\n        <Tooltip title=\"Guardar\">\r\n          <IconButton\r\n            style={{ backgroundColor: primaryColor }}\r\n            className={estilos.btnGuardar}\r\n            onClick={onSendFeedback}\r\n          >\r\n            <IconoGuardar />\r\n          </IconButton>\r\n        </Tooltip>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n});\r\n\r\nexport default FeedbackDialog;\r\n","import { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Box from '@material-ui/core/Box';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { sendAdminAction } from '../../../middleware/socket.io/socket.actions';\r\n\r\nconst ROLES = [\r\n  'Agente',\r\n  'Superagente',\r\n  'Coordinador/Formador',\r\n  'Comunicación',\r\n  'Recursos Humanos',\r\n  'Responsable',\r\n  'Supervisor',\r\n  'Administrador',\r\n];\r\n\r\nconst AdminPanel = forwardRef((props, ref) => {\r\n  const [action, setAction] = useState({ type: '', login: '' });\r\n  const [payload, setPayload] = useState({});\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const activeRoomId = useSelector(state => state.rooms.active);\r\n  const open = () => setIsVisible(true);\r\n  const close = () => setIsVisible(false);\r\n\r\n  useImperativeHandle(ref, () => ({ open }));\r\n\r\n  useEffect(() => {\r\n    if (action.type === 'POPUP') setPayload({ message: '' });\r\n    else if (action.type === 'UPDATE_ROOM') setPayload({ roomId: '', role: '' });\r\n    else setPayload({});\r\n  }, [action.type]);\r\n\r\n  const onChange = ({ target: { name, value } }) => {\r\n    setAction(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const onChangePayload = ({ target: { name, value } }) => {\r\n    setPayload(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Campo de texto: receptor de la acción\r\n  // Selector de la acción: POPUP, DISCONNECT, UPDATE_ROOM [REMOVE_ROOM]\r\n  // Campos para ejecutar la acción\r\n  // { type: string, login: string, platformId: number, payload: {} }\r\n\r\n  // POPUP: Input => Mensaje\r\n  // DISCONNECT => NADA\r\n  // UPDATE_ROOM => ID sala, rol\r\n\r\n  return (\r\n    <Dialog open={isVisible} onClose={close} scroll=\"paper\" maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>Panel de Administracion [solo Z2 -en pruebas-]</DialogTitle>\r\n      <DialogContent dividers>\r\n        <FormControl required variant=\"outlined\" fullWidth>\r\n          <InputLabel id=\"admin-receptor\">Receptor</InputLabel>\r\n          <OutlinedInput value={action.login} onChange={onChange} name=\"login\" label=\"Receptor\" />\r\n        </FormControl>\r\n        <br />\r\n        <br />\r\n        <FormControl required variant=\"outlined\" fullWidth>\r\n          <InputLabel id=\"admin-accion\">Acción</InputLabel>\r\n          <Select label=\"Acción\" name=\"type\" value={action.type} onChange={onChange}>\r\n            <MenuItem value=\"\">Selecciona una acción</MenuItem>\r\n            <MenuItem value=\"UPDATE_ROOM\">Añadir/modificar sala</MenuItem>\r\n            <MenuItem value=\"DISCONNECT\">Forzar desconexión</MenuItem>\r\n            <MenuItem value=\"POPUP\">Mensaje de Administración</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n        <Box>\r\n          {action.type === 'POPUP' && (\r\n            <>\r\n              <br />\r\n              <FormControl variant=\"outlined\" required fullWidth>\r\n                <InputLabel>Mensaje</InputLabel>\r\n                <OutlinedInput\r\n                  label=\"Mensaje\"\r\n                  multiline\r\n                  maxRows={2}\r\n                  name=\"message\"\r\n                  value={payload.message}\r\n                  onChange={onChangePayload}\r\n                />\r\n              </FormControl>\r\n            </>\r\n          )}\r\n          {action.type === 'UPDATE_ROOM' && (\r\n            <>\r\n              <br />\r\n              <FormControl variant=\"outlined\" required fullWidth>\r\n                <InputLabel>ID de sala</InputLabel>\r\n                <OutlinedInput\r\n                  label=\"ID de sala\"\r\n                  type=\"number\"\r\n                  name=\"roomId\"\r\n                  value={payload.roomId}\r\n                  onChange={onChangePayload}\r\n                />\r\n              </FormControl>\r\n              <br />\r\n              <br />\r\n              <FormControl variant=\"outlined\" required fullWidth>\r\n                <InputLabel>Etiqueta de rol</InputLabel>\r\n                <Select\r\n                  label=\"Etiqueta de rol\"\r\n                  name=\"role\"\r\n                  value={payload.role}\r\n                  onChange={onChangePayload}\r\n                >\r\n                  {ROLES.map(roleTag => (\r\n                    <MenuItem key={roleTag} value={roleTag}>\r\n                      {roleTag}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </>\r\n          )}\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={close}>Cerrar</Button>\r\n        <Button\r\n          color=\"primary\"\r\n          onClick={() => {\r\n            const { login, type } = action;\r\n            dispatch(sendAdminAction({ login, type, roomId: activeRoomId, payload }));\r\n          }}\r\n        >\r\n          Enviar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n});\r\n\r\nexport default AdminPanel;\r\n","import { useState, useEffect, useContext, forwardRef, useImperativeHandle } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { sendNotifyAction } from '../../../middleware/socket.io/socket.actions';\r\nimport { ThemeContext } from '../../../contexts/ThemeContext';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Dialog, DialogContent, DialogActions, DialogTitle, OutlinedInput, FormControl,\r\n  InputLabel, Select, MenuItem, Box, Typography, Tooltip, IconButton\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n  ClearOutlined as IconoLimpiar,\r\n  NotificationsActive as IconoEnviar,\r\n} from '@material-ui/icons';\r\n\r\n\r\nconst estilos = makeStyles();\r\nconst NotifyPanel = forwardRef((props, ref) => {\r\n  const [action, setAction] = useState({ type: '', login: '' });\r\n  const [payload, setPayload] = useState({});\r\n  const { primaryColor } = useContext(ThemeContext);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const activeRoomId = useSelector(state => state.rooms.active);\r\n  const open = () => setIsVisible(true);\r\n  const close = () => setIsVisible(false);\r\n\r\n  useImperativeHandle(ref, () => ({ open }));\r\n\r\n  useEffect(() => {\r\n    if (action.type === 'POPUP') setPayload({ message: '' });\r\n    else setPayload({});\r\n  }, [action.type]);\r\n\r\n  const onChange = ({ target: { name, value } }) => {\r\n    setAction(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const onChangePayload = ({ target: { name, value } }) => {\r\n    setPayload(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Campo de texto: receptor de la acción\r\n  // Selector de la acción: POPUP, DISCONNECT, UPDATE_ROOM [REMOVE_ROOM]\r\n  // Campos para ejecutar la acción\r\n  // { type: string, login: string, platformId: number, payload: {} }\r\n\r\n  return (\r\n    <Dialog open={isVisible} onClose={close} scroll=\"paper\" maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>Enviar Notificación</DialogTitle>\r\n      <DialogContent dividers>\r\n      <Typography variant=\"subtitle2\"> Utiliza (\"/todos\") para enviar una notificación a <b>todos los usuarios online de la actual sala.</b> Además, si es posible, \r\n      envía un mensaje claro y conciso.</Typography>\r\n        <br />\r\n        <br />\r\n      \r\n        <FormControl required variant=\"outlined\" fullWidth>\r\n          <InputLabel id=\"admin-receptor\">Usuario Receptor</InputLabel>\r\n          <OutlinedInput value={action.login} onChange={onChange} name=\"login\" label=\"Usuario Receptor\" />\r\n        </FormControl>\r\n        <br />\r\n        <br />\r\n        <FormControl required variant=\"outlined\" fullWidth>\r\n          <InputLabel id=\"admin-accion\">¿Qué acción quieres realizar?</InputLabel>\r\n          <Select label=\"¿Qué acción quieres realizar?\" name=\"type\" value={action.type} onChange={onChange}>\r\n            <MenuItem value=\"\">Selecciona una acción</MenuItem>\r\n            <MenuItem value=\"POPUP\">Mensaje de notificación</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n        <Box>\r\n          {action.type === 'POPUP' && (\r\n            <>\r\n            <br />\r\n            <FormControl variant=\"outlined\" required fullWidth>\r\n              <InputLabel>Mensaje</InputLabel>\r\n              <OutlinedInput\r\n                label=\"Mensaje\"\r\n                multiline\r\n                maxRows={2}\r\n                name=\"message\"\r\n                value={payload.message}\r\n                onChange={onChangePayload}\r\n              />\r\n            </FormControl>\r\n            </>\r\n          )}\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Tooltip title=\"Cerrar\">\r\n          <IconButton\r\n            className={estilos.btnCerrar}\r\n            onClick={close}\r\n          >\r\n            <IconoLimpiar />\r\n          </IconButton>\r\n        </Tooltip>\r\n\r\n\r\n        <Tooltip title=\"Enviar Notificación\">\r\n          <IconButton\r\n            style={{ backgroundColor: primaryColor }}\r\n            className={estilos.btnGuardar}\r\n            onClick={() => {\r\n              const { login, type } = action;\r\n              dispatch(sendNotifyAction({ login, type, roomId: activeRoomId, payload }));\r\n            }}\r\n          >\r\n            <IconoEnviar />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n});\r\n\r\nexport default NotifyPanel;\r\n","import { useEffect, useRef, useState, useContext } from 'react';\r\nimport { addedPopup } from '../../features/notifications/notifSlice';\r\nimport { disconnection } from '../../js/popups';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { chatBoxStyles, menuSearchStyles } from '../../js/styles';\r\nimport { ThemeContext } from '../../contexts/ThemeContext';\r\nimport useRoomChange from '../../hooks/useRoomChange';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport FeedbackIcon from '@material-ui/icons/Feedback';\r\nimport AddAlertIcon from '@material-ui/icons/AddAlert';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport LightIcon from '@material-ui/icons/Brightness5';\r\nimport DarkIcon from '@material-ui/icons/Brightness3';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';  \r\nimport TextField from '@material-ui/core/TextField';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Input from './Input';\r\nimport UsersList from './UsersList';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport VirtuosoContainer from './VirtuosoContainer';\r\nimport FeedbackDialog from './FeedbackDialog';\r\nimport AdminPanel from './AdminPanel';\r\nimport NotifyPanel from './NotifyPanel';\r\nimport {\r\n  fetchFilteredMessages,\r\n  setFilterProp,\r\n} from '../../features/messages/filteredMessagesSlice';\r\n\r\nconst MAX_FILTER_LENGTH = 200;\r\n\r\nfunction ChatBox() {\r\n  const dispatch = useDispatch();\r\n  const [openSearchMenu, setOpenSearchMenu] = useState(false);\r\n  const [positionMenu, setPositionMenu] = useState(null);\r\n  const [filter, setFilter] = useState('');\r\n  const [isFiltered, setIsFiltered] = useState(false);\r\n  const feedbackRef = useRef();\r\n  const adminRef = useRef();\r\n  const notifyRef = useRef();\r\n  const socketStatus = useSelector(state => state.auth.status);\r\n  const activeRoom = useRoomChange();\r\n  const { dropdown } = menuSearchStyles();\r\n  const { root, header } = chatBoxStyles();\r\n  const { theme } = useContext(ThemeContext);\r\n  const changeTheme = theme.changeTheme;\r\n  const darkMode = theme.darkMode;\r\n\r\n\r\n  useEffect(() => {\r\n    if (socketStatus === 'AUTENTICADO') dispatch(addedPopup(disconnection));\r\n  }, [socketStatus, dispatch]);\r\n\r\n  const onOpenFeedback = () => feedbackRef?.current?.open();\r\n  const onOpenAdmin = () => adminRef?.current?.open();\r\n  const onOpenNotify = () => notifyRef?.current?.open();\r\n\r\n  function onFilterChange({ target: { value } }) {\r\n    if (value.length >= MAX_FILTER_LENGTH) return;\r\n    setFilter(value);\r\n  }\r\n\r\n  function handleSearchClick() {\r\n    setOpenSearchMenu(!openSearchMenu);\r\n  }\r\n\r\n  //Cargar datos de mensajes filtrados\r\n  function onSearchClick() {\r\n    console.log('onSearchClick');\r\n    dispatch(setFilterProp(filter));\r\n    dispatch(fetchFilteredMessages());\r\n    setIsFiltered(true);\r\n  }\r\n\r\n  //Cargar datos de mensajes filtrados\r\n  function onCancelSearchClick() {\r\n    setIsFiltered(false);\r\n  }\r\n\r\n  const onKeyPress = e => {\r\n    if (e.code === 'Enter' && e.target.value) {\r\n      e.preventDefault();\r\n      onSearchClick();\r\n    }\r\n  };\r\n\r\n  const handleMenuClick = event => {\r\n    setOpenSearchMenu(false);\r\n    setPositionMenu(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setPositionMenu(null);\r\n  };\r\n\r\n  function getCapitalLetters(string) {\r\n    let letter = '';\r\n    const array = string?.split(' ');\r\n    array?.forEach(element => {\r\n      if (element.length > 3 && letter.length < 2) {\r\n        letter += element.charAt(0);\r\n      }\r\n    });\r\n    return letter.toUpperCase();\r\n  }\r\n\r\n  const isAdmin = activeRoom?.role?.role === 'Z2';\r\n  const isntUser = activeRoom?.role?.role !== 'A1' && activeRoom?.role?.role !== 'A2';\r\n\r\n  return (\r\n    <>\r\n      <UsersList />\r\n      <Card elevation={0} raised className={root}>\r\n        <CardHeader\r\n          className={header}\r\n          avatar={<Avatar>{getCapitalLetters(activeRoom?.roomName)}</Avatar>}\r\n          title={activeRoom?.roomName || 'Ninguna sala seleccionada'}\r\n          titleTypographyProps={true}\r\n          action={\r\n            <>\r\n              {isAdmin && (\r\n                <>\r\n                  <Tooltip title=\"Administracion beta\" arrow>\r\n                    <IconButton aria-label=\"administracion\" onClick={onOpenAdmin}>\r\n                      <FastfoodIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </>\r\n              )}\r\n              <>\r\n                <Tooltip title=\"Menu\" arrow>\r\n                  <IconButton aria-label=\"menu\" onClick={handleMenuClick}>\r\n                    <MenuIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n                <Menu\r\n                  id=\"optionsMenu\"\r\n                  getContentAnchorEl={null}\r\n                  anchorEl={positionMenu}\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                  }}\r\n                  open={Boolean(positionMenu)}\r\n                  onClose={handleMenuClose}\r\n                >\r\n                  {isntUser && (\r\n                    <MenuItem onClick={onOpenNotify}>\r\n                      <IconButton aria-label=\"notificacion\">\r\n                        <AddAlertIcon />\r\n                      </IconButton>\r\n                      Notificaciones\r\n                    </MenuItem>\r\n                  )}\r\n                  <MenuItem onClick={onOpenFeedback}> \r\n                    <IconButton aria-label=\"dar feedback\">\r\n                      <FeedbackIcon/> \r\n                    </IconButton>\r\n                    Feedback\r\n                  </MenuItem>\r\n                  {darkMode ? (\r\n                    <MenuItem onClick={changeTheme}>\r\n                      <IconButton aria-label=\"modo claro\">\r\n                        <LightIcon />\r\n                      </IconButton>\r\n                      Modo Claro\r\n                    </MenuItem>\r\n                  ) : (\r\n                    <MenuItem onClick={changeTheme}>\r\n                      <IconButton aria-label=\"modo oscuro\">\r\n                        <DarkIcon />\r\n                      </IconButton>\r\n                      Modo Oscuro\r\n                    </MenuItem>\r\n                  )}\r\n                </Menu>\r\n                <Tooltip title=\"Buscar mensajes\" arrow>\r\n                  <IconButton aria-label=\"buscar mensajes\" onClick={handleSearchClick}>\r\n                    <SearchIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n                {openSearchMenu ? (\r\n                  <div className={dropdown}>\r\n                    <TextField\r\n                      fullWidth\r\n                      value={filter}\r\n                      onChange={onFilterChange}\r\n                      onKeyPress={onKeyPress}\r\n                      name=\"search\"\r\n                      label=\"Busqueda*\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                    {!isFiltered ? (\r\n                      <IconButton onClick={onSearchClick}>\r\n                        <SearchIcon />\r\n                      </IconButton>\r\n                    ) : (\r\n                      <IconButton onClick={onCancelSearchClick}>\r\n                        <CloseIcon />\r\n                      </IconButton>\r\n                    )}\r\n                  </div>\r\n                ) : null}\r\n              </>\r\n            </>\r\n          }\r\n        />\r\n        <VirtuosoContainer isFiltered={isFiltered} />\r\n        <Input />\r\n      </Card>\r\n      <FeedbackDialog ref={feedbackRef} />\r\n      {isAdmin && (\r\n        <>\r\n          <AdminPanel ref={adminRef} />\r\n        </>\r\n      )}\r\n      {isntUser && (\r\n        <>\r\n          <NotifyPanel ref={notifyRef} />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatBox;\r\n","import { useMemo } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport Box from '@material-ui/core/Box';\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport { rootStyles } from './js/styles';\r\nimport Notifier from './components/Notifier';\r\nimport Navbar from './components/Navbar';\r\nimport Home from './components/Home';\r\nimport ChatBox from './components/ChatBox';\r\n\r\nfunction App() {\r\n  const { root } = rootStyles();\r\n  const snackbarPosition = useMemo(() => ({ horizontal: 'right', vertical: 'top' }), []);\r\n\r\n  return (\r\n    <Router>\r\n      <Box className={root}>\r\n        <Navbar />\r\n        <Switch>\r\n          <PrivateRoute path='/calio/chat' component={ChatBox} />\r\n          <Route exact path='/calio/' component={Home} />\r\n        </Switch>\r\n        <SnackbarProvider anchorOrigin={snackbarPosition} preventDuplicate>\r\n          <Notifier />\r\n        </SnackbarProvider>\r\n      </Box>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { addedMessage, updatedState, clearedForm } from '../../features/messages/messagesSlice';\r\nimport { addedPopup, removedMessageNotif } from '../../features/notifications/notifSlice';\r\nimport { addedRoom, changedActiveRoom, removedRoom } from '../../features/rooms/roomsSlice';\r\nimport { createMessageState } from './socket.actions';\r\nimport { errorPopup, infoPopup } from '../../js/popups';\r\nimport { prepareOutgoingPrivateRoom, filterOutgoingPrivate } from '../../js/room.helper';\r\nimport { rebuildMessage } from '../../js/messages';\r\n\r\nconst PRIVATE_TYPE = 'PRIVADA';\r\n\r\nfunction sendMessage(socket, action, getState, dispatch) {\r\n  const [roomId, rooms] = [getState().rooms.active, getState().rooms.entities];\r\n  if (roomId === -1) {\r\n    const popup = errorPopup('No se ha seleccionado ninguna sala');\r\n    dispatch(addedPopup(popup));\r\n  }\r\n  const actualRoom = rooms[roomId];\r\n  const isPrivate = actualRoom.type === PRIVATE_TYPE;\r\n  socket.emit('message', { ...action.payload, private: isPrivate, roomId }, message => {\r\n    message.compoundText = rebuildMessage(message.message);\r\n    dispatch(addedMessage(message));\r\n    dispatch(clearedForm());\r\n    const { previousId, emitter } = message;\r\n    if (previousId !== null) {\r\n      const newState = createMessageState(emitter, 4);\r\n      dispatch(updatedState({ ...newState, previousId }));\r\n    }\r\n  });\r\n}\r\n\r\nfunction stateMessage(socket, action, getState, dispatch) {\r\n  const roomId = getState().rooms.active;\r\n  return socket.emit('messageState', { ...action.payload, roomId }, response => {\r\n    return dispatch(updatedState(response));\r\n  });\r\n}\r\n\r\nfunction privateRoom(socket, action, getState, dispatch) {\r\n  const privateRoom = filterOutgoingPrivate(getState().rooms.entities, action.payload);\r\n  if (privateRoom) return dispatch(changedActiveRoom(privateRoom.roomId));\r\n  const roomId = getState().rooms.active;\r\n  return socket.emit('privateRoom', { ...action.payload, roomId }, response => {\r\n    const finalRoom = prepareOutgoingPrivateRoom(response);\r\n    dispatch(addedRoom(finalRoom));\r\n  });\r\n}\r\n\r\nfunction exitPrivate(socket, action, _getState, dispatch) {\r\n  return socket.emit('exitPrivate', { roomId: action.payload }, _response => {\r\n    dispatch(removedMessageNotif({ roomId: action.payload, type: PRIVATE_TYPE }));\r\n    dispatch(removedRoom(action.payload));\r\n  });\r\n}\r\n\r\nfunction adminAction(socket, action, _getState, dispatch) {\r\n  //console.log('[1] Interceptamos solicitud de acción de administrador', action.payload);\r\n  return socket.emit('adminAction', action.payload, response => {\r\n    //console.log('[2] Recibimos respuesta en \"adminAction\":', response);\r\n    if (!response) return dispatch(addedPopup(errorPopup('No se ha podido ejecutar la acción')));\r\n    dispatch(addedPopup(infoPopup('Se ha ejecutado la acción solicitada')));\r\n  });\r\n}\r\n\r\nfunction notifyAction(socket, action, _getState, dispatch) {\r\n  console.log('[1] Interceptamos solicitud de acción de notificación', action.payload);\r\n  return socket.emit('notifyAction', action.payload, response => {\r\n    console.log('[2] Recibimos respuesta en \"notifyAction\":', response);\r\n    if (!response) return dispatch(addedPopup(errorPopup('No se ha podido ejecutar la acción')));\r\n    dispatch(addedPopup(infoPopup('Se ha ejecutado la acción solicitada')));\r\n  });\r\n}\r\n\r\nexport const eventHandlers = {\r\n  sendMessage,\r\n  privateRoom,\r\n  exitPrivate,\r\n  adminAction,\r\n  notifyAction,\r\n  stateChange: stateMessage,\r\n};\r\n","export const prepareOutgoingPrivateRoom = privateRoom => {\r\n  const finalRoom = { ...privateRoom };\r\n  finalRoom.roomName = finalRoom.guestName.toLowerCase();\r\n  finalRoom.userLogin = finalRoom.guestLogin;\r\n  delete finalRoom.creatorName;\r\n  delete finalRoom.guestName;\r\n  return finalRoom;\r\n};\r\n\r\nexport const prepareIncomingPrivateRoom = privateRoom => {\r\n  const finalRoom = { ...privateRoom };\r\n  finalRoom.roomName = finalRoom.creatorName.toLowerCase();\r\n  finalRoom.userLogin = finalRoom.creatorLogin;\r\n  delete finalRoom.creatorName;\r\n  delete finalRoom.guestName;\r\n  return finalRoom;\r\n};\r\n\r\nexport const filterIncomingPrivate = (rooms, roomId) =>\r\n  Object.values(rooms).filter(room => room.private && room.roomId === roomId)[0];\r\n\r\nexport const filterOutgoingPrivate = (rooms, privateRoom) =>\r\n  Object.values(rooms).filter(\r\n    room =>\r\n      room.private &&\r\n      (room.userLogin === privateRoom.guestLogind || room.guestLogin === privateRoom.guestLogin)\r\n  )[0];\r\n","import { addedMessage, updatedState } from '../../features/messages/messagesSlice';\r\nimport {\r\n  addedMessageNotif,\r\n  removedMessageNotif,\r\n  addedPopup,\r\n} from '../../features/notifications/notifSlice';\r\nimport { addedRoom, changedActiveRoom, removedRoom } from '../../features/rooms/roomsSlice';\r\nimport { createMessageState } from './socket.actions';\r\nimport { prepareIncomingPrivateRoom, filterIncomingPrivate } from '../../js/room.helper';\r\nimport {\r\n  playSound,\r\n  infoPopup,\r\n  mentionMessage,\r\n  answerMessage,\r\n  privateRequest,\r\n  adminPopup,\r\n  notifyPopup,\r\n} from '../../js/popups';\r\nimport { userAdded, userRemoved } from '../../features/users/usersSlice';\r\nimport { logout } from '../../features/auth/authSlice';\r\nimport { rebuildMessage } from '../../js/messages';\r\n\r\nconst onMessage = (messageData, getState, dispatch) => {\r\n  const { roomId, message, previousUserName = '', emitter, receiver, previousId } = messageData;\r\n  const { login, name } = getState().auth;\r\n  const messageRoom = getState().rooms.entities[roomId];\r\n  const isForActiveRoom = getState().rooms.active === roomId;\r\n  const isMentionForMe = receiver === login;\r\n  if (isMentionForMe) dispatch(addedPopup(mentionMessage(message)));\r\n  if (isForActiveRoom) {\r\n    messageData.compoundText = rebuildMessage(messageData.message);\r\n    dispatch(addedMessage(messageData));\r\n    if (messageRoom.sound) playSound();\r\n    if (messageRoom.type === 'PRIVADA') playSound();\r\n  } else dispatch(addedMessageNotif({ roomId, type: messageRoom.type }));\r\n  if (previousId) {\r\n    const newState = createMessageState(emitter, 4);\r\n    dispatch(updatedState({ previousId, ...newState }));\r\n    const isAnswerForMe = previousUserName.toLowerCase() === name.toLowerCase();\r\n    isAnswerForMe && dispatch(addedPopup(answerMessage(message)));\r\n  }\r\n};\r\n\r\nconst onOnline = (user, getState, dispatch) => {\r\n  const isOnline = user.status === 'online';\r\n  if (isOnline && user.roomId !== getState().rooms.active) return;\r\n  dispatch(isOnline ? userAdded(user) : userRemoved(user));\r\n};\r\n\r\nconst onMessageState = (change, _, dispatch) => dispatch(updatedState(change));\r\n\r\nconst onPrivateRoom = (privateRoomEvent, getState, dispatch) => {\r\n  const privateRoom = filterIncomingPrivate(getState().rooms.entities, privateRoomEvent.roomId);\r\n  if (privateRoom) return dispatch(changedActiveRoom(privateRoom.roomId));\r\n  const finalRoom = prepareIncomingPrivateRoom(privateRoomEvent);\r\n  dispatch(addedRoom(finalRoom));\r\n  dispatch(addedPopup(privateRequest(finalRoom.roomName)));\r\n};\r\n\r\nconst onExitPrivate = (exitRoom, getState, dispatch) => {\r\n  const room = getState().rooms.entities[exitRoom.roomId];\r\n  if (!room) return;\r\n  dispatch(addedPopup(infoPopup(`El usuario ${room.roomName} ha abandonado la sala privada`)));\r\n  dispatch(removedMessageNotif({ roomId: exitRoom.roomId, type: 'PRIVADA' }));\r\n  dispatch(removedRoom(exitRoom.roomId));\r\n};\r\n\r\n// * Acciones de administración:\r\nconst onUpdateRoom = (room, getState, dispatch) => {\r\n  const actualRoom = getState().rooms.entities[room.roomId];\r\n  const popupText = actualRoom\r\n    ? `Te han actualizado al permiso ${room.role.role} en la sala: ${room.roomName}`\r\n    : `Te han añadido a la sala ${room.roomName} con permiso ${room.role.role}`;\r\n  dispatch(addedRoom(room));\r\n  dispatch(addedPopup(adminPopup(popupText)));\r\n};\r\n\r\nconst onForceDisconnect = (_data, _getState, dispatch) => {\r\n  const popupText =\r\n    'Un administrador ha solicitado tu desconexión. Desconectando en 10 segundos...';\r\n  dispatch(addedPopup(adminPopup(popupText)));\r\n  setTimeout(() => {\r\n    dispatch(logout());\r\n  }, 10000);\r\n};\r\n\r\nexport const onAdminPopup = (message, _getState, dispatch) => {\r\n  dispatch(addedPopup(adminPopup(message.message)));\r\n};\r\n\r\nexport const onNotifyPopup = (message, _getState, dispatch) => {\r\n  dispatch(addedPopup(notifyPopup(message.message)));\r\n};\r\n\r\nconst onRemoveRoom = (room, getState, dispatch) => {\r\n  const actualRoom = getState().rooms[room.roomId];\r\n  if (actualRoom) {\r\n    dispatch(removedRoom(room.roomId));\r\n    dispatch(addedPopup(adminPopup(`Has sido eliminado de la sala ${room.roomName}`)));\r\n  }\r\n};\r\n\r\nexport const customListeners = {\r\n  message: onMessage,\r\n  online: onOnline,\r\n  messageState: onMessageState,\r\n  privateRoom: onPrivateRoom,\r\n  exitPrivate: onExitPrivate,\r\n  adminPopup: onAdminPopup,\r\n  notifyPopup: onNotifyPopup,\r\n  updateRoom: onUpdateRoom,\r\n  removeRoom: onRemoveRoom,\r\n  forceDisconnect: onForceDisconnect,\r\n};\r\n\r\nexport const CUSTOM_EVENTS = [\r\n  'message',\r\n  'online',\r\n  'messageState',\r\n  'privateRoom',\r\n  'exitPrivate',\r\n  'adminPopup',\r\n  'notifyPopup',\r\n  'updateRoom',\r\n  'removeRoom',\r\n  'forceDisconnect',\r\n];\r\n","import { connected, disconnected, logout } from '../../features/auth/authSlice';\r\nimport { addedPopup, clearedNotifications } from '../../features/notifications/notifSlice';\r\nimport { clearedMessages } from '../../features/messages/messagesSlice';\r\nimport { setRooms, clearedRooms } from '../../features/rooms/roomsSlice';\r\nimport { eventHandlers } from './socket.eventHandlers';\r\nimport { customListeners, CUSTOM_EVENTS } from './socket.listeners';\r\n\r\nconst loginSuccess = 'auth/login/fulfilled';\r\nconst logoutSuccess = 'auth/logout/pending';\r\nconst socketStart = 'socket';\r\n\r\nconst middleware = socket => ({ getState, dispatch }) => next => action => {\r\n\r\n  if (typeof action === 'function') return action(dispatch, getState);\r\n\r\n  if (action.type === loginSuccess) {\r\n    const { login, token, rooms } = action.payload;\r\n    const onConnectionSuccess = socketId => dispatch(connected(socketId));\r\n    const onConnectError = () => dispatch(logout());\r\n    const onDisconnect = () => dispatch(disconnected());\r\n    const onNotif = popup => dispatch(addedPopup(popup));\r\n    dispatch(setRooms(rooms));\r\n    socket.connect(login, token, onConnectionSuccess, onConnectError, onNotif, onDisconnect);\r\n    CUSTOM_EVENTS.forEach(event => {\r\n      const handler = customListeners[event];\r\n      if (handler instanceof Function) {\r\n        socket.on(event, data => handler(data, getState, dispatch));\r\n      }\r\n    });\r\n    return next(action);\r\n  }\r\n\r\n  if (action.type === logoutSuccess) {\r\n    dispatch(clearedNotifications());\r\n    dispatch(clearedMessages());\r\n    dispatch(clearedRooms());\r\n    socket.disconnect();\r\n    document.title = 'Calio';\r\n  }\r\n\r\n  if (action.type.startsWith(socketStart)) {\r\n    const actionName = action.type.split('/')[1];\r\n    const callback = eventHandlers[actionName];\r\n    if (callback instanceof Function) return callback(socket, action, getState, dispatch);\r\n  }\r\n\r\n  //console.log('action ', action);\r\n  next(action);\r\n};\r\n\r\nexport default middleware;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport authReducer from '../features/auth/authSlice';\r\nimport messagesReducer from '../features/messages/messagesSlice';\r\nimport filteredMessagesReducer from '../features/messages/filteredMessagesSlice';\r\nimport roomsReducer from '../features/rooms/roomsSlice';\r\nimport usersReducer from '../features/users/usersSlice';\r\nimport notifReducer from '../features/notifications/notifSlice';\r\nimport socketMiddleware from '../middleware/socket.io/socket.middleware';\r\nimport SocketClient from './SocketClient';\r\n\r\nconst socket = new SocketClient();\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    auth: authReducer,\r\n    messages: messagesReducer,\r\n    filteredMessages: filteredMessagesReducer,\r\n    rooms: roomsReducer,\r\n    users: usersReducer,\r\n    notifications: notifReducer,\r\n  },\r\n  middleware: [socketMiddleware(socket)],\r\n});\r\n","import io from 'socket.io-client';\r\nimport { socketConnectError, errorPopup, tokenExpired } from '../js/popups';\r\n\r\nclass SocketClient {\r\n  socket;\r\n\r\n  connect(login, token, onSuccess, onError, onNotif, onDisconnect) {\r\n     console.log('%cSocket inicializando...', 'color: seagreen', { login, token });\r\n    if (onNotif) this.onNotif = onNotif;\r\n    if (onSuccess) this.onSuccess = onSuccess;\r\n    if (onError) this.onError = onError;\r\n    if (onDisconnect) this.onDisconnect = onDisconnect;\r\n    this.socket = io(process.env.REACT_APP_ENDPOINT, {\r\n      auth: { login, token },\r\n      autoConnect: false,\r\n      reconnectionAttempts: 10,\r\n    });\r\n    this.socket.on('connect', () => {\r\n      console.log('%cSocket on \"connect\"', 'color: royalblue');\r\n      if (this.onSuccess instanceof Function) this.onSuccess(this.socket.id);\r\n    });\r\n    this.socket.on('connect_error', error => {\r\n       console.error('%cSocket on \"connect_error\"', 'color: firebrick', error);\r\n      this.onNotif(socketConnectError);\r\n      setTimeout(() => {\r\n        if (this.onError instanceof Function) this.onError();\r\n      }, 2000);\r\n    });\r\n    this.socket.open();\r\n  }\r\n\r\n  disconnect() {\r\n     //console.log('%cDesconectando socket...');\r\n    if (!this.socket) return;\r\n    this.socket.disconnect(() => {\r\n      this.socket = null;\r\n      console.log('%cSocket on \"disconnect\"', 'color: slateblue');\r\n    });\r\n  }\r\n\r\n  emit(event, data, fn) {\r\n    if (!this.socket) return;\r\n    // console.log(`%cSocket emit on \"${event}:`, 'color: royalblue', data);\r\n    return this.socket.emit(event, data, response => {\r\n      if (response.error) {\r\n        // console.log(`%cSocket error response on \"${event}:`, 'color: firebrick', response);\r\n        if (response.error === 'Sesión inválida') {\r\n          // TODO: Mostrar popup de error con un botón que permita volver al inicio\r\n          this.onNotif(tokenExpired);\r\n        }\r\n        this.onNotif(errorPopup(response.error));\r\n        return response.error;\r\n      }\r\n      fn(response);\r\n    });\r\n  }\r\n\r\n  on(event, fun) {\r\n    if (!this.socket) return;\r\n    // console.log(`%cSocket on \"${event}\" handler set`, 'color: royalblue');\r\n    this.socket.on(event, fun);\r\n  }\r\n}\r\n\r\nexport default SocketClient;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { ThemeProvider } from './contexts/ThemeContext';\r\nimport { Provider } from 'react-redux';\r\nimport store from './app/store';\r\n\r\nReactDOM.render(\r\n  <ThemeProvider>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </ThemeProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}