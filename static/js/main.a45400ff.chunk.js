(this.webpackJsonpcalio=this.webpackJsonpcalio||[]).push([[0],{394:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),i=a.n(o),c=a(89),s=a(27),l=a(31),u=a(460),d=a(5),b=a(215),j=a(7),m=a(14),p=a(24),f=a.n(p),O=a(33),v=a(18),h=a(104),g={PRIVADA:"privates",DEPARTAMENTO:"services",COMUN:"commons"},x={CONVERSACIONES:"privates",SERVICIOS:"services",GENERAL:"commons"},y=Object(v.e)({name:"notifications",initialState:{services:{},privates:{},commons:{},popups:[]},reducers:{addedMessageNotif:function(e,t){var a=g[t.payload.type],n=e[a][t.payload.roomId];n?"number"===typeof n&&(e[a][t.payload.roomId]+=1):e[a][t.payload.roomId]=1},removedMessageNotif:function(e,t){e[g[t.payload.type]][t.payload.roomId]=0},clearedNotifications:function(e){e.services={},e.privates={},e.commons={}},addedPopup:{prepare:function(e){return{payload:Object(d.a)(Object(d.a)({},e),{},{key:Object(v.f)(10)})}},reducer:function(e,t){var a=t.payload.options.preventDuplicate,n=t.payload.message,r=e.popups.findIndex((function(e){return e.message===n}))>=0;(!a||a&&!r)&&e.popups.push(t.payload)}},removedPopup:function(e,t){e.popups.splice(t.payload,1),t.payload||e.popups.splice(-1,1)}}}),C=y.actions,S=C.clearedNotifications,I=C.addedMessageNotif,k=C.removedMessageNotif,N=C.addedPopup,w=C.removedPopup,R=y.reducer,A=Object(h.a)((function(e){var t=e.notifications,a=t.privates,n=t.commons,r=t.services;return Object(d.a)(Object(d.a)(Object(d.a)({},a),n),r)}),(function(e){return Object.values(e).reduce((function(e,t){return e+t}),0)})),M=Object(h.a)((function(e){return e.notifications}),(function(e,t){return{roomType:t.roomType,roomId:t.roomId}}),(function(e,t){var a=t.roomType,n=t.roomId;return e[g[a]][n]})),P=Object(h.a)((function(e){return e.notifications}),(function(e,t){return t}),(function(e,t){var a=x[t];return!!a&&Object.values(e[a]).some((function(e){return e>0}))})),T=a(43),L=a.n(T);var E=function(e,t){try{return null===e?t:JSON.parse(e)}catch(a){return t}},B=a(428),D=a(51),z=a(69),H=a.n(z),F=a(427),W=a(1),q=Object(F.a)((function(e){return{root:{alignItems:"center",justifyContent:"center",background:"#b50d0d !important",borderRadius:4,padding:"12px 24px",flexWrap:"wrap",color:"#fff",float:"right",maxWidth:"90vw"},marginRight:{marginRight:e.spacing(2)}}})),G=Object(n.forwardRef)((function(e,t){var a=e.message,n=e.id,r=q(),o=r.root,i=r.marginRight,c=Object(l.c)().closeSnackbar;return Object(W.jsxs)(l.a,{ref:t,className:o,children:[Object(W.jsx)(D.a,{variant:"body1",className:i,children:a}),Object(W.jsx)(B.a,{margin:"dense",onClick:function(){return c(n)},children:Object(W.jsx)(H.a,{})})]})})),U=Object(F.a)((function(e){return{root:{alignItems:"center",justifyContent:"center",background:"#a885D8 !important",borderRadius:4,padding:"12px 24px",flexWrap:"wrap",color:"#fff",float:"right",maxWidth:"90vw"},marginRight:{marginRight:e.spacing(2)}}})),V=Object(n.forwardRef)((function(e,t){var a=e.message,n=e.id,r=U(),o=r.root,i=r.marginRight,c=Object(l.c)().closeSnackbar;return Object(W.jsxs)(l.a,{ref:t,className:o,children:[Object(W.jsx)(D.a,{variant:"body1",className:i,children:a}),Object(W.jsx)(B.a,{margin:"dense",onClick:function(){return c(n)},colorPrimary:!0,children:Object(W.jsx)(H.a,{style:{color:"#fff"}})})]})})),Y=a(463),_=Object(F.a)((function(e){return{root:{display:"flex",minHeight:"100vh",maxHeight:"100vh",backgroundColor:e.palette.background.default}}})),K=Object(F.a)({navItem:{"& span.MuiTypography-root":{textTransform:"capitalize"}},badge:{display:"flex",flexDirection:"row",alignItems:"baseline",justifyContent:"space-between",width:"100%","& .MuiBadge-badge":{top:"50%"}},roomListDiv:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},exitButton:{minWidth:"40px !important"}}),Q=Object(F.a)((function(e){return{root:{display:"flex",width:"100%",margin:e.spacing(6),marginRight:e.spacing(10),marginLeft:e.spacing(10),zIndex:1},loginContainer:{width:"50%",display:"flex",alignItems:"center",justifyContent:"center","& .MuiBox-root > div, & .MuiBox-root > h2":{marginBottom:e.spacing(3)},"& .MuiBox-root":{width:"60%",boxSizing:"border-box",display:"flex",flexDirection:"column"},"& img":{width:"100%",marginBottom:e.spacing(6)}},homeBoxContainer:{width:"50%",borderRight:"1px solid #33333342",position:"relative",overflow:"hidden",background:"radial-gradient(circle, #d99962 50%, rgba(255,121,0,1) 100%)"},avatar:{position:"absolute",width:"100%",height:"100%","& > svg":{width:"100%",height:"100%"}},title:{zIndex:1e4,width:"100%",textAlign:"center",position:"absolute",bottom:0,fontWeight:"700 !important",background:"linear-gradient(0deg, rgba(51, 51, 51, 0.75) 0%, rgba(51, 51, 51, 0.2) 100%)"},logo:{maxWidth:500}}})),X=Object(F.a)((function(e){return{root:{margin:e.spacing(1),width:300,display:"flex",flexDirection:"column"},logo:{boxSizing:"border-box",width:225,height:65,padding:e.spacing(1),paddingTop:0,margin:"0 auto"},autofill:{flex:1},profileButton:{justifyContent:"flex-start !important","& .MuiBox-root":{width:60,height:60,marginRight:e.spacing(1)},"& svg":{width:"100%",height:"100%"},"& .MuiTypography-subtitle2":{textTransform:"capitalize"},"& .MuiBox-root + div":{textAlign:"left"}},list:{maxHeight:"calc(100% - 178px)",overflowY:"auto !important",scrollbarWidth:"thin",scrollbarColor:"#4a4a4a #dbdbdb","& .MuiListSubheader-root":{backgroundColor:"light"===e.palette.type?"#cecece":"#333","& .MuiBadge-root":{marginRight:e.spacing(2)}}},searcher:{margin:e.spacing(1)}}})),J=Object(F.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",scrollbarWidth:"thin",scrollbarColor:"#4a4a4a #dbdbdb",zIndex:2,flexWrap:"wrap"},divAvatarColor:{display:"flex",flexDirection:"column",marginTop:"30px",alignItems:"center"},cuerpoAvatar:{display:"flex",flexDirection:"row"},selectSonido:{width:"calc(50% - 60px)",marginRight:e.spacing(2),"& .MuiSelect-root":{paddingTop:12,paddingBottom:12}},btnOscuro:{height:56,width:"calc(50% - 16px)",margin:"8px !important"},avatar:{width:"86%",display:"flex",flexDirection:"column",justifyContent:"space-between","& > svg":{position:"relative",top:-16,left:-24}},ajustesAvatar:{width:"75%",marginBottom:e.spacing(2),"& > div":{width:"calc(50% - 16px)",margin:e.spacing(1)}}}})),Z=Object(F.a)((function(e){return{root:{margin:e.spacing(1),marginLeft:0,flex:1,display:"flex",flexDirection:"column"},header:{borderBottom:"1px solid ".concat(e.palette.divider),boxShadow:"0px 2px 2px rgba(0,0,0,0.25)",zIndex:100,padding:"8px 16px !important","& span.MuiCardHeader-title":{textTransform:"capitalize"},"& .MuiCardHeader-action":{marginTop:0},"& .MuiCardHeader-title":{fontSize:24}}}})),$=Object(F.a)((function(e){return{root:{flex:1,position:"relative"},scrollButton:{position:"absolute !important",bottom:8,right:16,width:36,height:36,padding:0,borderRadius:"50%",minWidth:0,zIndex:1,backgroundColor:"".concat(e.palette.primary.main," !important"),color:"#fff !important",boxShadow:e.shadows[5],"&:hover":{backgroundColor:"".concat(e.palette.primary.dark," !important")}},loader:{position:"absolute",zIndex:10,left:"calc(50% - 75px)",top:"calc(50% - 75px)"}}})),ee=Object(F.a)((function(e){return{root:{position:"relative",padding:e.spacing(1),"& textarea":{scrollbarWidth:"thin",scrollbarColor:"#4a4a4a #dbdbdb"}},innerContainer:{position:"relative"},inputForm:{marginRight:"".concat(e.spacing(1),"px !important"),"& .MuiInputBase-root":{paddingRight:80}},buttonSend:{position:"absolute !important",right:28,bottom:window.chrome?16:21,backgroundColor:"transparent !important"},extraContainer:{position:"absolute !important",maxHeight:241,width:270,left:16,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,border:"1px solid rgba(0, 0, 0, 0.23)",borderBottom:"none",overflowY:"auto",overflowX:"hidden",padding:0,backgroundColor:e.palette.background.default,scrollbarWidth:"thin",scrollbarColor:"#4a4a4a #dbdbdb",transform:"translate(0%, calc(-100% - ".concat(window.chrome?"75px":"83px",")) !important"),"& span.MuiListItemText-primary":{textTransform:"capitalize"}},extraSubheader:{fontSize:"20px !important",borderBottom:"1px solid ".concat(e.palette.divider),backgroundColor:e.palette.background.default,"& > div":{margin:0,padding:4}},infoBox:{marginTop:e.spacing(1),"& > div:not(:first-of-type)":{marginLeft:e.spacing(2)},"& span.MuiChip-label":{textTransform:"capitalize"}},quote:{boxSizing:"border-box",margin:e.spacing(1),marginTop:0,padding:e.spacing(1),marginLeft:e.spacing(2),position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.default,"&::before":{content:'""',position:"absolute",backgroundColor:"#FF7900",width:5,height:"100%",borderRadius:e.shape.borderRadius,left:-13,top:0},"& > p":{display:"-webkit-box",overflow:"hidden",textAlign:"start","-webkit-box-orient":"vertical","-webkit-line-clamp":"2"},"& > p > span":{textTransform:"capitalize",fontWeight:"bold"},"& button":{position:"absolute",right:0,top:0}},characterCounter:{position:"absolute",bottom:4,right:8,pointerEvents:"none","& .MuiTypography-caption":{display:"block",width:"100%",position:"absolute",bottom:5,textAlign:"center",fontSize:"0.7rem !important"},"& .MuiCircularProgress-determinate":{color:"#CA4A20 !important"}}}})),te=Object(F.a)((function(e){return{root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(1),width:"auto",cursor:"default","&:hover":{backgroundColor:e.palette.action.hover},"& .MuiTypography-h6":{fontSize:"1rem",textTransform:"capitalize"}},mine:{justifyContent:"flex-end !important","& .MuiListItemAvatar-root, & .avatar-placeholder":{marginRight:"0 !important",marginLeft:e.spacing(2),order:10}},answered:{backgroundColor:"light"===e.palette.type?"#EBFFE6":"#68886D"},assigned:{backgroundColor:"light"===e.palette.type?"#FEDD9E":"#815139"},avatar:{alignSelf:"flex-start",width:56,height:56,marginRight:e.spacing(2),"& svg":{width:"100%",height:"100%"}},quote:{position:"relative",marginLeft:e.spacing(2),backgroundColor:"light"===e.palette.type?"#eee":e.palette.background.default,padding:e.spacing(1),borderRadius:e.shape.borderRadius,"&::before":{content:'""',position:"absolute",left:1.5*-e.spacing(1),top:0,height:"97.5%",width:5,borderRadius:32,backgroundColor:e.palette.primary.main},"& .MuiTypography-subtitle2 span":{textTransform:"capitalize",fontWeight:"bold"}},labelContainer:{marginTop:e.spacing(1),"& > .MuiChip-root:not(:first-of-type)":{marginLeft:e.spacing(1)}},text:{margin:"0 !important","& p.MuiListItemText-secondary":{color:"light"===e.palette.type?"#000":"#fff"}}}})),ae=Object(F.a)((function(e){return{root:{width:325,margin:e.spacing(1),marginLeft:0,"& .MuiCardContent-root":{padding:0}},header:{boxSizing:"border-box",borderBottom:"1px solid ".concat(e.palette.divider),boxShadow:"0px 2px 2px rgba(0,0,0,0.25)",zIndex:100,"& span.MuiCardHeader-title":{textTransform:"capitalize"}},content:{height:"calc(100% - 88px)"},list:{height:"calc(100% - 40px)",overflow:"auto",scrollbarWidth:"thin",scrollbarColor:"#4a4a4a #dbdbdb","& .MuiListSubheader-root":{backgroundColor:"light"===e.palette.type?"#cecece":"#333"}},item:{"& span.MuiTypography-root":{textTransform:"capitalize"}},searchBox:{margin:e.spacing(1),width:"calc(100% - ".concat(e.spacing(2),"px)")}}})),ne=(Object(F.a)((function(e){return{root:{flexGrow:"initial",minWidth:288,background:"royalblue",borderRadius:4,padding:"6px 16px",display:"flex",flexDirection:"column"}}})),Object(F.a)((function(e){return{root:{display:"flex",flexDirection:"column","& > .MuiFormControl-root":{marginBottom:e.spacing(2)}}}}))),re=(Object(F.a)((function(e){return{root:{display:"flex"},progress:{margin:"0 auto"}}})),Object(F.a)((function(e){return{list:{maxHeight:200,width:"100%",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"#4a4a4a #dbdbdb"},subheader:{backgroundColor:"light"===e.palette.type?"#cecece !important":"#333 !important",display:"flex",alignItems:"center",paddingTop:8,paddingBottom:8,"& .MuiListItemText-root":{display:"inline-flex"}}}})),Object(F.a)((function(e){return{list:{maxHeight:"37.5vh",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"#4a4a4a #dbdbdb"},actionTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:8},pollItem:{flexWrap:"wrap"},pollResults:{width:"100%"}}})),Object(F.a)((function(e){return{dropdown:{display:"flex",flexDirection:"row",position:"fixed",width:400,top:"80px",right:"18px",border:"1px solid #dbdbdb",borderRadius:4,padding:e.spacing(1),backgroundColor:e.palette.background.paper,color:"#dbdbdb"}}}))),oe=a(110),ie=a.n(oe),ce=Object(F.a)((function(e){return{root:{alignItems:"center",justifyContent:"center",background:"#d32f2f",borderRadius:4,padding:"12px 24px",flexWrap:"wrap",color:"#fff"},icon:{marginRight:e.spacing(2)}}})),se=Object(n.forwardRef)((function(e,t){var a=ce(),r=a.root,o=a.icon,i=Object(l.c)().closeSnackbar,c=Object(j.c)((function(e){return e.auth.status}));return Object(n.useEffect)((function(){"AUTENTICADO"!==c&&i(e.id)}),[c,i,e.id]),Object(W.jsxs)(l.a,{ref:t,className:r,children:[Object(W.jsx)(ie.a,{className:o,fontSize:"large"}),Object(W.jsxs)(u.a,{children:[Object(W.jsx)(D.a,{variant:"h6",children:"Se ha perdido la conexi\xf3n"}),Object(W.jsx)(D.a,{variant:"body2",children:"Intentando reconectar con el servidor..."})]})]})})),le=a(111),ue=a.n(le),de=Object(F.a)((function(e){return{root:{alignItems:"center",justifyContent:"center",background:"#d32f2f",borderRadius:4,padding:"12px 24px",flexWrap:"wrap",color:"#fff",width:"100%"},marginRight:{marginRight:e.spacing(2)},button:{color:"#fff",borderColor:"#fff"}}})),be=Object(n.forwardRef)((function(e,t){var a=de(),n=a.root,r=a.marginRight,o=a.button,i=Object(l.c)().closeSnackbar,c=Object(j.b)();return Object(W.jsxs)(l.a,{ref:t,className:n,children:[Object(W.jsx)(ie.a,{className:r,fontSize:"large"}),Object(W.jsx)(D.a,{variant:"h6",className:r,children:"La sesi\xf3n ha caducado"}),Object(W.jsx)(B.a,{disableElevation:!0,className:o,variant:"outlined",endIcon:Object(W.jsx)(ue.a,{}),onClick:function(){c(Ke()),i(e.id)},children:"Salir"})]})})),je=a.p+"static/media/appointed.00b95928.ogg",me=new(a(186).Howl)({src:je});function pe(){me.play()}var fe={message:"Error actualizando el avatar",options:{variant:"error"}},Oe={message:"Avatar actualizado",options:{variant:"success"}},ve={message:"Error de autenticaci\xf3n",options:{variant:"error"}},he={options:{persist:!0,content:function(e){return Object(W.jsx)(se,{id:e},e)},anchorOrigin:{horizontal:"center",vertical:"top"},variant:"warning"}},ge={message:"Sesi\xf3n inv\xe1lida",options:{preventDuplicate:!0,persist:!0,content:function(e){return Object(W.jsx)(be,{id:e},e)},anchorOrigin:{horizontal:"center",vertical:"top"}}},xe={message:"Se ha enviado el feedback, gracias",options:{variant:"success"}},ye={message:"Error de conexi\xf3n",options:{variant:"error"}},Ce=function(e){return{message:e,options:{variant:"error"}}},Se=function(e){return{message:e,options:{variant:"info"}}},Ie=function(e){return{message:e,options:{persist:!0,variant:"warning",content:function(t){return Object(W.jsx)(G,{id:t,message:e},t)}}}};var ke,Ne,we=function(e,t){var a,n=null===e||void 0===e||null===(a=e.request)||void 0===a?void 0:a.response;if(n){var r=E(n,{error:"Error del servidor"});throw"Sesi\xf3n inv\xe1lida"===r.error?t(N(ge)):t(N(Ce(r.error))),new Error(r.error)}throw new Error(e)},Re=/(https?:\/\/([wW]{3}\.)?\w+[\._-][\w\/\.:?=%&#-]+)/gim,Ae=function(e){for(var t,a=0,n=[];null!==(t=Re.exec(e));)n.push({type:"text",value:e.slice(a,t.index)}),n.push({type:"link",value:t[0]}),a=t.index+t[0].length;return void 0===t?n.push({type:"text",value:e}):a!==e.length&&n.push({type:"text",value:e.slice(a)}),n},Me=Object(v.d)({selectId:function(e){return e.messageId},sortComparer:function(e,t){return e.messageId-t.messageId}}),Pe=Object(d.a)(Object(d.a)({},Me.getInitialState()),{},{lastMessagesCount:0,filter:"",status:"idle",error:null}),Te=Object(v.c)("messages/fetchFilteredMessages",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,o,i,c,s,l,u,b,j,m;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.dispatch,r=a.getState,e.prev=1,-1!==(o=r().rooms.active)){e.next=5;break}throw new Error("No se ha seleccionado sala");case 5:return i=r().auth,c=i.login,s=i.token,l=i.platformId,u=r().filteredMessages.filter,b={login:c,token:s,platformId:l,roomId:o,filter:u},j="".concat("http://192.168.1.128:5010/","messages/getFiltered"),e.next=11,L.a.post(j,b);case 11:if(m=e.sent,!Array.isArray(m.data)){e.next=14;break}return e.abrupt("return",m.data.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{compoundText:Ae(e.message)})})));case 14:return e.abrupt("return",m.data);case 17:e.prev=17,e.t0=e.catch(1),we(e.t0,n);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),Le=Object(v.e)({name:"filteredMessages",initialState:Pe,reducers:{addedMessage:Me.addOne,setFilterProp:function(e,t){" "!==t.payload&&(e.filter=t.payload)}},extraReducers:(ke={},Object(m.a)(ke,Te.pending,(function(e){Me.removeAll(e),e.status="loading",e.error=null})),Object(m.a)(ke,Te.fulfilled,(function(e,t){Me.setAll(e,t),e.lastMessagesCount=0,e.status="done",e.error=null})),Object(m.a)(ke,Te.rejected,(function(e,t){e.status="error",e.error=t.error.message})),ke)}),Ee=Le.reducer,Be=Le.actions,De=(Be.addedMessage,Be.setFilterProp),ze=Me.getSelectors((function(e){return e.filteredMessages})),He=ze.selectById,Fe=ze.selectIds,We=(Object(h.a)((function(e){return e.filteredMessages.quoteId}),(function(e){return e.filteredMessages.mention}),(function(e){return e.filteredMessages.labels}),(function(e,t,a){return[e,t,a]})),Me.getSelectors((function(e){return e.filteredMessages})).selectAll,a(9)),qe={topType:["NoHair","Eyepatch","Hat","Hijab","Turban","WinterHat1","WinterHat2","WinterHat3","WinterHat4","LongHairBigHair","LongHairBob","LongHairBun","LongHairCurly","LongHairCurvy","LongHairDreads","LongHairFrida","LongHairFro","LongHairFroBand","LongHairNotTooLong","LongHairShavedSides","LongHairMiaWallace","LongHairStraight","LongHairStraight2","LongHairStraightStrand","ShortHairDreads01","ShortHairDreads02","ShortHairFrizzle","ShortHairShaggyMullet","ShortHairShortCurly","ShortHairShortFlat","ShortHairShortRound","ShortHairShortWaved","ShortHairSides","ShortHairTheCaesar","ShortHairTheCaesarSidePart"],accessoriesType:["Blank","Kurt","Prescription01","Prescription02","Round","Sunglasses","Wayfarers"],hatColor:["Black","Blue01","Blue02","Blue03","Gray01","Gray02","Heather","PastelBlue","PastelGreen","PastelOrange","PastelRed","PastelYellow","Pink","Red","White"],hairColor:["Black","Blonde","BlondeGolden","Brown","Auburn","BrownDark","PastelPink","Platinum","Red","SilverGray"],facialHairType:["Blank","BeardMedium","BeardLight","MoustacheFancy","MoustacheMagnum"],facialHairColor:["Black","Blonde","BlondeGolden","Brown","Auburn","BrownDark","Platinum","Red"],clotheType:["BlazerShirt","BlazerSweater","CollarSweater","GraphicShirt","Hoodie","Overall","ShirtCrewNeck","ShirtScoopNeck","ShirtVNeck"],clotheColor:["Black","Blue01","Blue02","Blue03","Gray01","Gray02","Heather","PastelBlue","PastelGreen","PastelOrange","PastelRed","PastelYellow","Pink","Red","White"],graphicType:["Bat","Cumbia","Deer","Diamond","Hola","Pizza","Resist","Selena","Bear","SkullOutline","Skull"],eyeType:["Close","Cry","Default","Dizzy","EyeRoll","Happy","Hearts","Side","Squint","Surprised","Wink","WinkWacky"],eyebrowType:["Angry","AngryNatural","Default","DefaultNatural","FlatNatural","RaisedExcited","RaisedExcitedNatural","SadConcerned","SadConcernedNatural","UnibrowNatural","UpDown","UpDownNatural"],mouthType:["Concerned","Default","Disbelief","Eating","Grimace","Sad","ScreamOpen","Serious","Smile","Tongue","Twinkle","Vomit"],skinColor:["Tanned","Yellow","Pale","Light","Brown","DarkBrown","Black"]},Ge={topType:["Sin Pelo","Parche","Sombrero","Hijab","Turbante","Sombrero Invierno 1","Sombrero Invierno 2","Sombrero Invierno 3","Sombrero Invierno 4","Largo Abultado","Largo Bob","Largo Mo\xf1o","Largo Rizado","Largo Ondulado","Largo Hippy","Largo Flores","Largo Afro","Largo Afro Diadema","Semilargo","Largo Recogido","Largo MiaWallace","Largo Liso 1","Largo Liso 2","Largo Liso Espalda","Corto Alborotado 1","Corto Alborotado 2","Lados Rapados","Corto Shaggy Mullet","Corto Rizado","Corto Flequillo Levantado","Corto Flequillo","Corto Tupe","Semicalvo","Corto","Corto con Raya"],accessoriesType:["Nada","Kurt","Prescripci\xf3n 1","Prescripci\xf3n 2","Redondas","Gafas de sol 1","Gafas de sol 2"],hatColor:["Negro","Azul 1","Azul 2","Azul 3","Gris 1","Gris 2","Azul Grisaceo","Azul Pastel","Verde Pastel","Naranje Pastel","Rojo Pastel","Amarillo Pastel","Rosa","Rojo","Blanco"],hairColor:["Oscuro","Rubio","Rubio Dorado","Casta\xf1o","Casta\xf1o Claro","Casta\xf1o Oscuro","Rosa Pastel","Platino","Rojo","Plateado"],facialHairType:["Nada","Barba Mediana","Barba Peque\xf1a","Bigote","Mostacho"],facialHairColor:["Oscuro","Rubio","Rubio Dorado","Casta\xf1o","Casta\xf1o Claro","Casta\xf1o Oscuro","Platino","Rojo"],clotheType:["Americana con camiseta","Americana con Su\xe9ter","Su\xe9ter","Camiseta con Dibujo","Sudadera","Peto","Camiseta Cuello Cerrado","Camiseta Cuello Abierto","Camiseta Cuello Pico"],clotheColor:["Negro","Azul 1","Azul 2","Azul 3","Gris 1","Gris 2","Azul Gris\xe1ceo","Azul Pastel","Verde Pastel","Naranja Pastel","Rojo Pastel","Amarillo Pastel","Rosa","Rojo","Blanco"],graphicType:["Murcielago","Cumbia","Ciervo","Diamante","Hola","Pizza","Resist!","Selena","Oso","Calavera sin Relleno","Calavera con Relleno"],eyeType:["Cerrados","Llorando","Normal","Cansado","Pensativo","Feliz","Enamorado","Extra\xf1ado","Raro","Sorprendido","Ojo Gui\xf1ado 1","Ojo Gui\xf1ado 2"],eyebrowType:["Enfadado","Enfadado Natural","Normal","Normal Natural","Abajo","Emocionado","Emocionado Natural","Triste","Triste Natural","Unicejo","Extra\xf1ado","Extra\xf1ado Natural"],mouthType:["Boquiabierto","Normal","Raro","Comiendo","Muy Contento","Triste","Gritando Asustado","Serio","Sonriendo","Sacando Lengua","Contento","Vomitando"],skinColor:["Bronceado","Amarillo","Palido","Clarito","Casta\xf1o","Casta\xf1o Oscuro","Oscuro"]},Ue=["Pelo/Accesorio","Gafas","Color Gorro","Color Pelo","Barba","Color Barba","Ropa","Color Ropa","Letra Ropa","Ojos","Cejas","Boca","Piel"],Ve=["topType","accessoriesType","hatColor","hairColor","facialHairType","facialHairColor","clotheType","clotheColor","graphicType","eyeType","eyebrowType","mouthType","skinColor"],Ye={avatarStyle:"Circle",topType:"",accessoriesType:"",hatColor:"",hairColor:"",facialHairType:"",facialHairColor:"",clotheType:"",clotheColor:"",graphicType:"",eyeType:"",eyebrowType:"",mouthType:"",skinColor:""},_e=Object(v.c)("auth/login",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,o,i,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,o="".concat("http://192.168.1.128:5010/","auth/login"),e.prev=2,e.next=5,L.a.post(o,t);case 5:return r=e.sent,console.log("Response: ",r),i=E(r.data.profile.avatar,Ye),r.data.profile.avatar="Default"===i?Ye:i,e.abrupt("return",Object(d.a)(Object(d.a)({},r.data.session),r.data.profile));case 12:if(e.prev=12,e.t0=e.catch(2),!(null===e.t0||void 0===e.t0||null===(c=e.t0.request)||void 0===c?void 0:c.response)){e.next=20;break}throw s=E(e.t0.request.response,{error:"Error durante el logado"}),n(N(Ce(s.error))),new Error(s.error);case 20:"Error: Network Error"===e.t0.toString()&&n(N(ye));case 21:throw new Error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a){return e.apply(this,arguments)}}()),Ke=Object(v.c)("auth/logout",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,o,i,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getState,r=a.dispatch,o=n().auth,i=o.login,c=o.token,r(De("")),s="".concat("http://192.168.1.128:5010/","auth/logout"),e.next=6,L.a.post(s,{login:i,token:c});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Qe=Object(v.c)("auth/updatedAvatar",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,o,i,c,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getState,r=a.dispatch,e.prev=1,o=n().auth,i=o.login,c=o.token,s="".concat("http://192.168.1.128:5010/","auth/updateAvatar"),e.next=6,L.a.post(s,{login:i,token:c,avatar:t});case 6:return l=e.sent,e.abrupt("return",(null===l||void 0===l?void 0:l.data)||!1);case 10:e.prev=10,e.t0=e.catch(1),we(e.t0,r);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),Xe={state:"idle",error:null,token:void 0,expireTime:void 0,login:void 0,platformId:void 0,name:void 0,avatar:void 0,avatarState:"idle",status:void 0,socket:void 0},Je=Object(v.e)({name:"auth",initialState:Xe,reducers:{connected:function(e,t){e.socket=t.payload,e.status="ACTIVO"},disconnected:function(e){e.status="AUTENTICADO"}},extraReducers:(Ne={},Object(m.a)(Ne,_e.pending,(function(e){e.state="loading",e.error=null})),Object(m.a)(Ne,_e.fulfilled,(function(e,t){e.state="done",e.token=t.payload.token,e.expireTime=t.payload.expireTime,e.login=t.payload.login,e.platformId=t.payload.platformId,e.name=t.payload.name,e.status=t.payload.state,e.avatar=t.payload.avatar,e.error=null})),Object(m.a)(Ne,_e.rejected,(function(e,t){e.state="error",e.error=t.error.message})),Object(m.a)(Ne,Ke.fulfilled,(function(e){e.token=void 0,e.expireTime=void 0,e.login=void 0,e.platformId=void 0,e.name=void 0,e.avatar=void 0,e.status=void 0,e.avatar=void 0,e.state="idle",e.socket=void 0})),Object(m.a)(Ne,Ke.rejected,(function(e){e.token=void 0,e.expireTime=void 0,e.login=void 0,e.platformId=void 0,e.name=void 0,e.avatar=void 0,e.status=void 0,e.avatar=void 0,e.state="idle",e.socket=void 0})),Object(m.a)(Ne,Qe.pending,(function(e,t){e.avatarState="loading"})),Object(m.a)(Ne,Qe.fulfilled,(function(e,t){t.payload&&(e.avatar=t.payload,e.avatarState="done")})),Object(m.a)(Ne,Qe.rejected,(function(e,t){e.avatarState="error"})),Ne)}),Ze=Je.reducer,$e=Je.actions,et=($e.addedReward,$e.connected),tt=$e.disconnected,at=Object(h.a)((function(e){return e.auth}),(function(e){var t=e.login,a=e.token;return Boolean(t)&&Boolean(a)}));var nt=function(e){var t=e.component,a=Object(b.a)(e,["component"]),n=Object(j.c)(at);return Object(W.jsx)(s.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return n?Object(W.jsx)(t,Object(d.a)({},e)):Object(W.jsx)(s.a,{to:"/calio/"})}}))},rt=a(213),ot=[];var it=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.notifications.popups})),a=Object(l.c)(),r=a.enqueueSnackbar,o=a.closeSnackbar;return Object(n.useEffect)((function(){t.forEach((function(t){var a,n=t.key,i=t.message,c=t.options,s=t.dismissed;if(void 0!==s&&s)return o(n);ot.includes(n)||(r(i,Object(d.a)(Object(d.a)({key:n},c),{},{onClose:function(e,t,a){c.onClose instanceof Function&&c.onClose(e,t,a)},onExited:function(t,a){var n;e(w(a)),n=a,ot=Object(rt.a)(ot.filter((function(e){return e!==n})))}})),a=n,ot.push(a))}))}),[e,r,o,t]),null},ct=a(450),st=a(451),lt=a(94),ut=a.n(lt),dt=a(431),bt=function(e,t){var a=e.type.localeCompare(t.type);return 0!==a?a:e.roomName.localeCompare(t.roomName)},jt=Object(v.d)({selectId:function(e){return e.roomId},sortComparer:bt}),mt=Object(d.a)(Object(d.a)({},jt.getInitialState()),{},{state:"idle",error:null,active:-1}),pt=Object(v.e)({name:"rooms",initialState:mt,reducers:{setRooms:function(e,t){jt.setAll(e,t),e.active=e.ids[0]},addedRoom:function(e,t){jt.upsertOne(e,t),e.active=t.payload.roomId},removedRoom:function(e,t){t.payload===e.active&&(e.active=e.ids[0]),jt.removeOne(e,t)},changedActiveRoom:function(e,t){e.active=t.payload},changedRoomSound:function(e,t){jt.upsertOne(e,t)},clearedRooms:function(e){jt.removeAll(e),e.state="idle",e.error=null,e.active=-1}}}),ft=pt.reducer,Ot=pt.actions,vt=Ot.addedRoom,ht=Ot.removedRoom,gt=Ot.changedActiveRoom,xt=Ot.changedRoomSound,yt=Ot.setRooms,Ct=Ot.clearedRooms,St=jt.getSelectors((function(e){return e.rooms})).selectAll,It=Object(h.a)([function(e){return e.rooms.active},function(e){return e.rooms.entities}],(function(e,t){return t[e]})),kt=["GENERAL","SERVICIOS","CONVERSACIONES"],Nt=Object(h.a)((function(e){return e.rooms.entities}),(function(e){var t=Object.values(e).sort(bt),a=t.findIndex((function(e){return"COMUN"===e.type})),n=t.findIndex((function(e){return"DEPARTAMENTO"===e.type})),r=t.findIndex((function(e){return"PRIVADA"===e.type})),o=0;return[a,n,r].forEach((function(e,a){e<0||(t.splice(e+o,0,{label:kt[a]}),o++)})),t})),wt=Object(h.a)((function(e){return e.rooms.entities}),(function(e){return e.rooms.active}),(function(e,t){var a;return null===(a=e[t])||void 0===a?void 0:a.role})),Rt="socket/sendMessage",At="socket/privateRoom",Mt="socket/exitPrivate",Pt="socket/stateChange",Tt="socket/adminAction",Lt="socket/notifyAction",Et=Object(v.b)(Rt),Bt=Object(v.b)(At),Dt=Object(v.b)(Pt),zt=Object(v.b)(Mt),Ht=Object(v.b)(Tt,(function(e){var t=e.login,a=e.type,n=e.roomId,r=e.payload,o="UPDATE_ROOM"===a?parseInt(r.roomId):parseInt(n);return console.log(o),{payload:{type:a,receiver:t,roomId:o,payload:Object(d.a)(Object(d.a)({},r),{},{roomId:o})}}})),Ft=Object(v.b)(Lt,(function(e){var t=e.login,a=e.type,n=e.roomId,r=e.payload,o=parseInt(n);return{payload:{type:a,receiver:t,roomId:o,payload:Object(d.a)(Object(d.a)({},r),{},{roomId:o})}}})),Wt=function(e,t){var a=new Date;return{stateDate:a=a.toISOString(),lastState:t,stateLOGIN:e}},qt=a(214),Gt=a(432),Ut=a(433),Vt=a(190),Yt=a.n(Vt),_t=a(93),Kt=a.n(_t),Qt=a(189),Xt=a.n(Qt),Jt=a(131),Zt=a.n(Jt),$t=a(113),ea=a.n($t),ta=a(187),aa=a.n(ta),na=a(188),ra=a.n(na),oa=["A1","A2"],ia={room:null,x:null,y:null},ca=Object(n.forwardRef)((function(e,t){var a,r=e.role,o=e.onChangeSound,i=(e.sound,Object(n.useState)(ia)),c=Object(We.a)(i,2),s=c[0],l=c[1],u=function(e,t){return l({room:t,x:e.x,y:e.y})},d=function(){return l(ia)};Object(n.useImperativeHandle)(t,(function(){return u}));var b=Object(n.useMemo)((function(){return function(e,t){var a=[];return oa.includes(e)||((null===t||void 0===t?void 0:t.sound)?a.push({action:"mute",name:"Silenciar",icon:Object(W.jsx)(aa.a,{fontSize:"small"})}):(null===t||void 0===t?void 0:t.sound)||a.push({action:"unmute",name:"Activar Sonido",icon:Object(W.jsx)(ra.a,{fontSize:"small"})})),a}(r,null===s||void 0===s?void 0:s.room)}),[r,null===s||void 0===s?void 0:s.room]),j=null!==(null===(a=s.room)||void 0===a?void 0:a.login)&&null!==s.x&&null!==s.y,m=null!==s.y&&null!==s.x?{top:s.y,left:s.x}:void 0;return Object(W.jsx)(qt.a,{keepMounted:!0,id:"messages-context-menu",anchorReference:"anchorPosition",onClose:d,open:j,anchorPosition:m,children:b.map((function(e){return Object(W.jsxs)(Gt.a,{onClick:function(){return function(e){switch(e){case"mute":case"unmute":o()}d()}(e.action)},children:[Object(W.jsx)(Ut.a,{children:e.icon}),Object(W.jsx)(D.a,{variant:"inherit",children:e.name})]},e.action)}))})})),sa=a(398),la=a(434),ua=a(464),da=a(435),ba=a(436),ja=a(465),ma=a(437);function pa(e){var t=e.roomName,a=e.role,r=e.type,o=e.roomId,i=e.onSelected,c=e.selected,s=Object(n.useState)(!0),l=Object(We.a)(s,2),u=l[0],d=l[1],b=Object(j.c)(St).find((function(e){return e.roomId===o})),m=K(),p=m.navItem,f=m.exitButton,O=m.roomListDiv,v="PRIVADA"===r,h=Object(n.useRef)(),g=Object(j.c)((function(e){return M(e,{roomType:r,roomId:o})})),x=Object(j.b)();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(sa.a,{divider:!0,button:!0,className:p,selected:c,onClick:function(){return i({roomName:t,code:a.role,roomId:o})},onContextMenu:function(e){e.preventDefault(),function(e,t){var a=h.current;a instanceof Function&&a(e,t)}({x:e.clientX,y:e.clientY},b)},children:[Object(W.jsxs)("div",{className:O,children:[Object(W.jsx)("div",{children:Object(W.jsx)(la.a,{badgeContent:g||0,color:"primary",children:Object(W.jsx)(ua.a,{children:function(e){var t="";return e.split(" ").forEach((function(e){e.length>3&&t.length<2&&(t+=e.charAt(0))})),t.toUpperCase()}(t)})})}),Object(W.jsx)(da.a,{primary:t.toLowerCase()})]}),Object(W.jsx)("div",{children:Object(W.jsx)(ba.a,{"aria-label":"silenciar",size:"small",children:!u&&Object(W.jsx)(ma.a,{})})}),v&&Object(W.jsx)(Ut.a,{className:f,children:Object(W.jsx)(ja.a,{arrow:!0,title:"Abandonar conversaci\xf3n",children:Object(W.jsx)(ba.a,{"aria-label":"abandonar conversaci\xf3n",size:"small",onClick:function(e){e.stopPropagation(),v&&x(zt(o))},children:Object(W.jsx)(H.a,{})})})})]}),"A1"!==(null===b||void 0===b?void 0:b.role.role)&&"A2"!==(null===b||void 0===b?void 0:b.role.role)&&Object(W.jsx)(ca,{ref:h,role:null===b||void 0===b?void 0:b.role.role,onChangeSound:function(){var e={roomId:b.roomId,role:b.role,roomName:b.roomName,type:b.type,sound:!b.sound};d(e.sound),x(xt(e))},sound:!0})]})}var fa=r.a.memo(pa),Oa=a(71),va=a.n(Oa);var ha=function(e){var t=e.className,a=e.onClick,n=Object(j.b)(),r=Object(j.c)((function(e){return e.auth})),o=r.avatar,i=r.name,c=r.login;return Object(W.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(W.jsx)(ja.a,{title:"Ajustes del perfil",arrow:!0,children:Object(W.jsxs)(B.a,{onClick:a,className:t,children:[Object(W.jsx)(u.a,{children:Object(W.jsx)(va.a,Object(d.a)(Object(d.a)({},o),{},{avatarStyle:"Transparent"}))}),Object(W.jsxs)("div",{children:[Object(W.jsx)(D.a,{variant:"subtitle2",component:"h6",children:null===i||void 0===i?void 0:i.toLowerCase()}),Object(W.jsx)(D.a,{variant:"body2",component:"span",children:c})]})]})}),Object(W.jsx)(u.a,{children:Object(W.jsx)(ja.a,{title:"Cerrar sesi\xf3n",arrow:!0,children:Object(W.jsx)(ba.a,{"aria-label":"cerrar sesi\xf3n",onClick:function(){return n(Ke())},children:Object(W.jsx)(ue.a,{})})})})]})};var ga=function(){var e=Object(n.useState)(!1),t=Object(We.a)(e,2),a=t[0],r=t[1],o=Object(n.useCallback)((function(){window.localStorage.setItem("darkModeCalio",!a),r((function(e){return!e}))}),[a]);return Object(n.useEffect)((function(){var e=window.localStorage.getItem("darkModeCalio");r("true"===e)}),[]),{darkMode:a,changeTheme:o}},xa=a(438),ya=a(212),Ca=function(e){return{primary:{main:e},secondary:{main:"#0088ff"},tonalOffset:.2}},Sa=function(e){return Object(ya.a)({palette:Object(d.a)({type:"light"},Ca(e)),overrides:{MuiButton:{label:{textTransform:"none"}}}})},Ia=function(e){return Object(ya.a)({palette:Object(d.a)({type:"dark"},Ca(e)),overrides:{MuiButton:{label:{textTransform:"none"}}}})},ka=Object(n.createContext)({darkMode:!1,changeTheme:function(){}}),Na=function(e){var t=e.children,a=ga(),r=Object(n.useState)(window.localStorage.getItem("Color")||"#ff7900"),o=Object(We.a)(r,2),i=o[0],c=o[1];return Object(W.jsx)(ka.Provider,{value:{theme:a,primaryColor:i,setPrimaryColor:c},children:Object(W.jsx)(xa.a,{theme:a.darkMode?Ia(i):Sa(i),children:t})})},wa=a.p+"static/media/LogoBlanco.35bc6724.png",Ra=a.p+"static/media/LogoNegro.2397cfcb.png";var Aa=function(e){var t=e.className,a=Object(n.useContext)(ka).theme.darkMode?wa:Ra;return Object(W.jsx)("img",{src:a,alt:"Logotipo de Calio",className:t})},Ma=a(469),Pa=a(443),Ta=a(444),La=a(439),Ea=a(468),Ba=a(461),Da=a(445),za=a(446),Ha=a(447),Fa=Object(F.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:"0px",marginTop:"15",width:"86%"}}})),Wa=[{nombre:"Love Orange",color:"#ff7900",background:"#fff"},{nombre:"Arctic Blue",color:"#76949F",background:"#fff"},{nombre:"Celebi Green",color:"#50be87",background:"#fff"},{nombre:"Salmon Pink",color:"#F4989C",background:"#000"},{nombre:"Blue Bell",color:"#999AC6",background:"#fff"},{nombre:"Indian Red",color:"#CD5C5C",background:"#000"}];var qa=function(e){var t=e.primaryColor,a=e.setPrimaryColor,n=Fa(),r=function(e){return Object(W.jsx)("div",{style:{width:"26px",height:"26px",borderRadius:"50%",backgroundColor:e,marginRight:"16px"}})};return Object(W.jsxs)(La.a,{required:!0,variant:"outlined",className:n.formControl,children:[Object(W.jsx)(Ea.a,{htmlFor:"select-colores",children:"Tema personalizado"}),Object(W.jsx)(Ba.a,{name:"COLOR",label:"Color de los botones",id:"select-colores",value:t,onChange:function(e){console.log("Color: ",e.target.value),window.localStorage.setItem("Color",e.target.value),a(e.target.value)},className:n.select,renderValue:function(e){var t=Wa.filter((function(t){return t.color===e}))[0];return Object(W.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"0 8px"},children:[r(t.color),Object(W.jsx)("span",{style:{textTransform:"capitalize"},children:t.nombre})]})},children:Wa.map((function(e){var t=e.nombre,a=e.color;return Object(W.jsxs)(Gt.a,{value:a,children:[r(a),Object(W.jsx)(da.a,{primary:t,className:n.optionItem})]},t)}))})]})},Ga=Object(n.forwardRef)((function(e,t){var a=Object(n.useContext)(ka),r=a.primaryColor,o=a.setPrimaryColor,i=J(),c=Object(j.b)(),s=Object(j.c)((function(e){return[e.auth.avatar,e.auth.avatarState]})),l=Object(We.a)(s,2),b=l[0],p=l[1],f=Object(n.useState)(!1),O=Object(We.a)(f,2),v=O[0],h=O[1],g=function(){return h(!0)},x=function(){return h(!1)},y=Object(n.useState)(b),C=Object(We.a)(y,2),S=C[0],I=C[1],k=function(e){var t=e.target,a=t.name,n=t.value;return I((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},a,n))}))};return Object(n.useEffect)((function(){"error"===p?c(N(fe)):"done"===p&&c(N(Oe))}),[p,c]),Object(n.useImperativeHandle)(t,(function(){return{open:g}})),Object(W.jsxs)(Ma.a,{open:v,onClose:x,scroll:"paper","aria-labelledby":"dialogo-perfil-titulo",maxWidth:"md",fullWidth:!0,children:[Object(W.jsx)(Pa.a,{id:"dialogo-perfil-titulo",children:"Mi perfil"}),Object(W.jsx)(Ta.a,{className:i.root,dividers:!0,children:Object(W.jsxs)("div",{className:i.cuerpoAvatar,children:[Object(W.jsxs)("div",{className:i.divAvatarColor,children:[Object(W.jsx)(u.a,{className:i.avatar,children:Object(W.jsx)(va.a,Object(d.a)(Object(d.a)({},S),{},{avatarStyle:"Transparent"}))}),Object(W.jsx)(qa,{primaryColor:r,setPrimaryColor:o})]}),Object(W.jsx)(u.a,{className:i.ajustesAvatar,children:b&&Ve.map((function(e,t){return Object(W.jsxs)(La.a,{variant:"outlined",children:[Object(W.jsx)(Ea.a,{id:"avatar-".concat(t),children:Ue[t]}),Object(W.jsx)(Ba.a,{labelId:"avatar-".concat(t),label:Ue[t],name:e,value:S[e]||"",onChange:k,children:Ge[Ve[t]].map((function(t,a){return Object(W.jsx)(Gt.a,{value:qe[e][a],children:t},t)}))})]},e)}))})]})}),Object(W.jsxs)(Da.a,{children:[Object(W.jsx)(ja.a,{title:"Cerrar",children:Object(W.jsx)(ba.a,{className:i.btnCerrar,onClick:x,children:Object(W.jsx)(za.a,{})})}),Object(W.jsx)(ja.a,{title:"Guardar",children:Object(W.jsx)(ba.a,{style:{backgroundColor:r},className:i.btnGuardar,onClick:function(){return c(Qe(S))},children:Object(W.jsx)(Ha.a,{})})})]})]})})),Ua="Calio";var Va=function(){var e=Object(j.c)(A);Object(n.useEffect)((function(){document.title=e>0?"\ud83d\udcdd(".concat(e,") ").concat(Ua):Ua}),[e])},Ya=a(448),_a=a(449),Ka=a(193),Qa=a.n(Ka),Xa=a(192),Ja=a.n(Xa),Za={GENERAL:Object(W.jsx)(Ja.a,{}),SERVICIOS:Object(W.jsx)(Qa.a,{}),CONVERSACIONES:Object(W.jsx)(ea.a,{})},$a=function(e){var t=e.label,a=Object(j.c)((function(e){return P(e,t)}));return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Ya.a,{children:[Object(W.jsx)(la.a,{color:"primary",variant:"dot",invisible:!a,children:Za[t]}),t]}),Object(W.jsx)(_a.a,{})]})},en=["/calio/","/calio/chat"];var tn=function(){var e=Object(j.c)(It),t=X(),a=t.root,r=t.autofill,o=t.logo,i=t.profileButton,c=t.list,l=t.searcher,u=Object(s.h)().pathname,b=Object(j.b)(),m=Object(n.useRef)(),p=Object(j.c)(Nt),f=Object(n.useState)(""),O=Object(We.a)(f,2),v=O[0],h=O[1];Va();var g=function(e){return b(gt(e.roomId))};return en.includes(u)?u===en[0]?null:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(ct.a,{elevation:0,className:a,raised:!0,children:[Object(W.jsx)(Aa,{className:o}),Object(W.jsx)(Y.a,{className:l,variant:"outlined",margin:"dense",placeholder:"Buscar salas...",value:v,onChange:function(e){return h(e.target.value)},endAdornment:Object(W.jsx)(st.a,{position:"end",children:Object(W.jsx)(ut.a,{})})}),Object(W.jsx)(dt.a,{component:"nav",disablePadding:!0,className:c,children:null===p||void 0===p?void 0:p.filter((function(e){return!v||Boolean(e.label)||e.roomName.toLowerCase().includes(v.toLowerCase())})).map((function(t,a){return t.label?Object(W.jsx)($a,{label:t.label},"".concat(a,"-").concat(t.label)):Object(W.jsx)(fa,Object(d.a)(Object(d.a)({},t),{},{selected:t.roomId===e.roomId,onSelected:g}),t.roomId)}))}),Object(W.jsx)("div",{className:r}),Object(W.jsx)(ha,{className:i,onClick:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.open()}})]}),Object(W.jsx)(Ga,{ref:m})]}):Object(W.jsx)(s.a,{to:en[0]})},an=a(197),nn=a.n(an),rn=a(196),on=a.n(rn),cn=a(194),sn=a.n(cn),ln=a(195),un=a.n(ln),dn=a(198),bn=a.n(dn);var jn=function(e){var t=e.className,a=e.logoClassName,r=Object(n.useState)({login:"",password:""}),o=Object(We.a)(r,2),i=o[0],c=o[1],l=Object(n.useState)(!0),b=Object(We.a)(l,2),p=b[0],v=b[1],h=Object(n.useState)(!1),g=Object(We.a)(h,2),x=g[0],y=g[1],C=Object(n.useRef)(),S=Object(j.b)(),I=Object(j.c)((function(e){return e.auth})),k=Object(s.g)(),N=Object(n.useState)(!0),w=Object(We.a)(N,2),R=w[0],A=w[1];Object(n.useEffect)((function(){"done"===I.state&&"ACTIVO"===I.status&&k.push("/calio/chat")}),[I,k]);var M=function(e){var t=e.target,a=t.name,n=t.value;return c((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},a,n.trim()))}))},P=function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!1),t.preventDefault(),S(_e(i));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=!i.login||!i.password||!R;return Object(W.jsx)(u.a,{component:"form",onSubmit:P,className:t,children:Object(W.jsxs)(u.a,{children:[Object(W.jsx)(Aa,{className:a}),Object(W.jsxs)(La.a,{variant:"outlined",children:[Object(W.jsx)(Ea.a,{htmlFor:"login-login",children:"Prometheus ID"}),Object(W.jsx)(Y.a,{required:!0,variant:"outlined",label:"Prometheus ID",placeholder:"Prometheus ID",id:"login-login",name:"login",type:"text",value:i.login,onChange:M,startAdornment:Object(W.jsx)(st.a,{position:"start",children:Object(W.jsx)(sn.a,{})})})]}),Object(W.jsxs)(La.a,{variant:"outlined",children:[Object(W.jsx)(Ea.a,{htmlFor:"login-password",children:"Contrase\xf1a"}),Object(W.jsx)(Y.a,{required:!0,inputRef:C,variant:"outlined",label:"Contrase\xf1a",placeholder:"Contrase\xf1a",id:"login-password",name:"password",type:p?"password":"text",value:i.password,onChange:M,onKeyUp:function(e){var t=e.getModifierState("CapsLock");y(t)},onBlur:function(){return v(!0)},startAdornment:Object(W.jsx)(st.a,{position:"start",children:Object(W.jsx)(un.a,{})}),endAdornment:Object(W.jsx)(st.a,{position:"end",children:Object(W.jsx)(ja.a,{title:"Ver Contrase\xf1a",placement:"top",arrow:!0,children:Object(W.jsx)(ba.a,{onClick:function(){return v((function(e){return!e}))},children:p?Object(W.jsx)(on.a,{}):Object(W.jsx)(nn.a,{})})})})}),Object(W.jsx)(D.a,{variant:"body2",color:"error",children:x?"\xa1Hey! Las may\xfasculas est\xe1n activas":" "})]}),Object(W.jsx)(B.a,{disableElevation:!0,disabled:T,type:"submit",variant:"contained",color:"primary",startIcon:Object(W.jsx)(bn.a,{}),children:"loading"===I.state?"Accediendo...":"Acceder con Prometheus ID"})]})})};var mn=function(){var e=Object(n.useState)(function(){var e=Object.entries(qe).reduce((function(e,t){var a=Object(We.a)(t,2),n=a[0],r=a[1],o=Math.floor(Math.random()*r.length);return e[n]=r[o],e}),{});return Object(d.a)(Object(d.a)({},e),{},{avatarStyle:"Circle"})}()),t=Object(We.a)(e,2),a=t[0],r=t[1];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=Object(n.useRef)(e);Object(n.useEffect)((function(){e instanceof Function&&(a.current=e)}),[e]),Object(n.useEffect)((function(){var e=setInterval((function(){a.current instanceof Function&&a.current()}),t);return function(){return clearInterval(e)}}),[t])}((function(){var e=Math.ceil(Math.random()*Ve.length-1),t=Ve[e],a=qe[t],n=Math.ceil(Math.random()*a.length-1);r((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},t,a[n]))}))}),150),a};var pn=function(e){var t=e.className,a=e.avatarClassName,n=mn();return Object(W.jsx)(u.a,{className:t,children:Object(W.jsx)(u.a,{className:a,children:Object(W.jsx)(va.a,Object(d.a)(Object(d.a)({},n),{},{avatarStyle:"Transparent"}))})})};var fn,On,vn=function(){var e=Q(),t=e.root,a=e.loginContainer,n=e.homeBoxContainer,r=e.avatar,o=e.logo;return Object(W.jsxs)(ct.a,{elevation:0,raised:!0,className:t,children:[Object(W.jsx)(pn,{className:n,avatarClassName:r}),Object(W.jsx)(jn,{className:a,logoClassName:o})]})},hn=Object(v.d)({selectId:function(e){return e.messageId},sortComparer:function(e,t){return e.messageId-t.messageId}}),gn=Object(d.a)(Object(d.a)({},hn.getInitialState()),{},{lastMessagesCount:0,status:"idle",error:null,quoteId:null,mention:null,labels:[]}),xn=Object(v.c)("messages/fetchInitialMessages",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,o,i,c,s,l,u,b,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.dispatch,r=a.getState,e.prev=1,-1!==(o=r().rooms.active)){e.next=5;break}throw new Error("No se ha seleccionado sala");case 5:return i=r().auth,c=i.login,s=i.token,l=i.platformId,u={login:c,token:s,platformId:l,roomId:o},b="".concat("http://192.168.1.128:5010/","messages/getAvailable"),e.next=10,L.a.post(b,u);case 10:if(j=e.sent,!Array.isArray(j.data)){e.next=13;break}return e.abrupt("return",j.data.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{compoundText:Ae(e.message)})})));case 13:return e.abrupt("return",j.data);case 16:e.prev=16,e.t0=e.catch(1),we(e.t0,n);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,a){return e.apply(this,arguments)}}()),yn=Object(v.c)("messages/fetchNextMessages",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,o,i,c,s,l,u,b,j,m,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.dispatch,r=a.getState,e.prev=1,-1!==(o=r().rooms.active)){e.next=5;break}throw new Error("No se ha seleccionado sala");case 5:return i=r().messages.entities[r().messages.ids[0]],c=(null===i||void 0===i?void 0:i.roomId)===o?null===i||void 0===i?void 0:i.messageId:null,s=r().auth,l=s.login,u=s.token,b=s.platformId,j={login:l,token:u,platformId:b,roomId:o,lastId:c},m="".concat("http://192.168.1.128:5010/","messages/getAvailable"),e.next=12,L.a.post(m,j);case 12:if(p=e.sent,!Array.isArray(p.data)){e.next=15;break}return e.abrupt("return",p.data.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{compoundText:Ae(e.message)})})));case 15:return e.abrupt("return",p.data);case 18:e.prev=18,e.t0=e.catch(1),we(e.t0,n);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),Cn=Object(v.e)({name:"messages",initialState:gn,reducers:{addedMessage:hn.addOne,addedQuote:function(e,t){e.quoteId=t.payload,e.mention=null},removedQuote:function(e){e.quoteId=null},addedMention:function(e,t){e.mention=t.payload,e.quoteId=null},removedMention:function(e){e.mention=null},addedLabel:function(e,t){e.labels.findIndex((function(e){return e.tag===t.payload.tag}))<0&&e.labels.push(t.payload)},removedLabel:function(e,t){var a=e.labels.findIndex((function(e){return e.tag===t.payload.tag}));a>=0&&e.labels.splice(a,1)},updatedState:function(e,t){var a=e.entities[t.payload.previousId||t.payload.messageId];if(a){var n=t.payload,r=n.stateDate,o=n.lastState,i=n.stateLOGIN;a.stateDate=r,a.lastState=o,a.stateLOGIN=i,hn.upsertOne(e,a)}},updatedLastMessagesCount:function(e,t){e.lastMessagesCount=t.payload},clearedForm:function(e){e.mention=null,e.labels=[],e.quoteId=null},sendedMessage:function(e){e.mention=null,e.labels=[],e.quoteId=null},clearedMessages:function(e){hn.removeAll(e),e.mention=null,e.labels=[],e.quoteId=null,e.status="idle",e.error=null,e.lastMessagesCount=0}},extraReducers:(fn={},Object(m.a)(fn,xn.pending,(function(e){hn.removeAll(e),e.status="loading",e.error=null})),Object(m.a)(fn,xn.fulfilled,(function(e,t){hn.setAll(e,t),e.lastMessagesCount=0,e.status="done",e.error=null})),Object(m.a)(fn,xn.rejected,(function(e,t){e.status="error",e.error=t.error.message})),Object(m.a)(fn,yn.pending,(function(e){e.status="loading",e.error=null,e.lastMessagesCount=0})),Object(m.a)(fn,yn.fulfilled,(function(e,t){e.lastMessagesCount=t.payload.length,hn.upsertMany(e,t),e.status="done",e.error=null})),Object(m.a)(fn,yn.rejected,(function(e,t){e.status="error",e.error=t.error.message})),fn)}),Sn=Cn.reducer,In=Cn.actions,kn=In.addedMessage,Nn=In.updatedState,wn=(In.sendedMessage,In.addedQuote),Rn=In.removedQuote,An=In.addedMention,Mn=In.removedMention,Pn=In.addedLabel,Tn=In.removedLabel,Ln=In.clearedForm,En=In.updatedLastMessagesCount,Bn=In.clearedMessages,Dn=hn.getSelectors((function(e){return e.messages})),zn=Dn.selectById,Hn=Dn.selectIds,Fn=Object(h.a)((function(e){return e.messages.quoteId}),(function(e){return e.messages.mention}),(function(e){return e.messages.labels}),(function(e,t,a){return[e,t,a]})),Wn=Object(v.d)({selectId:function(e){return e.login},sortComparer:function(e,t){var a=e.role.localeCompare(t.role);return 0!==a?-1*a:e.name.localeCompare(t.name)}}),qn=Object(d.a)(Object(d.a)({},Wn.getInitialState()),{},{state:"idle",error:null}),Gn=Object(v.c)("users/fetchUsersByRoom",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,o,i,c,s,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getState,r=a.dispatch,e.prev=1,o=n().auth,i=o.token,c=o.login,s=n().rooms.active,l="".concat("http://192.168.1.128:5010/","users/getConnected"),e.next=7,L.a.post(l,{login:c,token:i,roomId:s});case 7:return u=e.sent,e.abrupt("return",null===u||void 0===u?void 0:u.data);case 11:e.prev=11,e.t0=e.catch(1),we(e.t0,r);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),Un=Object(v.e)({name:"users",initialState:qn,reducers:{userAdded:Wn.upsertOne,userRemoved:function(e,t){Wn.removeOne(e,t.payload.login)},clearedUsers:function(e){Wn.removeAll(e),e.state="idle",e.error=null}},extraReducers:(On={},Object(m.a)(On,Gn.pending,Wn.removeAll),Object(m.a)(On,Gn.fulfilled,(function(e,t){Wn.setAll(e,t),e.state="done"})),Object(m.a)(On,Gn.rejected,(function(e){e.state="done"})),On)}),Vn=Un.reducer,Yn=Un.actions,_n=Yn.userAdded,Kn=Yn.userRemoved,Qn=(Yn.userChanged,Yn.clearedUsers,Wn.getSelectors((function(e){return e.users}))),Xn=Qn.selectById,Jn=(Qn.selectIds,Qn.selectAll),Zn=["A1","A2"],$n=Object(h.a)((function(e){return e.users.entities}),(function(e){var t=Object.values(e),a=t.length,n=t.findIndex((function(e){var t=e.role;return Zn.includes(t)})),r=t.findIndex((function(e){var t=e.role;return!Zn.includes(t)})),o=0;return r>=0&&(t.splice(r,0,{label:"# STAFF"}),o++),n>=0&&t.splice(n+o,0,{label:"# AGENTES"}),[t,a]}));var er=function(){var e=Object(j.b)(),t=Object(j.c)(It),a=Object(j.c)((function(e){return e.filteredMessages.filter}));return Object(n.useEffect)((function(){t&&(e(Ln()),e(xn()),""!==a&&e(Te()),e(Gn()),e(k({roomId:null===t||void 0===t?void 0:t.roomId,type:null===t||void 0===t?void 0:t.type})))}),[t,e]),t},tr=a(206),ar=a.n(tr),nr=a(205),rr=a.n(nr),or=a(204),ir=a.n(or),cr=a(207),sr=a.n(cr),lr=a(208),ur=a.n(lr),dr=a(203),br=a.n(dr),jr=a(454),mr=a(466),pr=a(200),fr=a.n(pr),Or=a(452),vr=a(442);var hr=function(e){var t=e.messageLength,a=e.className,r=Object(n.useState)(300-t<=20),o=Object(We.a)(r,2),i=o[0],c=o[1];return Object(n.useEffect)((function(){c(300-t<=20)}),[t]),Object(W.jsx)(vr.a,{in:i,className:a,children:Object(W.jsxs)(u.a,{children:[Object(W.jsx)(Or.a,{thickness:4,size:22,variant:"determinate",value:t/3}),Object(W.jsx)(D.a,{variant:"caption",children:300-t})]})})},gr=a(429),xr=a(425),yr={online:"@Online",labels:"#Etiquetas"};function Cr(e){var t=e.type,a=e.active,n=e.search,r=e.content,o=e.onClick,i=e.containerStyle,c=e.subheaderStyle,s=e.close;return a?Object(W.jsx)(xr.a,{onClickAway:s,children:Object(W.jsx)(gr.a,{in:a,className:i,component:u.a,children:Object(W.jsx)(dt.a,{disablePadding:!0,subheader:Object(W.jsx)(Ya.a,{className:c,color:"primary",children:yr[t]}),children:function(){var e=n?r.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})):r;return 0!==e.length?e.map((function(e){return Object(W.jsx)(sa.a,{onClick:function(){return o(t,e)},component:"li",button:!0,children:Object(W.jsx)(da.a,{primary:e.name})},e.login||e.tag)})):Object(W.jsx)(sa.a,{component:"li",children:Object(W.jsx)(da.a,{primary:"Ning\xfan resultado"})})}()})})}):null}var Sr=r.a.memo(Cr),Ir=a(95),kr=a.n(Ir),Nr=a(426);var wr=function(e){var t=e.className,a=e.quoteId,n=Object(j.b)(),r=Object(j.c)((function(e){return zn(e,a)}));return Object(W.jsx)(Nr.a,{in:Boolean(r),children:Object(W.jsxs)(u.a,{className:t,children:[Object(W.jsxs)(D.a,{variant:"body2",color:"textSecondary",children:["En respuesta a ",Object(W.jsx)("span",{className:"quote-name",children:null===r||void 0===r?void 0:r.name}),":"]}),Object(W.jsx)(D.a,{variant:"body2",color:"textSecondary",children:null===r||void 0===r?void 0:r.message}),Object(W.jsx)(ba.a,{size:"small",onClick:function(){n(Rn())},children:Object(W.jsx)(kr.a,{fontSize:"small"})})]})})},Rr=a(470),Ar=a(199),Mr=a.n(Ar);var Pr=function(e){var t=e.mention,a=e.removeMention,n=e.labels,r=e.removeLabel,o=e.className;return t||0!==n.length?Object(W.jsxs)(u.a,{className:o,children:[t&&Object(W.jsx)(Rr.a,{color:"secondary",label:t.name,onDelete:a,deleteIcon:Object(W.jsx)(kr.a,{}),icon:Object(W.jsx)(Kt.a,{})}),n.map((function(e){return Object(W.jsx)(Rr.a,{label:e.name,onClick:function(){},onDelete:function(){return r(e)},deleteIcon:Object(W.jsx)(kr.a,{}),icon:Object(W.jsx)(Mr.a,{})},e.tag)}))]}):null},Tr={active:!1,charPos:void 0,search:""};var Lr=function(){var e=ee(),t=e.root,a=e.extraContainer,r=e.extraSubheader,o=e.infoBox,i=e.quote,c=e.inputForm,s=e.buttonSend,l=e.characterCounter,b=e.innerContainer,m=Object(n.useState)(""),p=Object(We.a)(m,2),f=p[0],O=p[1],v=Object(n.useRef)(),h=Object(j.c)(Jn),g=Object(j.b)(),x=Object(j.c)(Fn),y=Object(We.a)(x,3),C=y[0],S=y[1],I=y[2],k=Object(j.c)((function(e){var t;return[e.rooms.active,null===(t=e.rooms.entities[e.rooms.active])||void 0===t?void 0:t.role]})),N=Object(We.a)(k,2),w=N[0],R=N[1],A=Object(n.useState)(Tr),M=Object(We.a)(A,2),P=M[0],T=M[1],L=Object(n.useState)(Tr),E=Object(We.a)(L,2),B=E[0],D=E[1];function z(){if(f){var e={message:f,receiver:null===S||void 0===S?void 0:S.login,labels:I.map((function(e){return e.tag})).join()};C&&(e.previousId=C),g(Et(e)),O("")}}return Object(n.useEffect)((function(){var e;[S,I,C].some(Boolean)&&(null===(e=v.current)||void 0===e||e.focus())}),[S,I,C]),10617!==w&&12325!==w||(null===R||void 0===R?void 0:R.canSendRelease)?Object(W.jsxs)(u.a,{className:t,component:"form",children:[Object(W.jsx)(wr,{className:i,quoteId:C}),Object(W.jsxs)(u.a,{className:b,children:[Object(W.jsx)(La.a,{fullWidth:!0,className:c,children:Object(W.jsx)(mr.a,{inputRef:v,id:"outlined-multiline-static",placeholder:"Escribe un mensaje aqu\xed",variant:"outlined",onKeyPress:function(e){e.ctrlKey&&"NumpadEnter"===e.code&&e.target.value&&O(f+"\n"),e.ctrlKey||("Enter"===e.code&&e.target.value||"NumpadEnter"===e.code&&e.target.value)&&(e.preventDefault(),z())},rows:2,value:f,onChange:function(e){var t=e.target.value;if(!(t.length>300)){var a=function(e){var t=e.length-1,a=e[t]||"",n=!e[t-1]||" "===e[t-1];return{lastPos:t,shouldOpenOnline:n&&"@"===a,shouldOpenLabels:n&&"#"===a}}(t),n=a.lastPos,r=a.shouldOpenOnline,o=a.shouldOpenLabels;P.active||B.online||!r||T({active:!0,search:"",charPos:n}),B.active||P.active||!o||D({active:!0,search:"",charPos:n}),O(t),P.active&&T((function(e){return"@"!==t[P.charPos]?Object(d.a)(Object(d.a)({},e),{},{active:!1}):Object(d.a)(Object(d.a)({},e),{},{search:t.slice(e.charPos+1)})})),B.active&&D((function(e){return"#"!==t[B.charPos]?Object(d.a)(Object(d.a)({},e),{},{active:!1}):Object(d.a)(Object(d.a)({},e),{},{search:t.slice(e.charPos+1)})}))}},multiline:!0})}),Object(W.jsx)(hr,{messageLength:f.length,className:l}),Object(W.jsx)(ba.a,{size:"small",className:s,disabled:!f,onClick:z,children:Object(W.jsx)(fr.a,{fontSize:"large"})})]}),(null===R||void 0===R?void 0:R.canAnswerMention)&&Object(W.jsx)(Sr,{type:"online",active:!S&&P.active,search:P.search,content:h,onClick:function(e,t){var a="online"===e;a?T((function(e){return Object(d.a)(Object(d.a)({},e),{},{active:!1})})):D((function(e){return Object(d.a)(Object(d.a)({},e),{},{active:!1})})),O((function(e){return e.slice(0,a?P.charPos:B.charPos)})),g(a?An(t):Pn(t))},containerStyle:a,subheaderStyle:r,close:function(){return T((function(e){return Object(d.a)(Object(d.a)({},e),{},{active:!1})}))}}),Object(W.jsx)(Pr,{labels:I,mention:S,removeMention:function(){return g(Mn())},removeLabel:function(e){return g(Tn(e))},className:o})]}):null};var Er=function(e){var t=e.role,a=e.user,n=e.className,r=e.onUserContextMenu;console.log("User: ",a);var o=Object(j.b)();return Object(W.jsxs)(sa.a,{button:!0,divider:!0,className:n,onClick:function(){t.canAnswerMention&&o(An(a))},onContextMenu:function(e){e.preventDefault();var t=e.clientX,n=e.clientY;r({x:t,y:n},a)},children:[Object(W.jsx)(ua.a,{style:{marginRight:"5px"},children:function(e){if(!e)return null;var t="";return e.split(" ").forEach((function(e){e.length>3&&t.length<2&&(t+=e.charAt(0))})),t.toUpperCase()}(a.name)}),"\xa0",Object(W.jsx)(da.a,{primary:a.name})]})},Br=function(e){var t=e.label;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ya.a,{children:t}),Object(W.jsx)(_a.a,{})]})},Dr=function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(_a.a,{}),Object(W.jsx)(sa.a,{children:Object(W.jsx)(da.a,{primary:"No hay resultados"})}),Object(W.jsx)(_a.a,{})]})},zr=function(){return Object(W.jsx)(sa.a,{children:Object(W.jsx)(da.a,{primary:"Ning\xfan usuario conectado"})})},Hr={user:null,x:null,y:null},Fr=Object(n.forwardRef)((function(e,t){var a,r=Object(j.b)(),o=Object(n.useState)(Hr),i=Object(We.a)(o,2),c=i[0],s=i[1],l=Object(j.c)(wt),u=function(e,t){return s({user:t,x:e.x,y:e.y})},d=function(){return s(Hr)};Object(n.useImperativeHandle)(t,(function(){return u}));var b=Object(n.useMemo)((function(){return function(e,t){var a=[];return t?(a.push({action:"private",name:"Abrir conversaci\xf3n",icon:Object(W.jsx)(ea.a,{fontSize:"small"})}),e.canAnswerMention&&a.push({action:"mention",name:"Mencionar",icon:Object(W.jsx)(Kt.a,{fontSize:"small"})}),a):a}(l,null===c||void 0===c?void 0:c.user)}),[l,null===c||void 0===c?void 0:c.user]),m=null!==(null===(a=c.user)||void 0===a?void 0:a.login)&&null!==c.x&&null!==c.y,p=null!==c.y&&null!==c.x?{top:c.y,left:c.x}:void 0;return Object(W.jsx)(qt.a,{keepMounted:!0,id:"messages-context-menu",anchorReference:"anchorPosition",onClose:d,open:m,anchorPosition:p,children:b.map((function(e){return Object(W.jsxs)(Gt.a,{onClick:function(){return function(e){var t;switch(console.log("Menu contextual en lista de usuarios"),e){case"mention":var a=c.user,n=a.login,o=a.name;r(An({login:n,name:o}));break;case"private":r(Bt({guestLogin:null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.login}))}d()}(e.action)},children:[Object(W.jsx)(Ut.a,{children:e.icon}),Object(W.jsx)(D.a,{variant:"inherit",children:e.name})]},e.action)}))})})),Wr=a(453),qr=a(455),Gr=a(456);var Ur=function(){var e=ae(),t=e.root,a=e.header,r=e.content,o=e.list,i=e.item,c=e.searchBox,s=Object(n.useRef)(),l=Object(j.c)($n),u=Object(We.a)(l,2),d=u[0],b=u[1],m=Object(j.c)(wt),p=Object(n.useState)(""),f=Object(We.a)(p,2),O=f[0],v=f[1];function h(e,t){var a=s.current;a instanceof Function&&a(e,t)}return Object(Wr.a)((function(e){return e.breakpoints.down("md")}))?null:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(ct.a,{elevation:0,raised:!0,className:t,children:[Object(W.jsx)(jr.a,{className:a,title:"Online: ".concat(b)}),Object(W.jsxs)(qr.a,{className:r,children:[Object(W.jsx)(Y.a,{className:c,margin:"dense",variant:"outlined",value:O,onChange:function(e){var t=e.target.value;return v(t)},placeholder:"Buscar usuarios...",endAdornment:Object(W.jsx)(st.a,{position:"end",children:Object(W.jsx)(Gr.a,{})})}),Object(W.jsx)(dt.a,{disablePadding:!0,className:o,children:0===b?Object(W.jsx)(zr,{}):function(){var e=O?d.filter((function(e){return function(e,t){var a=e.label,n=e.name;return!!a||n.includes(t.toLowerCase())}(e,O)})):d;return 0===b?Object(W.jsx)(Dr,{}):e.map((function(e){return e.label?Object(W.jsx)(Br,{label:e.label},e.label):Object(W.jsx)(Er,{user:e,role:m,className:i,onUserContextMenu:h},e.login)}))}()})]})]}),Object(W.jsx)(Fr,{ref:s})]})},Vr=a(132);var Yr=function(e){var t=Object(j.b)(),a=Object(n.useState)(5e3),r=Object(We.a)(a,2),o=r[0],i=r[1],c=Object(j.c)((function(e){return e.messages.lastMessagesCount})),s=Object(n.useCallback)((function(){e<100||-1===c||t(yn())}),[t,e,c]);return Object(n.useEffect)((function(){if(0===c)return i(5e3);i((function(e){return e-c})),c>0&&c<100&&t(En(-1))}),[c,t]),[o,s]},_r=a(457),Kr={minWidth:56,height:56,marginRight:16,borderRadius:"50%",backgroundColor:"#cecece75"};var Qr=function(e){var t=e.className,a=e.avatar,n=e.isScrolling,r="Default"===a?Ye:a;return void 0!==n&&n?Object(W.jsx)("div",{className:"avatar-placeholder",style:Kr}):Object(W.jsx)(_r.a,{className:t,children:Object(W.jsx)(va.a,Object(d.a)(Object(d.a)({},r),{},{avatarStyle:"Transparent"}))})},Xr=function(e,t){return"COMUN"===t?function(e){return new Date(e).toLocaleString()}(e):function(e){var t=new Date(e);return null===t||void 0===t?void 0:t.toLocaleTimeString()}(e)};var Jr=function(e){var t=e.name,a=e.date,n=e.roomType;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(D.a,{component:"span",variant:"h6",color:"textPrimary",children:t}),Object(W.jsxs)(D.a,{component:"span",variant:"body2",color:"textPrimary",children:["\xa0\xa0\u2022\xa0\xa0",Xr(a,n),"h"]})]})},Zr=a(458);var $r=function(e){var t=e.id,a=e.receiver,n=e.compoundMessage,r=e.getMentionName;return Object(W.jsxs)(W.Fragment,{children:[a?"@".concat(r(a),": "):"",n.map((function(e,a){var n=e.type,r=e.value;return"text"===n?r:Object(W.jsx)(Zr.a,{href:r,color:"primary",rel:"noreferrer",target:"_blank",children:r},"".concat(t,"-").concat(a))}))]})},eo={cursor:"pointer"},to=function(e){var t=e.id,a=e.isScrolling,n=e.onContextMenu,r=e.onDoubleClick,o=te(),i=Object(j.c)((function(e){return zn(e,t)})),c=Object(j.c)((function(e){var t;return[e.auth.login,e.auth.name.toLowerCase(),null===(t=e.rooms.entities[null===i||void 0===i?void 0:i.roomId])||void 0===t?void 0:t.type]})),s=Object(We.a)(c,3),l=s[0],d=s[1],b=s[2],m=Object(j.c)((function(e){return Xn(e,null===i||void 0===i?void 0:i.receiver)}))||"";if(!i)return null;var p=E(i.avatar,i.avatar);return Object(W.jsxs)(sa.a,{divider:!0,alignItems:"center",id:i.messageId,className:"".concat(o.root," ").concat(function(){var e=i.lastState;return 3===e?o.assigned:4===e?o.answered:""}()," ").concat(i.emitter===l?o.mine:""),onContextMenu:function(e){e.preventDefault();var t=e.clientX,a=e.clientY,r=i.messageId,o=i.emitter,c=i.name,s=i.role,l=i.lastState,u=i.stateLOGIN;n({x:t,y:a},{messageId:r,login:o,name:c,role:s,lastState:l,stateLOGIN:u})},children:[Object(W.jsx)(u.a,{style:eo,children:Object(W.jsx)(Qr,{className:o.avatar,avatar:p,isScrolling:a})}),Object(W.jsxs)(u.a,{onDoubleClick:function(){return r(i.emitter,i.messageId,i.lastState)},style:eo,children:[Object(W.jsx)(da.a,{className:o.text,primary:Object(W.jsx)(Jr,{name:i.name,date:i.date,roomType:b}),secondary:Object(W.jsx)($r,{id:i.messageId,receiver:i.receiver,compoundMessage:i.compoundText,getMentionName:function(e){return e===l?d:(null===m||void 0===m?void 0:m.name)||e}})}),i.previousId&&Object(W.jsxs)(u.a,{className:o.quote,children:[Object(W.jsxs)(D.a,{component:"h6",variant:"subtitle2",color:"textPrimary",children:["en respuesta a ",Object(W.jsx)("span",{className:"quote-user",children:i.previousUserName}),":"]}),Object(W.jsx)(D.a,{component:"span",variant:"body2",color:"textSecondary",children:i.previousMessage})]}),i.labels&&Object(W.jsx)(u.a,{className:o.labelContainer,children:i.labels.split(",").map((function(e){return Object(W.jsx)(Rr.a,{label:e.trim().toUpperCase(),size:"small"},e)}))})]})]})},ao=r.a.memo(to);var no=function(e){var t=e.name,a=e.date,n=e.roomType;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(D.a,{component:"span",variant:"h6",color:"textPrimary",children:t}),Object(W.jsxs)(D.a,{component:"span",variant:"body2",color:"textPrimary",children:["\xa0\xa0\u2022\xa0\xa0",Xr(a,n),"h"]})]})};var ro=function(e){var t=e.id,a=e.receiver,n=e.compoundMessage,r=e.getMentionName;return Object(W.jsxs)(W.Fragment,{children:[a?"@".concat(r(a),": "):"",n.map((function(e,a){var n=e.type,r=e.value;return"text"===n?r:Object(W.jsx)(Zr.a,{href:r,color:"primary",rel:"noreferrer",target:"_blank",children:r},"".concat(t,"-").concat(a))}))]})},oo={cursor:"pointer"},io=function(e){var t=e.id,a=e.isScrolling,n=e.onContextMenu,r=e.onDoubleClick,o=te(),i=Object(j.c)((function(e){return He(e,t)})),c=Object(j.c)((function(e){var t;return[e.auth.login,e.auth.name.toLowerCase(),null===(t=e.rooms.entities[null===i||void 0===i?void 0:i.roomId])||void 0===t?void 0:t.type]})),s=Object(We.a)(c,3),l=s[0],d=s[1],b=s[2],m=Object(j.c)((function(e){return Xn(e,null===i||void 0===i?void 0:i.receiver)}))||"";if(!i)return null;var p=E(i.avatar,i.avatar);return Object(W.jsxs)(sa.a,{divider:!0,alignItems:"center",id:i.messageId,className:"".concat(o.root," ").concat(function(){var e=i.lastState;return 3===e?o.assigned:4===e?o.answered:""}()," ").concat(i.emitter===l?o.mine:""),onContextMenu:function(e){e.preventDefault();var t=e.clientX,a=e.clientY,r=i.messageId,o=i.emitter,c=i.name,s=i.role,l=i.lastState,u=i.stateLOGIN;n({x:t,y:a},{messageId:r,login:o,name:c,role:s,lastState:l,stateLOGIN:u})},children:[Object(W.jsx)(u.a,{style:oo,children:Object(W.jsx)(Qr,{className:o.avatar,avatar:p,isScrolling:a})}),Object(W.jsxs)(u.a,{onDoubleClick:function(){return r(i.emitter,i.messageId,i.lastState)},style:oo,children:[Object(W.jsx)(da.a,{className:o.text,primary:Object(W.jsx)(no,{name:i.name,date:i.date,roomType:b}),secondary:Object(W.jsx)(ro,{id:i.messageId,receiver:i.receiver,compoundMessage:i.compoundText,getMentionName:function(e){return e===l?d:(null===m||void 0===m?void 0:m.name)||e}})}),i.previousId&&Object(W.jsxs)(u.a,{className:o.quote,children:[Object(W.jsxs)(D.a,{component:"h6",variant:"subtitle2",color:"textPrimary",children:["en respuesta a ",Object(W.jsx)("span",{className:"quote-user",children:i.previousUserName}),":"]}),Object(W.jsx)(D.a,{component:"span",variant:"body2",color:"textSecondary",children:i.previousMessage})]}),i.labels&&Object(W.jsx)(u.a,{className:o.labelContainer,children:i.labels.split(",").map((function(e){return Object(W.jsx)(Rr.a,{label:e.trim().toUpperCase(),size:"small"},e)}))})]})]})},co=r.a.memo(io),so={message:null,x:null,y:null},lo=Object(n.forwardRef)((function(e,t){var a,r=Object(j.b)(),o=Object(n.useState)(so),i=Object(We.a)(o,2),c=i[0],s=i[1],l=Object(j.c)((function(e){return e.auth})),u=Object(j.c)(wt),d=function(e,t){("A1"!==t.role&&"A2"!==t.role||"A1"!==u)&&s({message:t,x:e.x,y:e.y})},b=function(){return s(so)};Object(n.useImperativeHandle)(t,(function(){return d}));var m=Object(n.useMemo)((function(){return function(e,t,a){var n=[];if(!t)return n;var r=t.role,o=t.lastState,i=t.stateLOGIN;e.canAnswerMention&&(o<4&&n.push({action:"answer",name:"Responder",icon:Object(W.jsx)(Xt.a,{fontSize:"small"})}),"A1"!==e.role&&n.push({action:"mention",name:"Mencionar usuario",icon:Object(W.jsx)(Kt.a,{fontSize:"small"})})),"C1"===e.role&&((o<3||5===o)&&n.push({action:"assign",name:"Asignarme el mensaje",icon:Object(W.jsx)(Zt.a,{fontSize:"small"})}),3===o&&i===a&&n.push({action:"unassign",name:"Desasignarme el mensaje",icon:Object(W.jsx)(Zt.a,{fontSize:"small"})}));var c=e.canSeeOnline;return c&&("ALL"===c||c.includes(r))&&n.push({action:"private",name:"Escribir en privado",icon:Object(W.jsx)(Yt.a,{fontSize:"small"})}),n}(u,null===c||void 0===c?void 0:c.message,l.login)}),[u,null===c||void 0===c?void 0:c.message]),p=null!==(null===(a=c.message)||void 0===a?void 0:a.messageId)&&null!==c.x&&null!==c.y,f=null!==c.y&&null!==c.x?{top:c.y,left:c.x}:void 0;return Object(W.jsx)(qt.a,{keepMounted:!0,id:"messages-context-menu",anchorReference:"anchorPosition",onClose:b,open:p,anchorPosition:f,children:m.map((function(e){return Object(W.jsxs)(Gt.a,{onClick:function(){return function(e){var t,a,n,o;switch(e){case"answer":r(wn(null===c||void 0===c||null===(t=c.message)||void 0===t?void 0:t.messageId));break;case"mention":var i=c.message,s=i.login,l=i.name;r(An({login:s,name:l}));break;case"assign":r(Dt({messageId:null===c||void 0===c||null===(a=c.message)||void 0===a?void 0:a.messageId,stateId:3}));break;case"unassign":r(Dt({messageId:null===c||void 0===c||null===(n=c.message)||void 0===n?void 0:n.messageId,stateId:5}));break;case"private":r(Bt({guestLogin:null===c||void 0===c||null===(o=c.message)||void 0===o?void 0:o.login}))}b()}(e.action)},children:[Object(W.jsx)(Ut.a,{children:e.icon}),Object(W.jsx)(D.a,{variant:"inherit",children:e.name})]},e.action)}))})})),uo=a(201),bo=a.n(uo);var jo=function(e){var t=e.anchored,a=e.onClick,n=e.className;return Object(W.jsx)(gr.a,{in:!t,children:Object(W.jsx)(ja.a,{title:"Ir abajo",placement:"top",arrow:!0,children:Object(W.jsx)(ba.a,{color:"primary",className:n,onClick:a,children:Object(W.jsx)(bo.a,{})})})})},mo={scrollbarWidth:"thin",scrollbarColor:"#ff7900 #dbdbdb"},po=function(e){var t=e.isFiltered,a=Object(n.useRef)(),r=Object(n.useRef)(),o=Object(n.useState)(!1),i=Object(We.a)(o,2),c=i[0],s=i[1],l=Object(n.useState)(!1),d=Object(We.a)(l,2),b=d[0],m=d[1],p=Object(j.c)(It),f=Object(j.c)((function(e){return e.messages.status})),O=Object(j.c)((function(e){return e.filteredMessages.status})),v=Object(j.c)(Hn),h=Object(j.c)(Fe),g=Object(j.c)((function(e){return e.auth.login})),x=Object(j.b)(),y=$(),C=y.root,S=y.scrollButton,I=y.loader,k=Yr(v.length),N=Object(We.a)(k,2),w=N[0],R=N[1],A=Yr(h.length),M=Object(We.a)(A,2),P=M[0],T=M[1],L=Object(n.useCallback)((function(e){var t={behavior:e,align:"start",index:Number.MAX_VALUE};setTimeout((function(){return null===r||void 0===r?void 0:r.current.scrollToIndex(t)}))}),[]);function E(e,t){if(!(null===p||void 0===p?void 0:p.private)&&t.login!==g){var n=a.current;n instanceof Function&&n(e,t)}}function B(e,t,a){(null===p||void 0===p?void 0:p.role.canAnswerMention)&&e!==g&&4!==a&&x(wn(t))}var D="loading"===f,z="loading"===O;return t?t?0===h.length?Object(W.jsx)(u.a,{className:C,children:z&&Object(W.jsx)(Or.a,{size:75,variant:"indeterminate",color:"primary",className:I})}):Object(W.jsxs)(u.a,{className:C,children:[z&&Object(W.jsx)(Or.a,{size:75,variant:"indeterminate",color:"primary",className:I}),Object(W.jsx)(Vr.a,{ref:r,firstItemIndex:P,initialTopMostItemIndex:h.length-1,atBottomStateChange:m,startReached:T,isScrolling:s,data:h,style:mo,followOutput:!!b&&"smooth",itemContent:function(e,t){return Object(W.jsx)(co,{id:t,onContextMenu:E,onDoubleClick:B,isScrolling:c})}}),Object(W.jsx)(jo,{anchored:b,onClick:function(){return L("smooth")},className:S}),Object(W.jsx)(lo,{ref:a})]}):void 0:0===v.length?Object(W.jsx)(u.a,{className:C,children:D&&Object(W.jsx)(Or.a,{size:75,variant:"indeterminate",color:"primary",className:I})}):Object(W.jsxs)(u.a,{className:C,children:[D&&Object(W.jsx)(Or.a,{size:75,variant:"indeterminate",color:"primary",className:I}),Object(W.jsx)(Vr.a,{ref:r,firstItemIndex:w,initialTopMostItemIndex:v.length-1,atBottomStateChange:m,startReached:R,isScrolling:s,data:v,style:mo,followOutput:!!b&&"smooth",itemContent:function(e,t){return Object(W.jsx)(ao,{id:t,onContextMenu:E,onDoubleClick:B,isScrolling:c})}}),Object(W.jsx)(jo,{anchored:b,onClick:function(){return L("smooth")},className:S}),Object(W.jsx)(lo,{ref:a})]})},fo={type:"Funci\xf3n incompleta",observations:""},Oo=Object(F.a)((function(e){return{btnGuardar:{marginRight:20,width:30,height:30,borderRadius:"50%",color:e.palette.background.main,backgroundColor:e.palette.primary.main},btnCerrar:{marginRight:20,width:30,height:30,borderRadius:"50%",color:e.palette.background.main}}})),vo=Object(n.forwardRef)((function(e,t){var a=Object(n.useContext)(ka).primaryColor,r=Object(n.useState)(!1),o=Object(We.a)(r,2),i=o[0],c=o[1],s=Object(n.useState)(fo),l=Object(We.a)(s,2),b=l[0],p=l[1],v=function(){return c(!0)},h=function(){return c(!1)},g=Oo();function x(e){var t=e.target,a=t.name,n=t.value;p((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},a,n))}))}Object(n.useImperativeHandle)(t,(function(){return{open:v}}));var y=Object(j.b)(),C=Object(j.c)((function(e){return e.auth})),S=C.login,I=C.token;function k(){return(k=Object(O.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b.type&&b.observations){e.next=3;break}return e.abrupt("return",y(N(Ce("No se han rellenado todos los campos"))));case 3:return a={VERSION:"M4.0.0",DEPARTAMENTO:"CALIO",APLICACION:"Calio",TIPO:b.type,OBSERVACIONES:b.observations,LOGIN:S,tokenID:I},"https://localhost:5010/api/nuevoReporte",e.prev=5,e.next=8,L.a.post("https://localhost:5010/api/nuevoReporte",a);case 8:if("insertOK"!==e.sent.data){e.next=13;break}return y(N(xe)),p(fo),e.abrupt("return",h());case 13:throw new Error("No se ha podido enviar el Feedback");case 16:e.prev=16,e.t0=e.catch(5),y(N(Ce("No se ha podido enviar el Feedback")));case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}var w=ne().root;return Object(W.jsxs)(Ma.a,{open:i,onClose:h,scroll:"paper","aria-labelledby":"dialogo-feedback-titulo",maxWidth:"sm",fullWidth:!0,children:[Object(W.jsx)(Pa.a,{id:"dialogo-feedback-titulo",children:"Feedback"}),Object(W.jsxs)(Ta.a,{dividers:!0,children:[Object(W.jsx)(D.a,{variant:"subtitle2",color:"textPrimary",children:"Para colaborar con el progreso de la herramienta, ponemos a vuestra disposici\xf3n este peque\xf1o formulario desde el que pod\xe9is darnos feedback sobre su funcionamiento. Agradecemos vuestra paciencia mientras revisamos las solicitudes."}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsxs)(u.a,{component:"form",className:w,children:[Object(W.jsxs)(La.a,{required:!0,variant:"outlined",children:[Object(W.jsx)(Ea.a,{id:"select-tipo-reporte",children:"Motivo"}),Object(W.jsxs)(Ba.a,{label:"Motivo",name:"type",value:b.type,onChange:x,children:[Object(W.jsx)(Gt.a,{value:"Funci\xf3n incompleta",children:"Funci\xf3n incompleta"}),Object(W.jsx)(Gt.a,{value:"Propuesta de mejora",children:"Propuesta de mejora"}),Object(W.jsx)(Gt.a,{value:"Lentitud",children:"Lentitud en la web"}),Object(W.jsx)(Gt.a,{value:"Otros",children:"Otros"})]})]}),Object(W.jsxs)(La.a,{required:!0,variant:"outlined",children:[Object(W.jsx)(Ea.a,{id:"input-observaciones-reporte",children:"Observaciones"}),Object(W.jsx)(Y.a,{multiline:!0,rowsMax:3,label:"Observaciones",name:"observations",value:b.observations,onChange:x})]})]})]}),Object(W.jsxs)(Da.a,{children:[Object(W.jsx)(ja.a,{title:"Cerrar",children:Object(W.jsx)(ba.a,{className:g.btnCerrar,onClick:h,children:Object(W.jsx)(za.a,{})})}),Object(W.jsx)(ja.a,{title:"Guardar",children:Object(W.jsx)(ba.a,{style:{backgroundColor:a},className:g.btnGuardar,onClick:function(e){return k.apply(this,arguments)},children:Object(W.jsx)(Ha.a,{})})})]})]})})),ho=["Agente","Superagente","Coordinador/Formador","Comunicaci\xf3n","Recursos Humanos","Responsable","Supervisor","Administrador"],go=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({type:"",login:""}),r=Object(We.a)(a,2),o=r[0],i=r[1],c=Object(n.useState)({}),s=Object(We.a)(c,2),l=s[0],b=s[1],p=Object(n.useState)(!1),f=Object(We.a)(p,2),O=f[0],v=f[1],h=Object(j.b)(),g=Object(j.c)((function(e){return e.rooms.active})),x=function(){return v(!0)},y=function(){return v(!1)};Object(n.useImperativeHandle)(t,(function(){return{open:x}})),Object(n.useEffect)((function(){"POPUP"===o.type?b({message:""}):"UPDATE_ROOM"===o.type?b({roomId:"",role:""}):b({})}),[o.type]);var C=function(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},a,n))}))},S=function(e){var t=e.target,a=t.name,n=t.value;b((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},a,n))}))};return Object(W.jsxs)(Ma.a,{open:O,onClose:y,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[Object(W.jsx)(Pa.a,{children:"Panel de Administracion [solo Z2 -en pruebas-]"}),Object(W.jsxs)(Ta.a,{dividers:!0,children:[Object(W.jsxs)(La.a,{required:!0,variant:"outlined",fullWidth:!0,children:[Object(W.jsx)(Ea.a,{id:"admin-receptor",children:"Receptor"}),Object(W.jsx)(Y.a,{value:o.login,onChange:C,name:"login",label:"Receptor"})]}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsxs)(La.a,{required:!0,variant:"outlined",fullWidth:!0,children:[Object(W.jsx)(Ea.a,{id:"admin-accion",children:"Acci\xf3n"}),Object(W.jsxs)(Ba.a,{label:"Acci\xf3n",name:"type",value:o.type,onChange:C,children:[Object(W.jsx)(Gt.a,{value:"",children:"Selecciona una acci\xf3n"}),Object(W.jsx)(Gt.a,{value:"UPDATE_ROOM",children:"A\xf1adir/modificar sala"}),Object(W.jsx)(Gt.a,{value:"DISCONNECT",children:"Forzar desconexi\xf3n"}),Object(W.jsx)(Gt.a,{value:"POPUP",children:"Mensaje de Administraci\xf3n"})]})]}),Object(W.jsxs)(u.a,{children:["POPUP"===o.type&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsxs)(La.a,{variant:"outlined",required:!0,fullWidth:!0,children:[Object(W.jsx)(Ea.a,{children:"Mensaje"}),Object(W.jsx)(Y.a,{label:"Mensaje",multiline:!0,maxRows:2,name:"message",value:l.message,onChange:S})]})]}),"UPDATE_ROOM"===o.type&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsxs)(La.a,{variant:"outlined",required:!0,fullWidth:!0,children:[Object(W.jsx)(Ea.a,{children:"ID de sala"}),Object(W.jsx)(Y.a,{label:"ID de sala",type:"number",name:"roomId",value:l.roomId,onChange:S})]}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsxs)(La.a,{variant:"outlined",required:!0,fullWidth:!0,children:[Object(W.jsx)(Ea.a,{children:"Etiqueta de rol"}),Object(W.jsx)(Ba.a,{label:"Etiqueta de rol",name:"role",value:l.role,onChange:S,children:ho.map((function(e){return Object(W.jsx)(Gt.a,{value:e,children:e},e)}))})]})]})]})]}),Object(W.jsxs)(Da.a,{children:[Object(W.jsx)(B.a,{onClick:y,children:"Cerrar"}),Object(W.jsx)(B.a,{color:"primary",onClick:function(){var e=o.login,t=o.type;h(Ht({login:e,type:t,roomId:g,payload:l}))},children:"Enviar"})]})]})})),xo=a(459),yo=Object(F.a)(),Co=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({type:"",login:""}),r=Object(We.a)(a,2),o=r[0],i=r[1],c=Object(n.useState)({}),s=Object(We.a)(c,2),l=s[0],b=s[1],p=Object(n.useContext)(ka).primaryColor,f=Object(n.useState)(!1),O=Object(We.a)(f,2),v=O[0],h=O[1],g=Object(j.b)(),x=Object(j.c)((function(e){return e.rooms.active})),y=function(){return h(!0)},C=function(){return h(!1)};Object(n.useImperativeHandle)(t,(function(){return{open:y}})),Object(n.useEffect)((function(){"POPUP"===o.type?b({message:""}):b({})}),[o.type]);var S=function(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},a,n))}))};return Object(W.jsxs)(Ma.a,{open:v,onClose:C,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[Object(W.jsx)(Pa.a,{children:"Enviar Notificaci\xf3n"}),Object(W.jsxs)(Ta.a,{dividers:!0,children:[Object(W.jsxs)(D.a,{variant:"subtitle2",children:[' Utiliza ("/todos") para enviar una notificaci\xf3n a ',Object(W.jsx)("b",{children:"todos los usuarios online de la actual sala."})," Adem\xe1s, si es posible, env\xeda un mensaje claro y conciso."]}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsxs)(La.a,{required:!0,variant:"outlined",fullWidth:!0,children:[Object(W.jsx)(Ea.a,{id:"admin-receptor",children:"Usuario Receptor"}),Object(W.jsx)(Y.a,{value:o.login,onChange:S,name:"login",label:"Usuario Receptor"})]}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsxs)(La.a,{required:!0,variant:"outlined",fullWidth:!0,children:[Object(W.jsx)(Ea.a,{id:"admin-accion",children:"\xbfQu\xe9 acci\xf3n quieres realizar?"}),Object(W.jsxs)(Ba.a,{label:"\xbfQu\xe9 acci\xf3n quieres realizar?",name:"type",value:o.type,onChange:S,children:[Object(W.jsx)(Gt.a,{value:"",children:"Selecciona una acci\xf3n"}),Object(W.jsx)(Gt.a,{value:"POPUP",children:"Mensaje de notificaci\xf3n"})]})]}),Object(W.jsx)(u.a,{children:"POPUP"===o.type&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsxs)(La.a,{variant:"outlined",required:!0,fullWidth:!0,children:[Object(W.jsx)(Ea.a,{children:"Mensaje"}),Object(W.jsx)(Y.a,{label:"Mensaje",multiline:!0,maxRows:2,name:"message",value:l.message,onChange:function(e){var t=e.target,a=t.name,n=t.value;b((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},a,n))}))}})]})]})})]}),Object(W.jsxs)(Da.a,{children:[Object(W.jsx)(ja.a,{title:"Cerrar",children:Object(W.jsx)(ba.a,{className:yo.btnCerrar,onClick:C,children:Object(W.jsx)(za.a,{})})}),Object(W.jsx)(ja.a,{title:"Enviar Notificaci\xf3n",children:Object(W.jsx)(ba.a,{style:{backgroundColor:p},className:yo.btnGuardar,onClick:function(){var e=o.login,t=o.type;g(Ft({login:e,type:t,roomId:x,payload:l}))},children:Object(W.jsx)(xo.a,{})})})]})]})}));var So=function(){var e,t,a,r=Object(j.b)(),o=Object(n.useState)(!1),i=Object(We.a)(o,2),c=i[0],s=i[1],l=Object(n.useState)(null),u=Object(We.a)(l,2),d=u[0],b=u[1],m=Object(n.useState)(""),p=Object(We.a)(m,2),f=p[0],O=p[1],v=Object(n.useState)(!1),h=Object(We.a)(v,2),g=h[0],x=h[1],y=Object(n.useRef)(),C=Object(n.useRef)(),S=Object(n.useRef)(),I=Object(j.c)((function(e){return e.auth.status})),k=er(),w=re().dropdown,R=Z(),A=R.root,M=R.header,P=Object(n.useContext)(ka).theme,T=P.changeTheme,L=P.darkMode;function E(){console.log("onSearchClick"),r(De(f)),r(Te()),x(!0)}Object(n.useEffect)((function(){"AUTENTICADO"===I&&r(N(he))}),[I,r]);var B="Z2"===(null===k||void 0===k||null===(e=k.role)||void 0===e?void 0:e.role),D="A1"!==(null===k||void 0===k||null===(t=k.role)||void 0===t?void 0:t.role)&&"A2"!==(null===k||void 0===k||null===(a=k.role)||void 0===a?void 0:a.role);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ur,{}),Object(W.jsxs)(ct.a,{elevation:0,raised:!0,className:A,children:[Object(W.jsx)(jr.a,{className:M,avatar:Object(W.jsx)(ua.a,{children:function(e){var t="",a=null===e||void 0===e?void 0:e.split(" ");return null===a||void 0===a||a.forEach((function(e){e.length>3&&t.length<2&&(t+=e.charAt(0))})),t.toUpperCase()}(null===k||void 0===k?void 0:k.roomName)}),title:(null===k||void 0===k?void 0:k.roomName)||"Ninguna sala seleccionada",titleTypographyProps:!0,action:Object(W.jsxs)(W.Fragment,{children:[B&&Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(ja.a,{title:"Administracion beta",arrow:!0,children:Object(W.jsx)(ba.a,{"aria-label":"administracion",onClick:function(){var e;return null===C||void 0===C||null===(e=C.current)||void 0===e?void 0:e.open()},children:Object(W.jsx)(br.a,{})})})}),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ja.a,{title:"Menu",arrow:!0,children:Object(W.jsx)(ba.a,{"aria-label":"menu",onClick:function(e){s(!1),b(e.currentTarget)},children:Object(W.jsx)(ir.a,{})})}),Object(W.jsxs)(qt.a,{id:"optionsMenu",getContentAnchorEl:null,anchorEl:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(d),onClose:function(){b(null)},children:[D&&Object(W.jsxs)(Gt.a,{onClick:function(){var e;return null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.open()},children:[Object(W.jsx)(ba.a,{"aria-label":"notificacion",children:Object(W.jsx)(rr.a,{})}),"Notificaciones"]}),Object(W.jsxs)(Gt.a,{onClick:function(){var e;return null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.open()},children:[Object(W.jsx)(ba.a,{"aria-label":"dar feedback",children:Object(W.jsx)(ar.a,{})}),"Feedback"]}),L?Object(W.jsxs)(Gt.a,{onClick:T,children:[Object(W.jsx)(ba.a,{"aria-label":"modo claro",children:Object(W.jsx)(sr.a,{})}),"Modo Claro"]}):Object(W.jsxs)(Gt.a,{onClick:T,children:[Object(W.jsx)(ba.a,{"aria-label":"modo oscuro",children:Object(W.jsx)(ur.a,{})}),"Modo Oscuro"]})]}),Object(W.jsx)(ja.a,{title:"Buscar mensajes",arrow:!0,children:Object(W.jsx)(ba.a,{"aria-label":"buscar mensajes",onClick:function(){s(!c)},children:Object(W.jsx)(ut.a,{})})}),c?Object(W.jsxs)("div",{className:w,children:[Object(W.jsx)(mr.a,{fullWidth:!0,value:f,onChange:function(e){var t=e.target.value;t.length>=200||O(t)},onKeyPress:function(e){"Enter"===e.code&&e.target.value&&(e.preventDefault(),E())},name:"search",label:"Busqueda*",variant:"outlined"}),g?Object(W.jsx)(ba.a,{onClick:function(){x(!1)},children:Object(W.jsx)(H.a,{})}):Object(W.jsx)(ba.a,{onClick:E,children:Object(W.jsx)(ut.a,{})})]}):null]})]})}),Object(W.jsx)(po,{isFiltered:g}),Object(W.jsx)(Lr,{})]}),Object(W.jsx)(vo,{ref:y}),B&&Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(go,{ref:C})}),D&&Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(Co,{ref:S})})]})};var Io=function(){var e=_().root,t=Object(n.useMemo)((function(){return{horizontal:"right",vertical:"top"}}),[]);return Object(W.jsx)(c.a,{children:Object(W.jsxs)(u.a,{className:e,children:[Object(W.jsx)(tn,{}),Object(W.jsxs)(s.d,{children:[Object(W.jsx)(nt,{path:"/calio/chat",component:So}),Object(W.jsx)(s.b,{exact:!0,path:"/calio/",component:vn})]}),Object(W.jsx)(l.b,{anchorOrigin:t,preventDuplicate:!0,children:Object(W.jsx)(it,{})})]})})},ko="PRIVADA";var No={sendMessage:function(e,t,a,n){var r=[a().rooms.active,a().rooms.entities],o=r[0],i=r[1];if(-1===o){var c=Ce("No se ha seleccionado ninguna sala");n(N(c))}var s=i[o].type===ko;e.emit("message",Object(d.a)(Object(d.a)({},t.payload),{},{private:s,roomId:o}),(function(e){e.compoundText=Ae(e.message),n(kn(e)),n(Ln());var t=e.previousId,a=e.emitter;if(null!==t){var r=Wt(a,4);n(Nn(Object(d.a)(Object(d.a)({},r),{},{previousId:t})))}}))},privateRoom:function(e,t,a,n){var r=function(e,t){return Object.values(e).filter((function(e){return e.private&&(e.userLogin===t.guestLogind||e.guestLogin===t.guestLogin)}))[0]}(a().rooms.entities,t.payload);if(r)return n(gt(r.roomId));var o=a().rooms.active;return e.emit("privateRoom",Object(d.a)(Object(d.a)({},t.payload),{},{roomId:o}),(function(e){var t=function(e){var t=Object(d.a)({},e);return t.roomName=t.guestName.toLowerCase(),t.userLogin=t.guestLogin,delete t.creatorName,delete t.guestName,t}(e);n(vt(t))}))},exitPrivate:function(e,t,a,n){return e.emit("exitPrivate",{roomId:t.payload},(function(e){n(k({roomId:t.payload,type:ko})),n(ht(t.payload))}))},adminAction:function(e,t,a,n){return e.emit("adminAction",t.payload,(function(e){if(!e)return n(N(Ce("No se ha podido ejecutar la acci\xf3n")));n(N(Se("Se ha ejecutado la acci\xf3n solicitada")))}))},notifyAction:function(e,t,a,n){return console.log("[1] Interceptamos solicitud de acci\xf3n de notificaci\xf3n",t.payload),e.emit("notifyAction",t.payload,(function(e){if(console.log('[2] Recibimos respuesta en "notifyAction":',e),!e)return n(N(Ce("No se ha podido ejecutar la acci\xf3n")));n(N(Se("Se ha ejecutado la acci\xf3n solicitada")))}))},stateChange:function(e,t,a,n){var r=a().rooms.active;return e.emit("messageState",Object(d.a)(Object(d.a)({},t.payload),{},{roomId:r}),(function(e){return n(Nn(e))}))}},wo={message:function(e,t,a){var n=e.roomId,r=e.message,o=e.previousUserName,i=void 0===o?"":o,c=e.emitter,s=e.receiver,l=e.previousId,u=t().auth,b=u.login,j=u.name,m=t().rooms.entities[n],p=t().rooms.active===n;if(s===b&&a(N(function(e){return{message:"Has sido mencionado: ".concat(e),options:{variant:"info"}}}(r))),p?(e.compoundText=Ae(e.message),a(kn(e)),m.sound&&pe(),"PRIVADA"===m.type&&pe()):a(I({roomId:n,type:m.type})),l){var f=Wt(c,4);a(Nn(Object(d.a)({previousId:l},f))),i.toLowerCase()===j.toLowerCase()&&a(N(function(e){return{message:"Han respondido a un mensaje tuyo: ".concat(e),options:{variant:"info"}}}(r)))}},online:function(e,t,a){var n="online"===e.status;n&&e.roomId!==t().rooms.active||a(n?_n(e):Kn(e))},messageState:function(e,t,a){return a(Nn(e))},privateRoom:function(e,t,a){var n,r,o=(n=t().rooms.entities,r=e.roomId,Object.values(n).filter((function(e){return e.private&&e.roomId===r}))[0]);if(o)return a(gt(o.roomId));var i,c=function(e){var t=Object(d.a)({},e);return t.roomName=t.creatorName.toLowerCase(),t.userLogin=t.creatorLogin,delete t.creatorName,delete t.guestName,t}(e);a(vt(c)),a(N((i=c.roomName,{message:"Has recibido una invitaci\xf3n a una sala privada con ".concat(i),options:{variant:"info"}})))},exitPrivate:function(e,t,a){var n=t().rooms.entities[e.roomId];n&&(a(N(Se("El usuario ".concat(n.roomName," ha abandonado la sala privada")))),a(k({roomId:e.roomId,type:"PRIVADA"})),a(ht(e.roomId)))},adminPopup:function(e,t,a){a(N(Ie(e.message)))},notifyPopup:function(e,t,a){a(N(function(e){return{message:e,options:{persist:!0,variant:"warning",content:function(t){return Object(W.jsx)(V,{id:t,message:e},t)}}}}(e.message)))},updateRoom:function(e,t,a){var n=t().rooms.entities[e.roomId]?"Te han actualizado al permiso ".concat(e.role.role," en la sala: ").concat(e.roomName):"Te han a\xf1adido a la sala ".concat(e.roomName," con permiso ").concat(e.role.role);a(vt(e)),a(N(Ie(n)))},removeRoom:function(e,t,a){t().rooms[e.roomId]&&(a(ht(e.roomId)),a(N(Ie("Has sido eliminado de la sala ".concat(e.roomName)))))},forceDisconnect:function(e,t,a){a(N(Ie("Un administrador ha solicitado tu desconexi\xf3n. Desconectando en 10 segundos..."))),setTimeout((function(){a(Ke())}),1e4)}},Ro=["message","online","messageState","privateRoom","exitPrivate","adminPopup","notifyPopup","updateRoom","removeRoom","forceDisconnect"],Ao=function(e){return function(t){var a=t.getState,n=t.dispatch;return function(t){return function(r){if("function"===typeof r)return r(n,a);if("auth/login/fulfilled"===r.type){var o=r.payload,i=o.login,c=o.token,s=o.rooms;return n(yt(s)),e.connect(i,c,(function(e){return n(et(e))}),(function(){return n(Ke())}),(function(e){return n(N(e))}),(function(){return n(tt())})),Ro.forEach((function(t){var r=wo[t];r instanceof Function&&e.on(t,(function(e){return r(e,a,n)}))})),t(r)}if("auth/logout/pending"===r.type&&(n(S()),n(Bn()),n(Ct()),e.disconnect(),document.title="Calio"),r.type.startsWith("socket")){var l=r.type.split("/")[1],u=No[l];if(u instanceof Function)return u(e,r,a,n)}t(r)}}}},Mo=a(209),Po=a(210),To=a(211),Lo=a.n(To),Eo=new(function(){function e(){Object(Mo.a)(this,e)}return Object(Po.a)(e,[{key:"connect",value:function(e,t,a,n,r,o){var i=this;console.log("%cSocket inicializando...","color: seagreen",{login:e,token:t}),r&&(this.onNotif=r),a&&(this.onSuccess=a),n&&(this.onError=n),o&&(this.onDisconnect=o),this.socket=Lo()("http://192.168.1.128:5010/",{auth:{login:e,token:t},autoConnect:!1,reconnectionAttempts:10}),this.socket.on("connect",(function(){console.log('%cSocket on "connect"',"color: royalblue"),i.onSuccess instanceof Function&&i.onSuccess(i.socket.id)})),this.socket.on("connect_error",(function(e){console.error('%cSocket on "connect_error"',"color: firebrick",e),i.onNotif(ve),setTimeout((function(){i.onError instanceof Function&&i.onError()}),2e3)})),this.socket.open()}},{key:"disconnect",value:function(){var e=this;this.socket&&this.socket.disconnect((function(){e.socket=null,console.log('%cSocket on "disconnect"',"color: slateblue")}))}},{key:"emit",value:function(e,t,a){var n=this;if(this.socket)return this.socket.emit(e,t,(function(e){if(e.error)return"Sesi\xf3n inv\xe1lida"===e.error&&n.onNotif(ge),n.onNotif(Ce(e.error)),e.error;a(e)}))}},{key:"on",value:function(e,t){this.socket&&this.socket.on(e,t)}}]),e}()),Bo=Object(v.a)({reducer:{auth:Ze,messages:Sn,filteredMessages:Ee,rooms:ft,users:Vn,notifications:R},middleware:[Ao(Eo)]});i.a.render(Object(W.jsx)(Na,{children:Object(W.jsx)(j.a,{store:Bo,children:Object(W.jsx)(Io,{})})}),document.getElementById("root"))}},[[394,1,2]]]);
//# sourceMappingURL=main.a45400ff.chunk.js.map